<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Logic to Process a Group Document when splitOption is Group</title><link rel="Prev" href="to-processing_documents_using_tn_32.html" title="Previous" /><link rel="Next" href="to-tcom_processing_documents_using_tn.html" title="Next" /><link rel="StyleSheet" href="css/_edi_module_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_edi_module_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/eeo-webhelp/to-processing_documents_using_tn_33.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pgXMD96gMEJ9gxkLnX76GMA" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/eeo-webhelp/to-processing_documents_using_tn_33.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Module for EDI</span>&nbsp;9.12 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../eeo-webhelp/_edi_module_integrated_webhelp.1.055.html#wwconnect_header">Installing and Using EDI Module</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../eeo-webhelp/to-processing_documents_using_tn.html#wwconnect_header">Preparing to Process Inbound Non-TRADACOMS Documents Using Trading Networks</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../eeo-webhelp/to-processing_documents_using_tn_30.html#wwconnect_header">Coding Services to Process Transaction and Group Documents</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Logic to Process a Group Document when splitOption is Group</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EXBCR" class="Heading_3">Logic to Process a Group Document when <span class="varname">splitOption</span> is Group</div><div id="wwID0EGCCR" class="Body">When the <span class="varname">splitOption</span> EDITPA variable is Group, <span class="ph">Module for EDI</span> does not create Transaction documents. If you want to process individual transactions, you can do so when you process the Group document.   The following sample code illustrates the processing of individual transactions within the group.</div><div class="ww_skin_page_overflow"><div id="wwID0ERDCR" class="Figure"><img class="Default" src="../eeo-webhelp/images/EDITN_ProcGroupDoc.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 273px; max-width: 435px; top: 0pt" alt="" /></div></div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 14.8%"><div id="wwID0EFFCR" class="Table_Cell_Head">Flow operation</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 85.1%"><div id="wwID0ELFCR" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E1FCR" class="Table_Cell"><span class="inlinetitle">1</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGGCR" class="Table_Cell">  Invoke the <span class="apiname">wm.b2b.editn:getTspace</span> service to retrieve the content of the Group document from the BizDocEnvelope (in the <span class="varname">bizdoc</span> variable) to populate the <span class="varname">edidata</span> variable. You can use the <span class="apiname">getTspace</span> service regardless of whether the document is considered large.</div><div id="wwID0E4HCR" class="Table_Cell">For more information about <span class="apiname">getTspace</span>, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Module for EDI Built-In Services Reference</span>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYICR" class="Table_Cell"><span class="inlinetitle">2</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EEJCR" class="Table_Cell"> Invoke the <span class="apiname">wm.b2b.edi:envelopeProcess</span> service to process the envelopes in the Group document. This service converts the interchange, group, and transaction set headers into an IData object named <span class="varname">Values</span>. The contents of the transaction sets remain unparsed.</div><div id="wwID0EKKCR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>For ANSI X12 documents, <span class="ph">Module for EDI</span> creates an IData object of the ISA/IEA, GS/GE, and ST/SE headers/trailers.</div><div id="wwID0E6KCR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>For UN/EDIFACT documents, <span class="ph">Module for EDI</span> creates an IData object of the UNB/UNZ, UNG/UNE, and UNH/UNT headers/trailers.</div><div id="wwID0EXLCR" class="Table_Cell">When setting the input variables to the <span class="apiname">envelopeProcess</span> service, there is no need to validate or perform the compliance check on the Group document because the module already performs this validation during initial processing of the EDI document.</div><div id="wwID0ECMCR" class="Table_Cell">For more information about <span class="apiname">envelopeProcess</span>, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Module for EDI Built-In Services Reference</span>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E4MCR" class="Table_Cell"><span class="inlinetitle">3</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EJNCR" class="Table_Cell"> If the <span class="apiname">wm.b2b.edi:envelopeProcess</span> service returns errors, invoke the <span class="apiname">wm.pub.flow:debugLog</span> service to log a message to the server log.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EVOCR" class="Table_Cell"><span class="inlinetitle">4</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EBPCR" class="Table_Cell">Loop through the transaction set headers. Note that a Group document contains only a single interchange and a single group header. The data for the transaction set headers is within the <span class="varname">Values</span> IData object:</div><div id="wwID0EQPCR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>For ANSI X12 documents, transaction set headers are in <span class="varname">Values/ISA/GS/ST</span> (as shown in the sample code).</div><div id="wwID0EGQCR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>For UN/EDIFACT documents, transaction set headers are in <span class="varname">Values/UNB/UNG/UNH.</span></div></td></tr></table></div><div id="wwID0ECRCR" class="Body">The remaining steps specify processing to perform for the content of each transaction.</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 13.9%"><div id="wwID0ENSCR" class="Table_Cell_Head">Flow operation</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 86%"><div id="wwID0ETSCR" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ECTCR" class="Table_Cell"><span class="inlinetitle">5</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EOTCR" class="Table_Cell"> Invoke the <span class="apiname">wm.b2b.edi.util:getEDIstring</span> service to convert the transaction set header and trailer back to a string and concatenate them with the transaction set contents. The resulting transaction set with header and trailer can be either a String or InputStream object. For more information about the <span class="apiname">wm.b2b.edi.util:getEDIstring</span> service, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Module for EDI Built-In Services Reference</span>.</div><div id="wwID0E1UCR" class="Table_Cell">You must have an element that contains the entire transaction set, including header and trailer, before you can invoke the next service, <span class="apiname">wm.b2b.edi:convertToValues</span>. This is because <span class="apiname">convertToValues</span> uses a flat file schema for the EDI transaction set that includes the transaction set header and trailer. If you input data without the header and trailer, <span class="apiname">convertToValues</span> returns errors.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EAWCR" class="Table_Cell"><span class="inlinetitle">6</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EMWCR" class="Table_Cell"> Invoke the <span class="apiname">wm.b2b.edi:convertToValues</span> service to:</div><div id="wwID0ENXCR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Convert the content of the transaction set from either a String or InputStream object to an IData object.</div><div id="wwID0E5XCR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Validate the structure of the EDI transaction.</div><div id="wwID0EQYCR" class="Table_Cell">The inputs to the <span class="apiname">convertToValues</span> service include the flat file schema for the EDI transaction. <span class="apiname">convertToValues</span> uses the flat file schema to determine how to parse the transaction set into an IData object and validate its structure.</div><div id="wwID0EAZCR" class="Table_Cell">For more information about <span class="apiname">convertToValues</span>, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Module for EDI Built-In Services Reference</span>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2ZCR" class="Table_Cell"><span class="inlinetitle">7</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EH1CR" class="Table_Cell">Map the data from the EDI transaction set into the internal format.</div><div id="wwID0EN1CR" class="Table_Cell">Now that the contents of the transaction set are an IData object, you can access the data in the transaction set to map it to an IData object for the internal-format document. Depending on the complexity of your mapping requirements, you might need to add more logic than a MAP flow operation, or create a separate service to perform the mapping.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EY1CR" class="Table_Cell"><span class="inlinetitle">8</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EE2CR" class="Table_Cell"> Invoke the <span class="apiname">wm.b2b.edi:convertToString</span> service to convert the internal-format document from an IData object to a String.</div><div id="wwID0EF3CR" class="Table_Cell">The inputs to the <span class="apiname">convertToString</span> service include the IData object, which contains the data and the flat file schema for the document in internal format. <span class="apiname">convertToString</span> uses the flat file schema to determine how to form the internal-format document. <span class="apiname">convertToString</span> can also use an IS document type to define the structure of the internal-format document.</div><div id="wwID0E13CR" class="Table_Cell">For more information about <span class="apiname">convertToString</span>, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Module for EDI Built-In Services Reference</span>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EV4CR" class="Table_Cell"><span class="inlinetitle">9</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EB5CR" class="Table_Cell"> Branch based on the value of the <span class="uicontrol">EDI Processing Mode</span> custom attribute. This attribute is in the  <span class="varname">bizdoc/Attributes/EDI Processing Mode</span> variable. <span class="ph">Module for EDI</span> sets the value of the <span class="uicontrol">EDI Processing Mode</span> custom attribute based on the setting of the EDITPA <span class="varname">processingMode</span> variable. For more information, see 
    <a href="../eeo-webhelp/to-defining_partner_info_13.html#wwID0ERHIO"
   
     title="processingMode Variable"
    ><span class="heading-page">processingMode Variable</span></a>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EAADR" class="Table_Cell"><span class="inlinetitle">10</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EMADR" class="Table_Cell">If the value of the <span class="uicontrol">EDI Processing Mode</span> custom attribute is:</div><div id="wwID0EBBDR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">Production</span>—Send the document in internal format to the back-end system by adding your own logic or invoking a service you created.</div><div id="wwID0EWBDR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>A value other than <span class="codeph">Production</span> (for example,   <span class="codeph">Testing</span>) —Invoke   <span class="apiname">wm.pub.flow:debugLog</span> to log a message to the server log. For example, the message may be, “Testing document was received but not sent to back-end system.”</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2000-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>