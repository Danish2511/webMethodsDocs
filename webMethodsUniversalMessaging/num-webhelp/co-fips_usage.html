<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Setting up and using FIPS</title><link rel="Prev" href="co-jmsclientssl.html" title="Previous" /><link rel="Next" href="to-header_performance.html" title="Next" /><link rel="StyleSheet" href="css/_universal_messaging_docset_reverb_diba2.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_universal_messaging_docset_reverb_diba2_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/num-webhelp/co-fips_usage.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pzeyywM3_002fk0bfjkcfW5OPwQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/num-webhelp/co-fips_usage.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Universal Messaging</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../num-webhelp/to-title_concepts.html#wwconnect_header">Concepts</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../num-webhelp/to-header_security.html#wwconnect_header">Security</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Setting up and using FIPS</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0E6ZSO" class="Heading_2">Setting up and using FIPS</div><div id="wwID0EH1SO" class="Body">Federal Information Processing Standards (FIPS) provides standards for information processing for use within the Federal government.</div><div id="wwID0EM1SO" class="Body">Many government and financial organizations require their software to be FIPS 140-2 compliant, which follows the current standards and guidelines for cryptographic information processing.</div><div id="wwID0ER1SO" class="Body">In Universal Messaging, FIPS capabilities can be enabled through the use of <span class="Keyword">Mozilla</span> NSS. NSS is an open source security library that has received FIPS validation/certification for both its FIPS and cryptographic modes. Further information can be found at the Mozilla website.</div><div id="wwID0E31SO" class="Note"><span class="Bold">Note:<br /></span>Universal Messaging itself is not FIPS 140 certified.</div><div id="wwID0ES2SO" class="Body">The NSS library is not bundled in the Universal Messaging product. Details of how to download and build your own copy of NSS for your respective platform can be found at the Mozilla website.</div><div id="wwID0EX2SO" class="Body">Once you have built the library, the JVM will need to know where to load this library from via environment variable (for example, LD_LIBRARY_PATH, or equivalent). Only the <span class="Keyword">OracleÂ®</span> <span class="Keyword">JVM</span> is supported at this time.</div><div id="wwID0EH3SO" class="Body">To enable FIPS in Universal Messaging, the property <span class="codeph">enableFIPS</span> must be set on either the client and/or server before either one is started. For example:</div><div id="wwID0ER3SO" class="Preformatted">-DenableFIPS=<span class="varname">&lt;NSS mode&gt;</span></div><div id="wwID0E33SO" class="Body">where <span class="varname">&lt;NSS mode&gt;</span> can be one of the following:</div><div id="wwID0EN4SO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">nssfips</span></div><div id="wwID0ED5SO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">nsscrypto</span></div><div id="wwID0E15SO" class="Body">The biggest difference between these modes is that <span class="codeph">nssfips</span> uses an NSS database for all key management purposes, while <span class="codeph">nsscrypto</span> uses just the cryptographic algorithms and functions of NSS, while maintaining native JKS support. And, at the time of this writing, <span class="codeph">nssfips</span> does not yet support TLS 1.2.</div><div id="wwID0EM6SO" class="Body">Storing certificates into an NSS database requires you to use certain NSS tools; documenting these tools is beyond the scope of this document (see the Mozilla website for details). However, an example shell script is provided below to get you started:</div><div id="wwID0ER6SO" class="Preformatted">#!/bin/csh <br /><br />setenv DYLD_LIBRARY_PATH /Users/test/Downloads/nss-3.20/dist/Darwin13.4.0_64_OPT.OBJ/lib <br /><br />setenv PATH /Users/test/test/nss-3.20/dist/Darwin13.4.0_64_OPT.OBJ/bin:$PATH <br /><br />echo Make nssdb directory <br />mkdir ~/nssdb <br />modutil -create -dbdir ~/nssdb <br />echo Enable FIPS mode on nssdb <br />modutil -fips true -dbdir ~/nssdb <br /># Password12345! <br />echo Set password for nssdb <br />modutil -changepw "NSS FIPS 140-2 Certificate DB" -dbdir ~/nssdb <br /># DER format/PKCS#7 <br />echo Export alias from CA JKS to CRT <br /># Export only public keys <br />keytool -export -alias "localhost,127.0.0.1" -keystore ./nirvanacacerts.jks \<br />        -file public.crt <br />echo Import CRT into nssdb <br />certutil -A -d ~/nssdb -t "TCu,,TCu" -n "Test CA 1" -i ./public.crt <br />echo Convert client JKS to PKCS12 <br />keytool -importkeystore -srckeystore ./client.jks -destkeystore ./client.p12 \<br />        -deststoretype PKCS12 <br />echo Convert server JKS to PKCS12 <br />keytool -importkeystore -srckeystore ./server.jks -destkeystore ./server.p12 \<br />        -deststoretype PKCS12 <br />echo Import client PKCS12 into nssdb <br />pk12util -i ./client.p12 -n client -d ~/nssdb <br />echo Import server PKCS12 into nssdb <br />pk12util -i ./server.p12 -n CA -d ~/nssdb </div><div id="wwID0EX6SO" class="Body">The above example assumes self signed certificates. Certificate aliases are NOT supported when NSS is run in FIPS mode, so only 1 certificate/trusted certificate pair should be imported into an NSS database. It is recommended that you create both a client and server NSS database to separate certificates from one another. Each NSS instance/library has a single NSS database available for key management (i.e., the relationship is 1:1).</div><div id="wwID0E36SO" class="Body">Both modes use the <span class="Keyword">Oracle</span> <span class="Keyword">JVM</span> support for NSS; specifically, this means using the <span class="Keyword">Oracle</span> PKCS11 provider to access functionality within the NSS library. Again, no other JVM is currently supported. Only 1 NSS instance/library can be loaded per JVM via the PKCS11 provider. Universal Messaging automatically manages the loading of the PKCS11 provider and NSS library for you, so you do not have to do this yourself (assuming that the LD_LIBRARY_PATH is set properly for the NSS library).</div><div id="wwID0ERATO" class="Body">NSS uses separate configuration files to determine the mode that it should run in (among other things). For example, to run NSS in FIPS mode, create the following configuration file as a text file:</div><div id="wwID0EWATO" class="Preformatted">name = &lt;unique name&gt; <br />nssLibraryDirectory = &lt;path to location of NSS library&gt; <br />nssSecmodDirectory = &lt;path to location of NSS database&gt; <br />nssModule = fips </div><div id="wwID0E3ATO" class="Body">Example:</div><div id="wwID0EBBTO" class="Preformatted">name = CNSS <br />nssLibraryDirectory = /Users/test/Downloads/nss-3.20/dist/Darwin13.4.0_64_OPT.OBJ/lib <br />nssSecmodDirectory = /Users/test/nssdb <br />nssModule = fips </div><div id="wwID0EHBTO" class="Body">The key "name" is important, as it signifies the NSS name which uniquely identifies the NSS instance. The rest should be self explanatory. If you set up an NSS configuration file for FIPS mode, then <span class="parmname">-DenableFIPS</span> should be set to <span class="codeph">nssfips</span>.</div><div id="wwID0EWBTO" class="Body">To run NSS in crypto mode, create a configuration file as follows:</div><div id="wwID0E2BTO" class="Preformatted">name = &lt;unique name&gt; <br />nssLibraryDirectory = &lt;path to location of NSS library&gt; <br />nssModule = crypto <br />attributes = compatibility <br />nssDbMode = noDb </div><div id="wwID0EBCTO" class="Body">Example:</div><div id="wwID0EGCTO" class="Preformatted">name = CNSS <br />nssLibraryDirectory = /Users/test/Downloads/nss-3.20/dist/Darwin13.4.0_64_OPT.OBJ/lib <br />nssModule = crypto <br />attributes = compatibility <br />nssDbMode = noDb </div><div id="wwID0EMCTO" class="Body">If you set up an NSS configuration file for crypto mode, then <span class="parmname">-DenableFIPS</span> should be set to <span class="codeph">nsscrypto</span>.</div><div id="wwID0E2CTO" class="Body">Note that NSS configuration files can only have 1 set of configuration parameters in them; in other words, you cannot have multiple configurations within a single file.</div><div id="wwID0EADTO" class="Body">Once the configuration file and name have been set up, you'll need to specify them either via the Universal Messaging APIs, or via the Enterprise Manager (if configuring a Universal Messaging server NHPS or NSPS interface). For the Universal Messaging APIs, see the appropriate Java documentation for:</div><div id="wwID0EFDTO" class="Preformatted">com.pcbsys.nirvana.client.nSessionAttributes.getPKCS11NSSConfigFile <br />com.pcbsys.nirvana.client.nSessionAttributes.setPKCS11NSSConfigFile <br />com.pcbsys.nirvana.client.nSessionAttributes.getPKCS11NSSName <br />com.pcbsys.nirvana.client.nSessionAttributes.setPKCS11NSSName <br />com.pcbsys.nirvana.nAdminAPI.nSSLInterface.getPKCS11NSSConfigFile <br />com.pcbsys.nirvana.nAdminAPI.nSSLInterface.setPKCS11NSSConfigFile <br />com.pcbsys.nirvana.nAdminAPI.nSSLInterface.getPKCS11NSSName <br />com.pcbsys.nirvana.nAdminAPI.nSSLInterface.setPKCS11NSSName <br />com.pcbsys.nirvana.nAdminAPI.nHTTPSInterface.getPKCS11NSSConfigFile <br />com.pcbsys.nirvana.nAdminAPI.nHTTPSInterface.setPKCS11NSSConfigFile <br />com.pcbsys.nirvana.nAdminAPI.nHTTPSInterface.getPKCS11NSSName <br />com.pcbsys.nirvana.nAdminAPI.nHTTPSInterface.setPKCS11NSSName <br />com.pcbsys.foundation.drivers.configuration.fSSLConfig <br />com.pcbsys.foundation.drivers.configuration.fHTTPSConfig </div><div id="wwID0ELDTO" class="Body">While running NSS in FIPS mode, the password to the NSS database must be specified via <span class="apiname">nSessionAttributes.setKeystore</span> (keystore/alias would be set to null or is unused), or via <span class="apiname">nSSLInterface/nHTTPSInterface.setKeyStorePassword</span>. While running NSS in crypto mode, use the APIs as you normally would for JKS keystores/truststores. Set the PKCS11 NSS configuration file and name using the appropriate <span class="apiname">nSessionAttributes/nSSLInterface/nHTTPSInterface.setPKCS11NSS*</span> methods.</div><div id="wwID0EAETO" class="Body">For configuring an SSL/HTTPS interface in the Enterprise Manager, specify a key store password, PKCS11 NSS configuration file and name for NSS FIPS mode; all other fields can be left blank. Any combination of SSL and/or HTTPS interfaces configured while in NSS FIPS mode will share the same NSS database (since only 1 NSS instance/database is available per JVM). For NSS crypto, configure the interfaces as you normally would for JKS keystores/truststores.</div><div id="wwID0EFETO" class="Body">To recap, refer to the following NSS checklist when enabling FIPS for UM:</div><div id="wwID0EQETO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Shut down any Universal Messaging servers and/or clients that you want to configure for FIPS.</div><div id="wwID0EDFTO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Download the Mozilla NSS open source library, and build it for your respective platform (see the Mozilla website for details).</div><div id="wwID0EWFTO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Determine whether you want to run in NSS FIPS or crypto mode.</div><div id="wwID0EJGTO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>If you'll be running in FIPS mode, create an NSS FIPS configuration file. If you'll be running in crypto mode, create an NSS crypto configuration file.</div><div id="wwID0E3GTO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>If you'll be running in FIPS mode, create an NSS database, and store the appropriate certificates in it (both client and server). If you'll be running in crypto mode, create/use normal JKS keystores/truststores.</div><div id="wwID0EPHTO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span>Set up LD_LIBRARY_PATH (or equivalent, depending on your platform) to point to the location of the NSS binary distribution. This can be done in either a shell, command line, shell/batch script or configuration file.</div><div id="wwID0ECITO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>7. </span></span>Write any API programs that are FIPS enabled (if applicable).</div><div id="wwID0EVITO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>8. </span></span>For client and/or server, set <span class="codeph">-DenableFIPS=nssfips</span> in a command line, shell/batch script or configuration file if you'll be running in FIPS mode. Set <span class="codeph">-DenableFIPS=nsscrypto</span> if you'll be running in crypto mode (again, for client and/or server).</div><div id="wwID0EQJTO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>9. </span></span>Restart the Universal Messaging server(s), and configure SSL/HTTPS interfaces with FIPS as needed. Restart the Universal Messaging client(s).</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright Â© 2013-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>