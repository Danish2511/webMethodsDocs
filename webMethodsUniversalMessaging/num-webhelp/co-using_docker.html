<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Using Containers</title><link rel="Prev" href="to-instancemanager.html" title="Previous" /><link rel="Next" href="to-title_concepts.html" title="Next" /><link rel="StyleSheet" href="css/_universal_messaging_docset_reverb_diba2.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_universal_messaging_docset_reverb_diba2_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/num-webhelp/co-using_docker.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pcN_002fB8WKIok2oo7q_002f26yo2A" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/num-webhelp/co-using_docker.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Universal Messaging</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../num-webhelp/to-title_installation_guide.html#wwconnect_header">Installation Guide</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Using Containers</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EVXMM" class="Heading_1">Using Containers</div><div id="wwID0EEYMM" class="Section_Title">Docker Scripts on GitHub</div><div id="wwID0EJYMM" class="Body">If you want to build your own Universal Messaging container image to run in a Docker container, there are scripts available on GitHub that provide a template for setting this up. The scripts and accompanying documentation can be used as provided or can be altered to take account of specific environment requirements. Universal Messaging system requirements have been updated to reflect that Docker with a CentOS image is now supported in line with the other Software AG products. The samples use CentOS 8 as a base image.</div><div id="wwID0EOYMM" class="Body">The scripts are available at 
    <a href="https://github.com/SoftwareAG/universalmessaging-server-docker-samples"
   
     target="external_window"
    ><span class="heading-page">https://github.com/SoftwareAG/universalmessaging-server-docker-samples</span></a>.</div><div id="wwID0EGZMM" class="Section_Title">Universal Messaging Container Images on Software AG Container Repository</div><div id="wwID0ELZMM" class="Body">As an alternative to building your own Universal Messaging container image, there are official Universal Messaging container images on the Software AG Container Repository. These are container images that Software AG builds, tests, and promotes on a regular basis.</div><div id="wwID0EQZMM" class="Body">The available container images are:</div><div id="wwID0EM1MM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">Software AG Universal Messaging Server</span>, available at 
    <a href="https://containers.softwareag.com/products/universalmessaging-server"
   
     target="external_window"
    ><span class="heading-page">https://containers.softwareag.com/products/universalmessaging-server</span></a>.</div><div id="wwID0EM2MM" class="List_1_Continued">This image contains the Universal Messaging server, and also the administration and monitoring tools available in the <span class="inlinetitle">Software AG Universal Messaging Tools</span> image.</div><div id="wwID0EJ3MM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">Software AG Universal Messaging Tools</span>, available at 
    <a href="https://containers.softwareag.com/products/universalmessaging-tools"
   
     target="external_window"
    ><span class="heading-page">https://containers.softwareag.com/products/universalmessaging-tools</span></a>.</div><div id="wwID0EJ4MM" class="List_1_Continued">This image contains just the tools for the command-line administration and monitoring of Universal Messaging. This image may be used in conjunction with the Universal Messaging Server image.</div><div id="wwID0EO4MM" class="List_1_Continued">The tools are described in the section 
    <a href="../num-webhelp/to-header_clu_syntax_reference.html#wwID0E1LTU"
   
     title="Syntax reference for command line tools"
    ><span class="heading-page">Syntax reference for command line tools</span></a> in the <span class="Citation">Administration Guide</span>.</div><div id="wwID0ER5MM" class="Section_Title">Creating Universal Messaging Container Images Using Software AG Installer</div><div id="wwID0EW5MM" class="Body">You can also build Docker images for Universal Messaging on Linux systems using Software AG Installer. This approach allows only limited customization, such as providing a custom base image. The images that you build using the Installer client are similar to the official Universal Messaging images on Docker Hub and can be used in the same manner.</div><div id="wwID0E25MM" class="Body">For more information about building Docker images for Universal Messaging using Software AG Installer, see the documentation about creating Docker images on Linux in the <span class="ph"> </span><span class="ph_002c_Citation">Using Software&nbsp;AG Installer</span> guide.</div><div id="wwID0ET6MM" class="Section_Title">Running Universal Messaging Docker Images</div><div id="wwID0EY6MM" class="Body">After you build or pull a Universal Messaging Docker image, you can run that image by using the <span class="codeph">docker run</span> command. You must map the default container port <span class="codeph">9000</span> to one of the host ports, for example:</div><div id="wwID0EGANM" class="Preformatted">docker run -d -p 9000:9000 --name umservercontainer universalmessaging-server:10.15</div><div id="wwID0EOANM" class="Body">You can then use the host ports to access the server remotely via a URL, for example:</div><div id="wwID0ETANM" class="Preformatted">nsp://<span class="varname">dockerhostname</span>:<span class="varname">hostport</span></div><div id="wwID0EFBNM" class="Body">Optionally, you can specify the follwing environment variables when running an image:</div><div id="wwID0EBCNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">REALM_NAME</span> - the name of the Universal Messaging realm.</div><div id="wwID0EIDNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">INIT_JAVA_MEM_SIZE</span> - the initial Java heap size in megabytes.</div><div id="wwID0EPENM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">MAX_JAVA_MEM_SIZE</span> - the maximum Java heap size in megabytes.</div><div id="wwID0EWFNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">MAX_DIRECT_MEM_SIZE</span> - the maximum direct memory size in gigabytes.</div><div id="wwID0E4GNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">BASIC_AUTH_ENABLE</span> - enables basic authentication on the server.</div><div id="wwID0EEINM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">BASIC_AUTH_MANDATORY</span> - enables and manages basic authentication on the server.</div><div id="wwID0ELJNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">STARTUP_COMMAND</span> - configues the server to execute a given command at startup.</div><div id="wwID0ESKNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">LOG_FRAMEWORK</span> - enables the Log4j2 logging framework. The valid value is <span class="codeph">log4j2</span>. If this variable is not specified, the server uses the default logging framework (<span class="codeph">fLogger</span>).</div><div id="wwID0ERLNM" class="Body">The following is an example of running an image with the environment variables specified:</div><div id="wwID0EWLNM" class="Preformatted">docker run -d -e REALM_NAME=umtest -e INIT_JAVA_MEM_SIZE=2048 -e MAX_JAVA_MEM_SIZE=2048 <br />-e MAX_DIRECT_MEM_SIZE=3G -e BASIC_AUTH_ENABLE=Y -e BASIC_AUTH_MANDATORY=Y -e LOG_FRAMEWORK=log4j2 <br />-e STARTUP_COMMAND="runUMTool.sh CreateChannel -channelname=test -rname=nsp://localhost:9000" <br />-p 9000:9000 --name umservercontainer universalmessaging-server:10.15</div><div id="wwID0E5LNM" class="Body">When Universal Messaging uses the default logging framework, the output is recorded in the nirvana.log and UMRealmservice.log files and is also displayed in the console. Each log entry starts with the specific log file name with which that entry is associated. You can also fetch the logs of a continer by using the <span class="codeph">docker logs umservercontainer</span> command.</div><div id="wwID0EIMNM" class="Body">When Universal Messaging uses Log4j2 as the logging framework, the server logs are directly displayed in the console and written in the UMRealmService.log file. The log entries are not prefixed by the log file name, because Universal Messaging generates only one log file.</div><div id="wwID0EVMNM" class="Section_Title">Using the Log4J2 Logging Framework</div><div id="wwID0E1MNM" class="Body">Universal Messaging supports the Log4j2 logging framework for Docker images and provides a default Log4j2 configuration. To enable Log4j2 for Docker images, set the <span class="codeph">LOG_FRAMEWORK=log4j2</span> environment variable as part of the <span class="codeph">docker run</span> command.</div><div id="wwID0EINNM" class="Body">The log4j2.xml default configuration file is located inside the Universal Messaging container under <span class="codeph">/opt/softwareag/UniversalMessaging/lib/classes</span>. The default configuration does not store the nirvana.log log file on disk but displays the log output to STDOUT. The output of the UMRealmService.log file is displayed in the console.</div><div id="wwID0ESNNM" class="Body">If you use a custom log4j2.xml configuration, you must retain the <span class="codeph">packages</span> configuration entry that lists the Universal Messaging extension package for Log4j2:</div><div id="wwID0E3NNM" class="Preformatted">Configuration packages="com.softwareag.um.extensions.logger.log4j2"</div><div id="wwID0EEONM" class="Body">To configure the server logging level, use the nAdminAPI or the <span class="codeph">fLoggerLevel</span> logging configuration property in the Enterprise Manager. To configure that property, you must first set <span class="codeph">LogLevelOverride</span> to <span class="codeph">true</span>. A <span class="codeph">false</span> value for <span class="codeph">LogLevelOverride</span> restores the configuration from log4j2.xml and overrides <span class="codeph">fLoggerLevel</span>.</div><div id="wwID0ECPNM" class="Body">The following functionalities are not supported on a Universal Messaging server using Log4j2:</div><div id="wwID0E5PNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">DefaultLogSize</span> logging configuration property</div><div id="wwID0EFRNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">LogManager</span> logging configuration property</div><div id="wwID0EMSNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">RolledLogFileDepth</span> logging configuration property</div><div id="wwID0ETTNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Dynamic reconfiguration using the <span class="codeph">monitorInterval</span> Log4J configuration attribute</div><div id="wwID0E2UNM" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Rolling the log file</div><div id="wwID0EPVNM" class="Body">For more information about the logging properties, see 
    <a href="../num-webhelp/to-realmcfg.html#wwID0ED5LR"
   
     title="Realm Configuration"
    ><span class="heading-page">Realm Configuration</span></a>.</div><div id="wwID0EAWNM" class="Body">For more information about the Administration API, see 
    <a href="../num-webhelp/to-overview-admin-api.html#wwID0ELJWU"
   
     title="Universal Messaging Administration API"
    ><span class="heading-page">Universal Messaging Administration API</span></a>.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2013-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>