<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Connecting to Multiple Realms Using SSL</title><link rel="Prev" href="to-deploymentoverview_2.html" title="Previous" /><link rel="Next" href="co-periodic_logging_server_status.html" title="Next" /><link rel="StyleSheet" href="css/_universal_messaging_docset_reverb_diba2.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_universal_messaging_docset_reverb_diba2_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/num-webhelp/to-multiplesslrealms.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pjxhDH3L5V4o37ZdgnPG4hQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/num-webhelp/to-multiplesslrealms.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Universal Messaging</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../num-webhelp/to-title_concepts.html#wwconnect_header">Concepts</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../num-webhelp/to-header_deployment.html#wwconnect_header">Deployment</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../num-webhelp/to-header_server.html#wwconnect_header">Server</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Connecting to Multiple Realms Using SSL</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EJAIO" class="Heading_3">Connecting to Multiple Realms Using SSL</div><div id="wwID0ERAIO" class="Body">This Section describes how to connect to multiple Universal Messaging realms using SSL when different certificate hierarchies are used on each respective realm. The information below applies to any of the various wire protocols (see 
    <a href="../num-webhelp/to-communicationprotocols.html#wwID0EX1PM"
   
     title="Communication Protocols and RNAMEs"
    ><span class="heading-page">Communication Protocols and RNAMEs</span></a>) that Universal Messaging supports, such as SSL enabled sockets (nsps) and HTTPS (nhps). Note that the example programs contained in the Universal Messaging package will all work with SSL enabled on the realm server.</div><div id="wwID0EBBIO" class="Body">The certificate requirements differ depending on whether the realms require client certificate authentication or not. Let us assume that we want to connect to 2 realms over nsps, realmA and realmB. RealmA has interface nsps0 which uses a certificate signed by CA1, while RealmB has interface nsps0 which uses a certificate signed by CA2. The next few paragraphs describe what needs to be done for each possible configuration.</div><div id="wwID0EGBIO" class="Body">The Universal Messaging Client API supports both custom SSL properties that can be set per UM session, and JSSE and Universal Messaging client properties that can be set via system properties.</div><div id="wwID0ELBIO" class="Body">When using custom SSL properties that are set on the session level, you can set keystore/trustore and other SSL properties for each of your connections.</div><div id="wwID0EQBIO" class="Body">When using JSSE, only 1 keystore file/keystore password and 1 truststore file/truststore password can be used. In order to achieve your goal you will then have to create a combined keystore and / or a combined truststore depending on your configuration.</div><div id="wwID0E3BIO" class="Section_Title">Setting Custom SSL Properties on a Session</div><div id="wwID0EBCIO" class="Body">Setting SSL properties directly is done using the session attributes. Before initializing the session, ensure that your session attributes for each session are set with the correct keystore and truststore information. You can also set the alias of the certificate to use when client certificate authentication is enabled on the interface you are connecting to (see 
    <a href="../num-webhelp/to-clientssl.html#wwID0E4TRO"
   
     title="Client SSL Configuration"
    ><span class="heading-page">Client SSL Configuration</span></a> for more info). If you are using JMS then you will need to set the SSL properties directly on the connection factory or on the create connection overload method provided as part of the connection factory implementation (see 
    <a href="../num-webhelp/co-jmsclientssl.html#wwID0EPJSO"
   
     title="JMS Client SSL Configuration"
    ><span class="heading-page">JMS Client SSL Configuration</span></a> for more info).</div><div id="wwID0EDDIO" class="Section_Title">Setting SSL Properties Using JSSE</div><div id="wwID0EHDIO" class="Section_Division">Client certificate authentication NOT required</div><div id="wwID0EMDIO" class="Important"><span class="Bold">Important:<br /></span>The CKEYSTORE, CKEYSTOREPASSWD, CAKEYSTORE, and CAKEYSTOREPASSWD system properties are deprecated.</div><div id="wwID0EDEIO" class="Body">In the case where client certificate authentication is not required by both realms, your application needs to use a combined truststore / truststore password only using the -DCAKEYSTORE and -DCAKEYSTOREPASSWD parameters.</div><div id="wwID0EOEIO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Both CA1 and CA2 are well known Root Certificate Authorities</div><div id="wwID0EBFIO" class="Numbered_1_Continued">All well known Root CAs are already included in the JRE cacerts file which can be found in jre\lib\security\cacerts . Unless you have manually changed that keystore's password the default password is changeit. You have to use these values for your -DCAKEYSTORE and -DCAKEYSTOREPASSWD parameters.</div><div id="wwID0EHFIO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>CA1 is a well known Root Certificate Authority but CA2 is not (or vice versa)</div><div id="wwID0E1FIO" class="Numbered_1_Continued">Two choices are available for this configuration. Either you add CA2's certificate to the JRE cacerts file or you create a combined keystore with CA2's certificate and CA1's certificate.You have to use these values for your -DCAKEYSTORE and -DCAKEYSTOREPASSWD parameters.</div><div id="wwID0EAGIO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>CA1 and CA2 are not well known Root Certificate Authorities</div><div id="wwID0ETGIO" class="Numbered_1_Continued">In this instance you have to create a combined truststore file that contains both the CA1 and CA2 certificates. In order to do this export your CA certificates from their current JKS store files then create a new JKS file and import them. You can do this using the JDK keytool command line utility. Finally you have to use these values for your -DCAKEYSTORE and -DCAKEYSTOREPASSWD parameters.</div><div id="wwID0EZGIO" class="Section_Division">Client certificate authentication required</div><div id="wwID0E5GIO" class="Important"><span class="Bold">Important:<br /></span>The CKEYSTORE, CKEYSTOREPASSWD, CAKEYSTORE, and CAKEYSTOREPASSWD system properties are deprecated.</div><div id="wwID0EVHIO" class="Body">In the case where client certificate authentication is required by both realms, your application needs to use a combined keystore / keystore password and a combined truststore / truststore password using the -DCKEYSTORE, -DCKEYSTOREPASSWD, -DCAKEYSTORE and -DCAKEYSTOREPASSWD parameters respectively.</div><div id="wwID0EAIIO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Both CA1 and CA2 are well known Root Certificate Authorities</div><div id="wwID0ETIIO" class="Numbered_1_Continued">With regards to the truststore, all well known Root CAs are already included in the JRE cacerts file which can be found in jre\lib\security\cacerts . Unless you have manually changed that keystore's password the default password is changeit. You have to use these values for your -DCAKEYSTORE and -DCAKEYSTOREPASSWD parameters.</div><div id="wwID0EYIIO" class="Numbered_1_Continued">With regards to the keystore, you need to create a combined keystore that contains both client certificates and then point the -DCKEYSTORE parameter to its path as well as set the -DCKEYSTOREPASSWD to the password of that combined keystore. In order to create a combined keystore, export the certificates and private keys in PKCS#12 format and then import them as trusted certificates in the same keystore file. You can do this using the JDK keytool command line utility.</div><div id="wwID0E5IIO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>CA1 is a well known Root Certificate Authority but CA2 is not (or vice versa)</div><div id="wwID0ERJIO" class="Numbered_1_Continued">The easiest way for this configuration option is to create a single JKS file that contains the CA1 certificate, the CA1 signed client certificate, the CA2 certificate and the CA2 client certificate. You then have to use the same values for CKEYSTORE, CAKEYSTORE and CKEYSTOREPASSWD, CAKEYSTOREPASSWD respectively.</div><div id="wwID0EXJIO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>CA1 and CA2 are not well known Root Certificate Authorities</div><div id="wwID0EKKIO" class="Numbered_1_Continued">Again the easiest way for this configuration option is to create a single JKS file that contains the CA1 certificate, the CA1 signed client certificate, the CA2 certificate and the CA2 client certificate. You then have to use the same values for CKEYSTORE, CAKEYSTORE and CKEYSTOREPASSWD, CAKEYSTOREPASSWD respectively.</div><div id="wwID0EZKIO" class="Section_Title">Environment Settings</div><div id="wwID0E5KIO" class="Body">The CKEYSTORE, CKEYSTOREPASSWD, CAKEYSTORE and CAKEYSTOREPASSWD system properties (deprecated) are used by the Universal Messaging sample apps, but are mapped to system properties required by a jsse-enabled JVM by the utility program 'com.pcbsys.foundation.utils.fEnvironment', which all sample applications use. If you do not want to use this program to perform the mapping between Universal Messaging system properties and those required by the JVM, you can specify the SSL properties directly. To do this in your own applications, the following system properties must be set:</div><div id="wwID0EDLIO" class="Preformatted">-Djavax.net.ssl.keyStore=%INSTALLDIR%\client\Universal Messaging\bin\client.jks<br />-Djavax.net.ssl.keyStorePassword=password<br />-Djavax.net.ssl.trustStore=%INSTALLDIR%\client\Universal Messaging\bin\nirvanacacerts.jks<br />-Djavax.net.ssl.trustStorePassword=password</div><div id="wwID0EJLIO" class="Body">where :</div><div id="wwID0ETLIO" class="Body">javax.net.ssl.keyStore is the client keystore location</div><div id="wwID0EYLIO" class="Body">javax.net.ssl.keyStorePassword is the password for the client keystore</div><div id="wwID0E4LIO" class="Body">javax.net.ssl.trustStore is the CA keystore file location</div><div id="wwID0ECMIO" class="Body">javax.net.ssl.trustStorePassword is the password for the CA keystore</div><div id="wwID0EIMIO" class="Body">As well as the above system properties, if you are intending to use https, both the Universal Messaging sample apps and your own applications will require the following system property to be passed in the command line:</div><div id="wwID0ENMIO" class="Body">-Djava.protocol.handler.pkgs="com.sun.net.ssl.internal.www.protocol"</div><div id="wwID0ESMIO" class="Body">As well as the above, the RNAME (see 
    <a href="../num-webhelp/to-communicationprotocols.html#wwID0EX1PM"
   
     title="Communication Protocols and RNAMEs"
    ><span class="heading-page">Communication Protocols and RNAMEs</span></a>) used by your client application must correspond to the correct type of SSL interface, and the correct hostname and port that was configured earlier.</div><div id="wwID0EKNIO" class="Section_Title">Using the Universal Messaging Client System Properties for Secure Communication</div><div id="wwID0EPNIO" class="Body">Instead of the JSSE system properties, you can use the Universal Messaging client system properties to configure secure communication with Universal Messaging realms. The Universal Messaging client system properties configure only the connections to Universal Messaging realms and have no impact on the connections established to other endpoints, unlike the JSSE system properties. If both Universal Messaging client and JSSE system properties are provided, when you create a session to a Universal Messaging realm, the Universal Messaging client properties take precedence.</div><div id="wwID0EUNIO" class="Body">To configure secure communication in your own applications, set the following system properties:</div><div id="wwID0EZNIO" class="Preformatted">-Dcom.softwareag.um.client.ssl.keystore_path=<br />%INSTALLDIR%\client\Universal Messaging\bin\client.jks<br />-Dcom.softwareag.um.client.ssl.keystore_password=<span class="varname">password</span><br />-Dcom.softwareag.um.client.ssl.certificate_alias=<span class="varname">alias</span><br />-Dcom.softwareag.um.client.ssl.truststore_path=<br />%INSTALLDIR%\client\Universal Messaging\bin\nirvanacacerts.jks<br />-Dcom.softwareag.um.client.ssl.truststore_password=<span class="varname">password</span><br />-Dcom.softwareag.um.client.ssl.enabled_ciphers=AES-128,AES-192,AES-256<br />-Dcom.softwareag.um.client.ssl.ssl_protocol=TLS<br /></div><div id="wwID0EPOIO" class="Body">where:</div><div id="wwID0E1OIO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>com.softwareag.um.client.ssl.keystore_path is the client keystore location</div><div id="wwID0ENPIO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>com.softwareag.um.client.ssl.keystore_password is the password for the client keystore</div><div id="wwID0EAQIO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>com.softwareag.um.client.ssl.certificate_alias is the alias of the certificate in the client keystore that is sent to the server if client certificate authentication is required</div><div id="wwID0ETQIO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>com.softwareag.um.client.ssl.truststore_path is the CA keystore file location</div><div id="wwID0EGRIO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>com.softwareag.um.client.ssl.truststore_password is the password for the CA keystore</div><div id="wwID0EZRIO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>com.softwareag.um.client.ssl.enabled_ciphers is a comma-separated list of ciphers from which the client is allowed to choose for secure communication</div><div id="wwID0EMSIO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>com.softwareag.um.client.ssl.ssl_protocol is the protocol that is used for secure communication</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright Â© 2013-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>