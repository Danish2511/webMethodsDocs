<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Startup, Shutdown, Planned Outages and Changes</title><link rel="Prev" href="co-ops_installation.html" title="Previous" /><link rel="Next" href="co-ops_backup_recovery.html" title="Next" /><link rel="StyleSheet" href="css/_universal_messaging_docset_reverb_diba2.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_universal_messaging_docset_reverb_diba2_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/num-webhelp/co-ops_startup_shutdown.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN2ijT_002bC4VUdfPH7cBUWHS6Q" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/num-webhelp/co-ops_startup_shutdown.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Universal Messaging</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../num-webhelp/to-title_operations_guide.html#wwconnect_header">Operations Guide</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Startup, Shutdown, Planned Outages and Changes</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0ER3WW" class="Heading_1">Startup, Shutdown, Planned Outages and Changes</div><div id="wwID0EZ3WW" class="Body">This section covers how to start up and shut down the Universal Messaging server. It also looks at aspects to be taken into account while planning an outage for server maintenance.</div><div id="wwID0EF4WW" class="Section_Title">Organization of a Startup</div><div id="wwID0EK4WW" class="Body">For details on how to start the Universal Messaging server, and different modes (Automatic and Manual) in which it can be started, refer to the section <span class="Citation">Starting the Realm Server</span> of the Universal Messaging <span class="Citation">Installation Guide</span>.</div><div id="wwID0E14WW" class="Body">To check that the realm server has started properly, examine the realm server log file <span class="codeph">nirvana.log</span> in the &lt;DataDir&gt; location for text similar to the following:</div><div id="wwID0EE5WW" class="Preformatted">[Tue Nov 27 13:02:27.538 GMT 2018] [ServerStarterThread] Startup:<br />Realm Server Startup sequence completed</div><div id="wwID0ES5WW" class="Section_Title">Organization of a Shutdown</div><div id="wwID0EX5WW" class="Body">For details on how to stop the Universal Messaging server, refer to the section <span class="Citation">Stopping the Realm Server</span> of the Universal Messaging <span class="Citation">Installation Guide</span>.</div><div id="wwID0EH6WW" class="Body">To check that the realm server has shut down properly, examine the realm server log file <span class="codeph">nirvana.log</span> in the &lt;DataDir&gt; location for text similar to the following:</div><div id="wwID0ER6WW" class="Preformatted">[Tue Nov 27 13:00:30.312 GMT 2018] [ServerStarterThread] Shutdown:<br />Realm Server completed shutdown sequence, process exiting normally<br />--------- Log File Closed ---------</div><div id="wwID0E66WW" class="Section_Title">Maintenance Window (Planned Outage)</div><div id="wwID0EEAXW" class="Body">Consider the following points before shutting down the Universal Messaging realm or cluster for a scheduled maintenance:</div><div id="wwID0ENAXW" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Clients (other than Integration Server clients) that are publishing the messages are either stopped or suspended.</div><div id="wwID0E5AXW" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>In the case of Integration Server clients, ensure that the "Enable CSQ" option under the Producer Settings of the Universal Messaging connection alias settings is enabled. This will ensure that when the Integration Server publishes documents using this connection alias, it writes the documents to the client-side queue if the Universal Messaging server is unavailable. Integration Server will publish the messages written to the client-side queue when the Universal Messaging server is back online. Client-side queuing can also be enabled by passing "true" to the <span class="codeph">useCSQ</span> flag while invoking the <span class="codeph">pub.jms:send</span> and <span class="codeph">pub.jms:sendAndWait</span> services. The "Maximum CSQ Size (messages)" property of the Universal Messaging connection alias settings should be set to an appropriate value depending on the publishing rate and planned outage window size.</div><div id="wwID0E2BXW" class="List_1_Continued">For related information, refer to the description of <span class="Citation">Creating a Universal Messaging Connection Alias</span> in the chapter <span class="Citation">Configuring Integration Server for webMethods Messaging</span> in the <span class="Citation">Integration Server Administrator's Guide</span>. Refer also to the descriptions of <span class="codeph">pub.jms:send</span> and <span class="codeph">pub.jms:sendAndWait</span> in the <span class="Citation">JMS Folder</span> section of the <span class="Citation">Built-In Services Reference Guide</span>, which is included in the Integration Server documentation set.</div><div id="wwID0EDDXW" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>All the channels and queues are drained or emptied before stopping or suspending the clients consuming the messages.</div><div id="wwID0EVDXW" class="Note"><span class="Bold">Note:<br /></span>The above points are not recommendations but rather points to be considered while designing the system as well as planning for a scheduled maintenance.</div><div id="wwID0EZEXW" class="Section_Title">Application of Fixes</div><div id="wwID0E5EXW" class="Body">Consider the following points when applying a fix to a realm or a cluster of realms:</div><div id="wwID0EYFXW" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Before applying the fix, perform the following steps:</div><div id="wwID0ETGXW" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Back up the realm data and configurations, following the backup procedure.</div><div id="wwID0EEHXW" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Shut down the realm, following the maintenance window procedure.</div><div id="wwID0EYHXW" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Apply the fix to the realm using Software AG Update Manager.</div><div id="wwID0E6IXW" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>After applying the fix, perform the following steps:</div><div id="wwID0EVJXW" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Start the realm.</div><div id="wwID0EGKXW" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Perform a configuration health check by running the HealthChecker tool. The checks to perform are:</div><div id="wwID0E2KXW" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>DurableSubscriberLargeStoreCheck</div><div id="wwID0EMLXW" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>FixLevelCheck</div><div id="wwID0E4LXW" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>JNDIStatusCheck</div><div id="wwID0EOMXW" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>JoinMismatchCheck</div><div id="wwID0E6MXW" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>ResourcesSafetyLimitsCheck</div><div id="wwID0EQNXW" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>ServerProtectionConsistencyCheck</div><div id="wwID0ECOXW" class="List_2_Continued">For more information about working with the HealthChecker tool, see 
    <a href="../num-webhelp/co-clu_health_checker.html#wwID0EWINU"
   
     title="Running a Configuration Health Check"
    ><span class="heading-page">Running a Configuration Health Check</span></a>.</div><div id="wwID0EAPXW" class="Section_Title">Rolling Update of Servers in a Cluster</div><div id="wwID0EFPXW" class="Body">A rolling update of the Universal Messaging servers in an active/active cluster enables you to apply a fix to a server in the cluster while the other servers remain online. You shut down only the server to which you are applying the fix and not the whole cluster.</div><div id="wwID0EKPXW" class="Body">Consider the following information before starting the procedure:</div><div id="wwID0EEQXW" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>You must apply the fix to all servers in the cluster.</div><div id="wwID0EIRXW" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Software AG recommends that you first apply the fix to the secondary nodes and then to the primary node.</div><div id="wwID0E3RXW" class="Body">To install a fix to the servers in an active/active cluster, perform the following steps on each node:</div><div id="wwID0EWSXW" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Shut down the node.</div><div id="wwID0EITXW" class="Numbered_1_Continued">The node disconnects from the cluster.</div><div id="wwID0E6TXW" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Apply the fix to the node.</div><div id="wwID0EDVXW" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Start the node.</div><div id="wwID0EVVXW" class="Numbered_1_Continued">The node reconnects to the cluster and is operational again.</div><div id="wwID0E3VXW" class="Body">Clients connected to the cluster should be able to tolerate a brief loss of connection:</div><div id="wwID0EWWXW" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>When the node to which a client is connected is shut down, the client loses connection to the node and the cluster. Then the client must re-establish the connection.</div><div id="wwID0E1XXW" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>When the primary node is shut down, the whole cluster briefly goes offline until a new primary node is elected.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2013-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>