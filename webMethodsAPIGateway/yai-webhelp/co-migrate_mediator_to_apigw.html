<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Migrating from Mediator to API Gateway</title><link rel="Prev" href="to-migrate_mediator_to_apigw.html" title="Previous" /><link rel="Next" href="_api_gtw_integrated_webhelp.1.834.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/co-migrate_mediator_to_apigw.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="plgz_002b8d9Ze4sF3oM9_002fxdU_002bg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/co-migrate_mediator_to_apigw.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.801.html#wwconnect_header">Upgrading and Migrating to API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/to-migrate_mediator_to_apigw.html#wwconnect_header">Migrating from Mediator to API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Migrating from Mediator to API Gateway</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0ETHW4" class="Heading_2">Migrating from Mediator to API Gateway</div><div id="wwID0EBJW4" class="Body"><span class="ph">API Gateway</span> supports the migration of <span class="ph">Mediator</span> 9.7 and later; earlier versions of <span class="ph">Mediator</span> should be migrated first.</div><div id="wwID0EZJW4" class="Section_Title">Migrating <span class="ph">Mediator</span> Deployments to <span class="ph">API Gateway</span></div><div id="wwID0EGKW4" class="Body">Existing <span class="ph">Mediator</span> deployments can be migrated to <span class="ph">API Gateway</span> by publishing the virtual service, applications, and runtime aliases to <span class="ph">API Gateway</span>. This lets you build an <span class="ph">API Gateway</span> runtime enforcement landscape in parallel to the existing <span class="ph">Mediator</span> landscape.</div><div id="wwID0EALW4" class="Body">To migrate the existing <span class="ph">Mediator</span> deployments, perform the following procedure:</div><div id="wwID0EQLW4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>For all installed Mediators:</div><div id="wwID0EIMW4" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Stop <span class="ph">Mediator</span>.</div><div id="wwID0E6MW4" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Install corresponding <span class="ph">API Gateway</span>.</div><div id="wwID0EWNW4" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Migrate <span class="ph">Mediator</span> configuration to <span class="ph">API Gateway</span>.</div><div id="wwID0ETOW4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>For all <span class="ph">Mediator</span> targets configured in <span class="ph">CentraSite</span>:</div><div id="wwID0ETPW4" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Configure a corresponding <span class="ph">API Gateway</span> in <span class="ph">CentraSite</span>.</div><div id="wwID0EOQW4" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Deploy all virtual services from the <span class="ph">Mediator</span> target to the corresponding <span class="ph">API Gateway</span>.</div><div id="wwID0EJRW4" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span><span class="emphasis">Optional.</span> Undeploy all virtual services from the <span class="ph">Mediator</span> target.</div><div id="wwID0EHSW4" class="Note"><span class="Bold">Note:<br /></span>The procedure assumes that the <span class="ph">Mediator</span>s and the corresponding <span class="ph">API Gateway</span> provide the same endpoints. Therefore either the <span class="ph">Mediator</span> or its corresponding <span class="ph">API Gateway</span> can be up and running. If the endpoint compatibility is not required it is not necessary to stop the <span class="ph">Mediator</span>s. Also undeploying the <span class="ph">Mediator</span> deployments is optional. This means <span class="ph">Mediator</span> and <span class="ph">API Gateway</span> can be driven by <span class="ph">CentraSite</span> in parallel.</div><div id="wwID0EPUW4" class="Section_Title">Migrating <span class="ph">Mediator</span> Configurations to <span class="ph">API Gateway</span></div><div id="wwID0E3UW4" class="Body">As the publishing of virtual services, applications, and runtime aliases to <span class="ph">API Gateway</span> is done through <span class="ph">CentraSite</span>, <span class="ph">CentraSite</span> is required for migrating <span class="ph">Mediator</span> to <span class="ph">API Gateway</span>.</div><div id="wwID0EWVW4" class="Body">To migrate existing <span class="ph">Mediator</span> configurations to <span class="ph">API Gateway</span>, perform the following procedure:</div><div id="wwID0EKWW4" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Run IS migration using the IS migration tool.</div><div id="wwID0E4WW4" class="Numbered_1_Continued">For details of the IS migration tool, see <span class="ph"> </span><span class="ph_002c_Citation">Upgrading Software AG Products On Premises</span>.</div><div id="wwID0EOXW4" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Run <span class="ph">Mediator</span> migration using the <span class="ph">API Gateway</span> migration tool.</div><div id="wwID0EJYW4" class="Numbered_1_Continued">The <span class="ph">API Gateway</span> migration tool is available within the IS instance running the <span class="ph">API Gateway</span>. If <span class="ph">API Gateway</span> is running in the default IS instance the tool is available in the folder: <span class="codeph_002c_codeph_002c_varname">Install_Dir</span><span class="codeph_002c_codeph">/IntegrationServer/instances/default/packages/WmAPIGateway/bin/migrate</span><span class="codeph">.</span></div><div id="wwID0ELZW4" class="Numbered_1_Continued">The script migrateFromMediator.sh has two parameters:</div><div id="wwID0EWZW4" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Full path to Integration service installation running the <span class="ph">Mediator</span> to be migrated. (for example, E:/SoftwareAG/IntegrationServer)</div><div id="wwID0EN1W4" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Name of the instance that is running the <span class="ph">Mediator</span> (for example, default)</div><div id="wwID0EF2W4" class="Numbered_1_Continued">On Unix the script can be invoked as follows:</div><div id="wwID0EK2W4" class="Preformatted_1">./migrateFromMediator.sh /opt/softwareag/IntegrationServer default</div><div id="wwID0ER2W4" class="Numbered_1_Continued">On Windows the script can be invoked as follows:</div><div id="wwID0EW2W4" class="Preformatted_1">migrateFromMediator.bat C:\SoftwareAG\IntegrationServer default</div><div id="wwID0E52W4" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Start <span class="ph">API Gateway</span>.</div><div id="wwID0EW3W4" class="Body">The <span class="ph">Mediator</span> configuration migration covers the following configuration items:</div><div id="wwID0EG4W4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Elasticsearch</div><div id="wwID0EZ4W4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>SNMP</div><div id="wwID0EM5W4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Email</div><div id="wwID0E65W4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>HTTP Configuration</div><div id="wwID0ES6W4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Keystore Configuration</div><div id="wwID0EFAX4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Ports Configuration</div><div id="wwID0EYAX4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Service Fault</div><div id="wwID0ELBX4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Extended Settings</div><div id="wwID0E6BX4" class="Body">The following configuration items are not automatically migrated. The configuration of these items have to be done manually in <span class="ph">API Gateway</span>.</div><div id="wwID0EPCX4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Security Token Service (STS) Configuration</div><div id="wwID0ECDX4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="parmname">apig_rest_service_redirect</span> parameter: When you set this to <span class="userinput">true</span>, the apig_rest_service_redirect in the extended Administration setting in <span class="ph">API Gateway</span> REST requests against the /mediator directive will be redirected to the /gateway directive. This means that REST requests can be sent to /mediator and to /gateway.</div><div id="wwID0ECEX4" class="Note"><span class="Bold">Note:</span>&nbsp;</div><div id="wwID0E3EX4" class="List_1_-_Note"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>The <span class="ph">Mediator</span> configuration migration can only be applied to a fresh <span class="ph">API Gateway</span> installation once.</div><div id="wwID0EXFX4" class="List_1_-_Note_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>On migrating from <span class="ph">Mediator</span> to <span class="ph">API Gateway</span>, <span class="ph">API Gateway</span> does not modify or change anything that is part of the incoming request. The incoming request along with the query parameters or headers is forwarded to the native service as it is without any modification. If you require <span class="ph">API Gateway</span> to remove any invalid query parameters, in <span class="ph">API Gateway</span> UI, add webMethods IS service under <span class="uicontrol">Request transformation policy</span> &gt; <span class="uicontrol">Advanced Transformation</span>, configure any flow service and select <span class="uicontrol">Comply to IS spec</span>.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>