<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>How do I transform a request using Request Transformation Policy?</title><link rel="Prev" href="co-transformation_policy.html" title="Previous" /><link rel="Next" href="gtw_transformation_request_2.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/ta-request_transformation_use_case.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN8LDcQ_002bS0kEW4_002bYLkd00hUg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/ta-request_transformation_use_case.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.503.html#wwconnect_header">Using API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.535.html#wwconnect_header">Implement APIs</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_manage_policies.html#wwconnect_header">Policies</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/co-transformation_policy.html#wwconnect_header">Request and Response Transformation Policies</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">How do I transform a request using Request Transformation Policy?</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EVZL1" class="Heading_4">How do I transform a request using Request Transformation Policy?</div><div id="wwID0EE1L1" class="Body">Use the Request Transformation policy to modify the contents of an incoming request such as headers, payload, query parameters, path parameters, HTTP method using the configurations given by the API Provider.</div><div id="wwID0EJ1L1" class="Body">The request transformation workflow is as follows:</div><div id="wwID0EU1L1" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>The API Provider configures the Request Transformation policy in the Request Processing stage of <span class="ph">API Gateway</span>. The API provider configures the details about when and how to transform the contents of an incoming request.</div><div id="wwID0EL2L1" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>The client sends the request to <span class="ph">API Gateway</span>.</div><div id="wwID0EC3L1" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span><span class="ph">API Gateway</span> applies the transformations configured by the API Provider and transforms the incoming request.</div><div id="wwID0EZ3L1" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span><span class="ph">API Gateway</span> sends the transformed request to the native API.</div><div id="wwID0EQ4L1" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>Native API processes the transformed request and sends the response to <span class="ph">API Gateway</span>.</div><div id="wwID0EH5L1" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span><span class="ph">API Gateway</span> forwards the response to the client.</div><div class="ww_skin_page_overflow"><div id="wwID0E4ZL1-6" class="Context"><img class="Default" src="../yai-webhelp/images/request_transformation_workflow.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 255px; max-width: 576px; top: 0pt" alt="" /></div></div><div id="wwID0EJ6L1" class="Body">Consider a scenario where you have a legacy REST API (employeeApi) that does not adhere to the REST API standards. For example, it accepts functional information such as employee name through a header <span class="codeph">employeeName</span> instead of accepting them through query or path parameters and you want to modify the API to REST standards.</div><div id="wwID0ET6L1" class="procedure"><span><img src="icon_task_xpe.png" alt="*" border="0" width="20" height="13" /></span>To configure request transformation policy:</div><div id="wwID0E66L1" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span><span class="Command">Click </span><span class="Command_002c_uicontrol">APIs</span><span class="Command"> in the title navigation bar. </span></div><div id="wwID0E5AM1" class="Step_Result_1">A list of available APIs appears.</div><div id="wwID0EEBM1" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span><span class="Command">Select a Rest API from the list of APIs and click </span><span class="Command_002c_uicontrol">Edit</span><span class="Command">. </span></div><div id="wwID0EDCM1" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span><span class="Command">Select </span><span class="Command_002c_uicontrol">Policies &gt; Request Processing &gt; Request Transformation</span><span class="Command">. </span></div><div id="wwID0ECDM1" class="Step_Result_1">The Request Transformation details page appears.</div><div id="wwID0EIDM1" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span><span class="Command"> In the </span><span class="Command_002c_uicontrol">Condition</span><span class="Command"> section, select </span><span class="Command_002c_uicontrol">OR</span><span class="Command">. </span></div><div id="wwID0ESEM1" class="Body_1">The configured transformation is applied when at least one of the conditions is satisfied.</div><div id="wwID0EXEM1" class="Note_1"><span class="Bold">Note:<br /></span>The condition can also be set to AND operator. The configured transformation is applied only when all the set conditions are satisfied.</div><div id="wwID0EPFM1" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span><span class="Command"> Click </span><span class="Command_002c_uicontrol">Add Condition</span><span class="Command"> to configure the conditions to evaluate the contents on the request. </span></div><div id="wwID0ETGM1" class="Substep_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span><span class="Command">Specify the </span><span class="Command_002c_uicontrol">Variable</span><span class="Command">. Example, Content-Type. </span></div><div id="wwID0ESHM1" class="Substep_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span><span class="Command"> Specify the </span><span class="Command_002c_uicontrol">Operator</span><span class="Command"> to use to relate variable and the value provided. Example, </span><span class="Command_002c_uicontrol">Equals</span><span class="Command">. </span></div><div id="wwID0EXIM1" class="Substep_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span><span class="Command"> Specify the </span><span class="Command_002c_uicontrol">Value</span><span class="Command">. Example, application/json. </span></div><div id="wwID0E2JM1" class="Body_2">When you select the operator - <span class="uicontrol">Equals</span>, the Condition checks if the <span class="uicontrol">Variable</span>: Content-Type is equal to the <span class="uicontrol">Value</span>: application/json.</div><div id="wwID0EPKM1" class="Substep_2"><span class="WebWorks_Number" style="width: 18pt"><span>d. </span></span><span class="Command">Click </span><span class="Command_002c_uicontrol">Add</span><span class="Command">. </span></div><div id="wwID0EQLM1" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span><span class="Command"> Select </span><span class="Command_002c_uicontrol">Transformation Configuration &gt; Header/Query/Path transformation</span><span class="Command">. </span></div><div id="wwID0EPMM1" class="Step_Result_1">The Header/Query/Path transformation details page appears.</div><div id="wwID0EVMM1" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>7. </span></span><span class="Command"> In </span><span class="Command_002c_uicontrol">Add/Modify</span><span class="Command"> section, add the variable and set its value. </span></div><div id="wwID0EZNM1" class="Body_1">Here, native API accepts employee name through header <span class="codeph">${request.headers.employeeName}</span> and you want the native API to accept these values through the query parameter <span class="codeph">${request.query.name}</span> and expose this change to the client without exposing the query parameter.</div><div id="wwID0EHOM1" class="Body_1">To achieve this, set the variable and the value parameters as follows:</div><div id="wwID0ETOM1" class="Substep_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span><span class="Command_002c_uicontrol">Variable</span><span class="Command">: </span><span class="Command_002c_codeph">${request.headers.employeeName}</span><span class="Command"> </span></div><div id="wwID0EXPM1" class="Substep_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span><span class="Command_002c_uicontrol">Value</span><span class="Command">: </span><span class="Command_002c_codeph">${request.query.name}</span><span class="Command"> </span></div><div id="wwID0E2QM1" class="Substep_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span><span class="Command">Click </span><span class="Command_002c_uicontrol">Add</span><span class="Command">. </span></div><div id="wwID0E6RM1" class="Note_2"><span class="Bold">Note:<br /></span>For details about the variables available in <span class="ph">API Gateway</span>, see 
    <a href="../yai-webhelp/co-variable_extraction.html#wwID0E1BA1"
   
     title="Variable Framework"
    ><span class="heading-page">Variables Available in API Gateway</span></a>.</div><div id="wwID0EITM1" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>8. </span></span><span class="Command"> In the </span><span class="Command_002c_uicontrol">Remove</span><span class="Command"> section, add </span><span class="Command_002c_codeph">${request.query.name}</span><span class="Command"> to remove the query parameter from the request so that it does not reach the native API. </span></div><div id="wwID0ENUM1" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>9. </span></span><span class="Command">Click </span><span class="Command_002c_uicontrol">Save</span><span class="Command">. </span></div><div id="wwID0ENVM1" class="Result">This request transformation policy configuration allows the native API to accept the header values through query parameters. The native API accepts the header values through the query parameters by transforming the query parameters to header parameters and then removing the query parameter from the incoming request.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>