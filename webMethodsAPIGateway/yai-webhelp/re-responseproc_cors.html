<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>CORS</title><link rel="Prev" href="re-responseproc_data_masking.html" title="Previous" /><link rel="Next" href="gtw_error_handling.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/re-responseproc_cors.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pCwkbmvRPaHD6f2k71mnSHg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/re-responseproc_cors.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.503.html#wwconnect_header">Using API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.535.html#wwconnect_header">Implement APIs</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_manage_policies.html#wwconnect_header">Policies</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_payload_response.html#wwconnect_header">Response Processing</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">CORS</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EFLZZ" class="Heading_4">CORS</div><div id="wwID0ESLZZ" class="Body">The Cross-Origin Resource Sharing (CORS) mechanism supports secure cross-domain requests and data transfers between browsers and web servers. The CORS standard works by adding new HTTP headers that allow servers to describe the set of origins that are permitted to read that information.</div><div id="wwID0EXLZZ" class="Body">This policy provides CORS support that uses additional HTTP headers to let a client or an application gain permission to access selected resources. An application or a client makes a cross-origin HTTP request when it requests a resource from a different domain, protocol, or port than the one from which the current request originated.</div><div id="wwID0E3LZZ" class="Body">If you want to apply this policy in <span class="ph">API Gateway</span> at API level, make sure you have set the <span class="emphasis">watt.server.cors.enabled</span> property to <span class="emphasis">false</span>.</div><div id="wwID0EQMZZ" class="Note"><span class="Bold">Note:<br /></span>Both the <span class="ph">Integration Server</span> CORS policy and <span class="ph">API Gateway</span> CORS policy cannot coexist. When you enforce the CORS policy at <span class="ph">Integration Server</span> level, CORS enforcment is done for all requests. The preflight requests are handled by the <span class="ph">Integration Server</span> before even it reaches <span class="ph">API Gateway</span>.</div><div id="wwID0E1NZZ" class="Body">This policy is applicable for REST, SOAP, and ODATA APIs.</div><div id="wwID0E6NZZ" class="Body">The table lists the CORS response specifications, you can specify for this policy:</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 25.1%"><div id="wwID0E3OZZ" class="Table_Cell_Head">Property</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 74.8%"><div id="wwID0ECPZZ" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EPPZZ" class="Table_Cell"><span class="uicontrol">Allowed Origins</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZPZZ" class="Table_Cell">Specifies the origin from which the responses originating are allowed.</div><div id="wwID0E6PZZ" class="Table_Cell">syntax for the origin: <span class="varname">scheme</span>://<span class="varname">host</span>:<span class="varname">port</span></div><div class="ww_skin_page_overflow"><div id="wwID0EUQZZ" class="Table_Cell">You can add multiple origins by clicking <img class="Default" src="../yai-webhelp/images/add.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 16px; max-width: 28px; top: 0pt" alt="" />.</div></div><div id="wwID0EBRZZ" class="Table_Cell">You can also provide Regular expressions for allowed origins.</div><div id="wwID0EGRZZ" class="Table_Cell">Allowed origins can also be specified in the Advanced section under Applications. Allowed origins of applications registered with this API are also allowed to access this API.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EQRZZ" class="Table_Cell"><span class="uicontrol">Allow Headers</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E1RZZ" class="Table_Cell">Specifies the Headers that are allowed in the request.</div><div class="ww_skin_page_overflow"><div id="wwID0EASZZ" class="Table_Cell">You can add multiple headers that are to be allowed by clicking <img class="Default" src="../yai-webhelp/images/add.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 16px; max-width: 28px; top: 0pt" alt="" />.</div></div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ESSZZ" class="Table_Cell"><span class="uicontrol">Expose Headers</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E3SZZ" class="Table_Cell">Specifies the headers that be exposed to the user on request failure.</div><div class="ww_skin_page_overflow"><div id="wwID0ECTZZ" class="Table_Cell">You can add multiple headers that are to be allowed by clicking <img class="Default" src="../yai-webhelp/images/add.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 16px; max-width: 28px; top: 0pt" alt="" />.</div></div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUTZZ" class="Table_Cell"><span class="uicontrol">Allow Credentials</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5TZZ" class="Table_Cell">Specifies whether <span class="ph">API Gateway</span> includes the Access-Control-Allow-Credentials header.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ENUZZ" class="Table_Cell"><span class="uicontrol">Allowed Methods</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EXUZZ" class="Table_Cell">Specifies the methods that are allowed in the request.</div><div id="wwID0E4UZZ" class="Table_Cell">Specify one or more of the following: <span class="uicontrol">GET</span>, <span class="uicontrol">POST</span>, <span class="uicontrol">PUT</span>, <span class="uicontrol">DELETE</span>, and <span class="uicontrol">PATCH</span>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E3VZZ" class="Table_Cell"><span class="uicontrol">Max Age</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGWZZ" class="Table_Cell">Specifies the age for which the preflight response is valid.</div></td></tr></table></div><div id="wwID0ERWZZ" class="Body">A corresponding HTTP header is set for all the values above as per the specification. For additional information, see 
    <a href="https://www.w3.org/TR/cors/"
   
     target="external_window"
    ><span class="heading-page">https://www.w3.org/TR/cors/</span></a>.</div><div id="wwID0EBXZZ" class="Body"><span class="ph">API Gateway</span> handles CORS preflight request and CORS request differently. To know more about the work flow of CORS preflight and CORS request refer the respective flowchart.</div><div id="wwID0ELXZZ" class="Body"><span class="inlinetitle">CORS Preflight Request</span></div><div id="wwID0EVXZZ" class="Body">A CORS preflight request is a HTTP request that a browser sends before the original CORS request to check whether the <span class="ph">API Gateway</span> server will permit the actual CORS request. CORS preflight request uses OPTIONS method and includes these headers as part of the request sent from the browser to <span class="ph">API Gateway</span>:</div><div id="wwID0EGYZZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Origin</div><div id="wwID0EXYZZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Access-Control-Request-Method</div><div id="wwID0EIZZZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Access-Control-Request-Headers</div><div id="wwID0E2ZZZ" class="Body">The following flow chart explains the flow of the CORS preflight request received in <span class="ph">API Gateway</span>:</div><div class="ww_skin_page_overflow"><div id="wwID0EF1ZZ" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/cors_prefilght.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 839px; max-width: 700px; top: 0pt" alt="" /></div></div><div id="wwID0EU1ZZ" class="Body">The following table shows the various use cases of the CORS preflight request originating from browser and how <span class="ph">API Gateway</span> responds to each CORS preflight requests:</div><div class="ww_skin_page_overflow"><table class="rules2" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 3.5%"><div id="wwID0EC3ZZ" class="Table_Cell_Head">#</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 32.2%"><div id="wwID0EI3ZZ" class="Table_Cell_Head">CORS Preflight request headers from browser</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 35.9%"><div id="wwID0EO3ZZ" class="Table_Cell_Head">Configured CORS Policy in <span class="ph">API Gateway</span></div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 28.2%"><div id="wwID0EZ3ZZ" class="Table_Cell_Head"><span class="ph">API Gateway</span> sends the respective response to browser</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EK4ZZ" class="Table_Cell">1</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EW4ZZ" class="Table_Cell">Origin: <span class="inlinetitle">http://test.com</span></div><div id="wwID0EB5ZZ" class="Table_Cell">Access-Control-Request-Method : POST</div><div id="wwID0EG5ZZ" class="Table_Cell">Access-Control-Request-Headers : test1,test2</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ES5ZZ" class="Table_Cell">Access-Control-Allow-Origin : <span class="inlinetitle">http://test2.com</span></div><div id="wwID0E45ZZ" class="Table_Cell">Access-Control-Allow-Methods : POST,GET,PUT</div><div id="wwID0EC6ZZ" class="Table_Cell">Access-Control-Allow-Headers : test1,test2</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EI6ZZ" class="Table_Cell">Sends <span class="inlinetitle">403 Specified Origin is not allowed</span> status, as the Origin header (http://test.com) from the browser does not match with the Access-Control-Allow-Origin (http://test2.com) configured in the CORS policy.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EY6ZZ" class="Table_Cell">2</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EEA1Z" class="Table_Cell">Origin: http://test2.com</div><div id="wwID0EJA1Z" class="Table_Cell">Access-Control-Request-Method : <span class="inlinetitle">DELETE</span></div><div id="wwID0EUA1Z" class="Table_Cell">Access-Control-Request-Headers : test1,test2</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EAB1Z" class="Table_Cell">Access-Control-Allow-Origin : http://test2.com</div><div id="wwID0EFB1Z" class="Table_Cell">Access-Control-Allow-Methods : <span class="inlinetitle">POST,GET,PUT</span></div><div id="wwID0EQB1Z" class="Table_Cell">Access-Control-Allow-Headers : test1,test2</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EWB1Z" class="Table_Cell">Sends <span class="inlinetitle">405 Method Not Allowed</span> status, as the Access-Control-Request-Method header (DELETE) from the browser does not match with the Access-Control-Allow-Methods (POST,GET,PUT) configured in the CORS policy.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGC1Z" class="Table_Cell">3</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ESC1Z" class="Table_Cell">Origin: http://test2.com</div><div id="wwID0EXC1Z" class="Table_Cell">Access-Control-Request-Method : POST</div><div id="wwID0E3C1Z" class="Table_Cell">Access-Control-Request-Headers : <span class="inlinetitle">test3</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EOD1Z" class="Table_Cell">Access-Control-Allow-Origin : http://test2.com</div><div id="wwID0ETD1Z" class="Table_Cell">Access-Control-Allow-Methods : POST,GET,PUT</div><div id="wwID0EYD1Z" class="Table_Cell">Access-Control-Allow-Headers : <span class="inlinetitle">test1,test2</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EEE1Z" class="Table_Cell">Sends <span class="inlinetitle">403 Header Not Supported</span>, as the Access-Control-Request-Headers header (test3) from the browser does not match with the Access-Control-Allow-Headers (test1,test2) configured in the CORS policy.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUE1Z" class="Table_Cell">4</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EAF1Z" class="Table_Cell">Origin: <span class="inlinetitle">http://test2.com</span></div><div id="wwID0ELF1Z" class="Table_Cell">Access-Control-Request-Method : <span class="inlinetitle">POST</span></div><div id="wwID0EWF1Z" class="Table_Cell">Access-Control-Request-Headers : <span class="inlinetitle">test1</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EIG1Z" class="Table_Cell">Access-Control-Allow-Origin : <span class="inlinetitle">http://test2.com</span></div><div id="wwID0ETG1Z" class="Table_Cell">Access-Control-Allow-Methods : <span class="inlinetitle">POST</span></div><div id="wwID0E5G1Z" class="Table_Cell">Access-Control-Allow-Headers : <span class="inlinetitle">test1</span>, test2</div><div id="wwID0EJH1Z" class="Table_Cell">Access-Control-Max-Age: 100</div><div id="wwID0EOH1Z" class="Table_Cell">Access-Control-Allow-Credentials : true</div><div id="wwID0ETH1Z" class="Table_Cell">Access-Control-Expose-Headers : header1,header2</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZH1Z" class="Table_Cell">Sends <span class="inlinetitle">200 OK</span> status with the following headers:</div><div id="wwID0EII1Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Origin : http://test2.com</div><div id="wwID0EZI1Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Methods : POST,GET,PUT</div><div id="wwID0EKJ1Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Headers : test1,test2</div><div id="wwID0E2J1Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Max-Age: 100</div><div id="wwID0ENK1Z" class="Table_Cell">Since the origin, methods, and headers from the browser matches with configured CORS policy in <span class="ph">API Gateway</span>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E3K1Z" class="Table_Cell">5</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EIL1Z" class="Table_Cell">Origin: <span class="inlinetitle">http://test2.com</span></div><div id="wwID0ETL1Z" class="Table_Cell">Access-Control-Request-Method : <span class="inlinetitle">POST</span></div><div id="wwID0E5L1Z" class="Table_Cell">Access-Control-Request-Headers : <span class="inlinetitle">test1</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EQM1Z" class="Table_Cell">Access-Control-Allow-Origin : <span class="inlinetitle">http://test1.com</span></div><div id="wwID0E2M1Z" class="Table_Cell">Access-Control-Allow-Methods : <span class="inlinetitle">POST</span></div><div id="wwID0EGN1Z" class="Table_Cell">Access-Control-Allow-Headers : <span class="inlinetitle">test1</span>, test2</div><div id="wwID0ERN1Z" class="Table_Cell">Access-Control-Max-Age: 100</div><div id="wwID0EWN1Z" class="Table_Cell">Access-Control-Allow-Credentials : true</div><div id="wwID0E2N1Z" class="Table_Cell">Access-Control-Expose-Headers : header1,header2</div><div id="wwID0EAO1Z" class="Table_Cell">In addition, if you have specified the Javascript origins in the application as <span class="inlinetitle">http://test2.com</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EMO1Z" class="Table_Cell">Sends <span class="inlinetitle">200 OK</span> status with the following headers:</div><div id="wwID0E2O1Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Origin : http://test2.com</div><div id="wwID0EMP1Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Methods : POST,GET,PUT</div><div id="wwID0E4P1Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Headers : test1,test2</div><div id="wwID0EOQ1Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Max-Age: 100</div><div id="wwID0EAR1Z" class="Table_Cell">Even though the origin header from the browser does not match with configured CORS policy, it matches with the configured javascript origins in the application.</div></td></tr></table></div><div id="wwID0EKR1Z" class="Body"><span class="inlinetitle">CORS Request</span></div><div id="wwID0EUR1Z" class="Body">A CORS request is a HTTP request that includes an <span class="emphasis">Origin</span> header. When API Gateway receives the CORS request, the <span class="emphasis">Origin</span> header in the CORS request is verified against the <span class="emphasis">Access-Control-Allow-Origin</span> configured in the CORS policy, if it matches then <span class="ph">API Gateway</span> allows to access the resources.</div><div id="wwID0ENS1Z" class="Body">The following flow chart explains the flow of the CORS request received in <span class="ph">API Gateway</span>:</div><div class="ww_skin_page_overflow"><div id="wwID0EXS1Z" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/cors_request.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 671px; max-width: 1051px; top: 0pt" alt="" /></div></div><div id="wwID0EFT1Z" class="Body">The following table shows the various use cases of the CORS request originating from browser and how <span class="ph">API Gateway</span> responds to each CORS requests:</div><div class="ww_skin_page_overflow"><table class="rules2" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 3.5%"><div id="wwID0ETU1Z" class="Table_Cell_Head">#</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 27.9%"><div id="wwID0EZU1Z" class="Table_Cell_Head">CORS Request headers from browser</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 35.1%"><div id="wwID0E6U1Z" class="Table_Cell_Head">Configured CORS Policy in <span class="ph">API Gateway</span></div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 33.3%"><div id="wwID0EKV1Z" class="Table_Cell_Head"><span class="ph">API Gateway</span> sends the respective response to browser</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2V1Z" class="Table_Cell">1</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHW1Z" class="Table_Cell">Origin: <span class="inlinetitle">http://test.com</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZW1Z" class="Table_Cell">Access-Control-Allow-Origin : <span class="inlinetitle">http://test2.com</span></div><div id="wwID0EEX1Z" class="Table_Cell">Access-Control-Allow-Methods : POST,GET,PUT</div><div id="wwID0EJX1Z" class="Table_Cell">Access-Control-Allow-Headers : test1,test2</div><div id="wwID0EOX1Z" class="Table_Cell">Access-Control-Max-Age: 100</div><div id="wwID0ETX1Z" class="Table_Cell">Access-Control-Allow-Credentials : true</div><div id="wwID0EYX1Z" class="Table_Cell">Access-Control-Expose-Headers : header1,header2</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5X1Z" class="Table_Cell">Sends <span class="inlinetitle">403 Specified Origin is not allowed</span> status, as the Origin header (http://test.com) from the browser does not match with the Access-Control-Allow-Origin (http://test2.com) configured in the CORS policy.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EOY1Z" class="Table_Cell">2</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E1Y1Z" class="Table_Cell">Origin: <span class="inlinetitle">http://test2.com</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EMZ1Z" class="Table_Cell">Access-Control-Allow-Origin : <span class="inlinetitle">http://test2.com</span></div><div id="wwID0EXZ1Z" class="Table_Cell">Access-Control-Allow-Methods : POST,GET,PUT</div><div id="wwID0E3Z1Z" class="Table_Cell">Access-Control-Allow-Headers : test1,test2</div><div id="wwID0EB11Z" class="Table_Cell">Access-Control-Max-Age: 100</div><div id="wwID0EG11Z" class="Table_Cell">Access-Control-Allow-Credentials : true</div><div id="wwID0EL11Z" class="Table_Cell">Access-Control-Expose-Headers : header1,header2</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ER11Z" class="Table_Cell">Sends <span class="inlinetitle">200 OK</span> status with the following headers:</div><div id="wwID0ER21Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Origin :</div><div id="wwID0ED31Z" class="List_1_Continued">http://test2.com</div><div id="wwID0EJ31Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Credentials : true</div><div id="wwID0E131Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Expose-Headers : header1,header2</div><div id="wwID0EL41Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Credentials : true</div><div id="wwID0E441Z" class="Table_Cell">Since the Origin header (http://test2.com) from the browser matches with the Access-Control-Allow-Origin (http://test2.com) configured CORS policy in <span class="ph">API Gateway</span>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EM51Z" class="Table_Cell">3</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EY51Z" class="Table_Cell">Origin: <span class="inlinetitle">http://test2.com</span></div><div id="wwID0ED61Z" class="Table_Cell">Access-Control-Request-Method : <span class="inlinetitle">POST</span></div><div id="wwID0EO61Z" class="Table_Cell">Access-Control-Request-Headers : <span class="inlinetitle">test1</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EAA2Z" class="Table_Cell">Access-Control-Allow-Origin : <span class="inlinetitle">http://test1.com</span></div><div id="wwID0ELA2Z" class="Table_Cell">Access-Control-Allow-Methods : <span class="inlinetitle">POST</span></div><div id="wwID0EWA2Z" class="Table_Cell">Access-Control-Allow-Headers : <span class="inlinetitle">test1</span>, test2</div><div id="wwID0EBB2Z" class="Table_Cell">Access-Control-Max-Age: 100</div><div id="wwID0EGB2Z" class="Table_Cell">Access-Control-Allow-Credentials : true</div><div id="wwID0ELB2Z" class="Table_Cell">Access-Control-Expose-Headers : header1,header2</div><div id="wwID0EQB2Z" class="Table_Cell">In addition, if you have specified the Javascript origins in the application as <span class="inlinetitle">http://test2.com</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E3B2Z" class="Table_Cell">Sends <span class="inlinetitle">200 OK</span> status with the following headers:</div><div id="wwID0ELC2Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Origin : http://test2.com</div><div id="wwID0E3C2Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Methods : POST,GET,PUT</div><div id="wwID0END2Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Headers : test1,test2</div><div id="wwID0E5D2Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Max-Age: 100</div><div id="wwID0EPE2Z" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Access-Control-Allow-Credentials : true</div><div id="wwID0EBF2Z" class="Table_Cell">Even though the origin header from the browser does not match with configured CORS policy, it matches with the configured javascript origins in the application.</div></td></tr></table></div><div id="wwID0ELF2Z" class="Note"><span class="Bold">Note:</span>&nbsp;</div><div id="wwID0EDG2Z" class="List_1_-_Note"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If native service supports CORS mechanism and if you have not configured the CORS policy in <span class="ph">API Gateway</span>, then <span class="ph">API Gateway</span> goes to pass-through security mode and forwards the CORS request to the native service.</div><div id="wwID0E3G2Z" class="List_1_-_Note_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If native service supports CORS mechanism and if you have also configured the CORS policy in <span class="ph">API Gateway</span>, then <span class="ph">API Gateway</span> takes precedence in handling the CORS request.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>