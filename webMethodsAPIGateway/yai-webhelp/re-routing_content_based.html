<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Content-based Routing</title><link rel="Prev" href="re-routing_outboundauth_transport.html" title="Previous" /><link rel="Next" href="re-routing_context_based.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/re-routing_content_based.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN64K9eL0haO9bi7RJWtUn0Q" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/re-routing_content_based.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.503.html#wwconnect_header">Using API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.535.html#wwconnect_header">Implement APIs</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_manage_policies.html#wwconnect_header">Policies</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_routing_policies.html#wwconnect_header">Routing</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Content-based Routing</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EJL4Y" class="Heading_4">Content-based Routing</div><div id="wwID0EYL4Y" class="Body">If you have a native API that is hosted at two or more endpoints, you can use the content-based routing protocol to route specific types of messages to specific endpoints. You can route messages to different endpoints based on specific values that appear in the request message. You might use this capability, for example, to determine which operation the consuming application has requested, and route requests for complex operations to an endpoint on a fast machine. For example, if your entry protocol is HTTP or HTTPS, you can select the Content-based routing. The requests are routed according to the content-based routing rules you create. You may specify how to authenticate requests.</div><div id="wwID0ECM4Y" class="Note"><span class="Bold">Note:<br /></span>As the content-based routing policy's capabilities can also be configured using conditional routing policy, the content-based routing policy will be deprecated in future releases and the configurations will be migrated to conditional routing policy. Hence, <span class="ph">Software&nbsp;AG</span> recommends to use conditional routing policy over content-based routing policy.</div><div id="wwID0E4M4Y" class="Body">The table lists the properties that you can specify for this policy:</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 30.7%"><div id="wwID0E3N4Y" class="Table_Cell_Head">Property</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 69.2%"><div id="wwID0ECO4Y" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0EPO4Y" class="Table_Cell"><span class="uicontrol">Default Route To</span>: Specifies the URLs of two or more native services in a pool to which the requests are routed.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E6O4Y" class="Table_Cell"><span class="uicontrol">Endpoint URI</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EJP4Y" class="Table_Cell">Specifies the URI of the native API endpoint to route the request to in case all routing rules evaluate to False. Service registries that have been added to the API Gateway instance are also included in the list.</div><div id="wwID0EPP4Y" class="Table_Cell">If you choose a service registry, API Gateway sends a request to the service registry to discover the IP address and port at which the native service is running. API Gateway replaces the service registry alias in the <span class="uicontrol">Endpoint URI</span> with the IP address and port returned by the service registry.</div><div id="wwID0EZP4Y" class="Table_Cell">For example, if your service is hosted at the URL: <span class="codeph">http://host:port/abc/</span>, you need to configure the Endpoint URI as: <span class="codeph">http://${ServiceRegistryName}/abc/</span>.</div><div id="wwID0EHQ4Y" class="Table_Cell">As this property supports variable framework, you can make use of the available variables. For example, you can configure the endpoint URI using hard coded URL, simple alias, endpoint alias, and variable syntax or any of these combination. If you define the endpoint URI as <span class="codeph">http://${myAliasHost}:${request.headers.nativeport}/${sys:resource-path}</span>, where the <span class="codeph">${myAliasHost}</span> variable syntax is used to define the simple alias and the <span class="codeph">${request.headers.nativeport}</span> variable syntax is used to define the native port based on the request.</div><div id="wwID0EZQ4Y" class="Table_Cell">For details about the variables available in <span class="ph">API Gateway</span>, see 
    <a href="../yai-webhelp/co-variable_extraction.html#wwID0E1BA1"
   
     title="Variable Framework"
    ><span class="heading-page">Variables Available in API Gateway</span></a>.</div><div id="wwID0EOR4Y" class="Note"><span class="Bold">Note:<br /></span>If you use endpoint alias, make sure the endpoint alias is created before you define it in the policy. For example, if you define ${alias} syntax in the policy before creating the <span class="userinput">alias</span> as endpoint alias, <span class="ph">API Gateway</span> considers ${alias} as custom variable or simple alias and tries to resolve against those. So in that case, after creating endpoint alias you have to edit and save the API or policy to associate ${alias} syntax with the endpoint alias.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ERS4Y" class="Table_Cell"><span class="uicontrol">HTTP Method</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2S4Y" class="Table_Cell">This is applicable for REST-based APIs.</div><div id="wwID0EBT4Y" class="Table_Cell">Specifies the available routing methods: <span class="uicontrol">GET</span>, <span class="uicontrol">POST</span>, <span class="uicontrol">PUT</span>, <span class="uicontrol">DELETE</span>, and <span class="uicontrol">CUSTOM</span> (default).</div><div id="wwID0E2T4Y" class="Table_Cell">When <span class="uicontrol">CUSTOM</span> is selected, the HTTP method in the incoming request is sent to the native service. When other methods are selected, the selected method is used in the request sent to the native service.</div><div id="wwID0EFU4Y" class="Note"><span class="Bold">Note:<br /></span><span class="ph">Software&nbsp;AG</span> recommends to use <span class="uicontrol">Request Transformation &gt; Method Transformation</span> to achieve this as other transformations can also be done under the same policy.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHV4Y" class="Table_Cell"><span class="uicontrol">SOAP Optimization Method</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ERV4Y" class="Table_Cell">This is applicable for SOAP-based APIs.</div><div id="wwID0EXV4Y" class="Table_Cell">Specifies the optimization methods that <span class="ph">API Gateway</span> can use to parse SOAP requests to the native API.</div><div id="wwID0EBW4Y" class="Table_Cell">Select one of the following options:</div><div id="wwID0EMW4Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">MTOM</span>. <span class="ph">API Gateway</span> uses the Message Transmission Optimization Mechanism (MTOM) to parse SOAP requests to the API.</div><div id="wwID0EGX4Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">SwA</span>. <span class="ph">API Gateway</span> uses the SOAP with Attachment (SwA) technique to parse SOAP requests to the API.</div><div id="wwID0EAY4Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">None</span>. <span class="ph">API Gateway</span> does not use any optimization method to parse the SOAP requests to the API. This is selected by default.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EAZ4Y" class="Table_Cell"><span class="uicontrol">HTTP Connection Timeout (seconds)</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ELZ4Y" class="Table_Cell">Specifies the time interval (in seconds) after which a connection attempt times out.</div><div id="wwID0ERZ4Y" class="Table_Cell">The precedence of the Connection Timeout configuration is as follows:</div><div id="wwID0E3Z4Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>If you specify a value for the <span class="uicontrol">Connection timeout</span> field in routing endpoint alias, then the <span class="uicontrol">Connection timeout</span> value specified in the Endpoint alias section takes precedence over the timeout values defined at the API level and the global level.</div><div id="wwID0EX14Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>If you specify a value 0 for the <span class="uicontrol">Connection timeout</span> field in routing endpoint alias, then <span class="ph">API Gateway</span> uses the value specified in the <span class="uicontrol">Connection timeout</span> field in the routing protocol processing step of an API. The Read Timeout value specified at an API level takes precedence over the global configuration.</div><div id="wwID0EW24Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>If you specify a value 0 or do not specify a value for the <span class="uicontrol">Connection timeout</span> field in the routing protocol processing step at the API level or specify a value 0 at an alias level, then <span class="ph">API Gateway</span> uses the value specified in this <span class="parmname">pg.endpoint.connectionTimeout</span> property.</div><div id="wwID0EW34Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>If you do not specify any value for <span class="parmname">pg.endpoint.connectionTimeout</span>, then <span class="ph">API Gateway</span> uses the default value of 30 seconds.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EY44Y" class="Table_Cell"><span class="uicontrol">Read Timeout (seconds) </span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ED54Y" class="Table_Cell">Specifies the time interval (in seconds) after which a socket read attempt times out.</div><div id="wwID0EJ54Y" class="Table_Cell">The precedence of the Read Timeout configuration is as follows:</div><div id="wwID0EU54Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>If you specify a value for the <span class="uicontrol">Read timeout</span> field in routing endpoint alias, then the <span class="uicontrol">Read timeout</span> value specified in the Endpoint alias section takes precedence over the timeout values defined at the API level and the global level.</div><div id="wwID0EP64Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>If you specify a value 0 for the <span class="uicontrol">Read timeout</span> field in routing endpoint alias, then <span class="ph">API Gateway</span> uses the value specified in the <span class="uicontrol">Read Timeout</span> field in the routing protocol processing step of an API. The Read Timeout value specified at an API level takes precedence over the global configuration.</div><div id="wwID0EOA5Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>If you specify a value 0 or do not specify a value for the <span class="uicontrol">Read timeout</span> field in the routing protocol processing step at the API level or specify a value 0 at an alias level, then <span class="ph">API Gateway</span> uses the value specified in this <span class="parmname">pg.endpoint.readTimeout</span> property.</div><div id="wwID0EOB5Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>If you do not specify any value for <span class="parmname">pg.endpoint.readTimeout</span>, then <span class="ph">API Gateway</span> uses the default value of 30 seconds.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EQC5Y" class="Table_Cell"><span class="uicontrol">Pass WS-Security Headers</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E1C5Y" class="Table_Cell">This is applicable for SOAP-based APIs.</div><div id="wwID0EAD5Y" class="Table_Cell">Selecting this indicates that <span class="ph">API Gateway</span> should pass the WS-Security headers of the incoming requests to the native API.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0EPD5Y" class="Table_Cell"><span class="uicontrol">SSL Configuration</span>. Configures keystore, key alias, and truststore for securing connections to native APIs.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E6D5Y" class="Table_Cell"><span class="uicontrol">Keystore Alias</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EKE5Y" class="Table_Cell">Specifies the keystore alias configured in <span class="ph">API Gateway</span>. This value (along with the value of Client Certificate Alias) is used for performing SSL client authentication.</div><div id="wwID0EUE5Y" class="Table_Cell">Lists all available keystores. If you have not configured any keystore, the list is empty.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5E5Y" class="Table_Cell"><span class="uicontrol">Key Alias</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EJF5Y" class="Table_Cell">Specifies the alias for the private key, which must be stored in the keystore specified by the keystore alias.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ETF5Y" class="Table_Cell"><span class="uicontrol">Truststore Alias</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E4F5Y" class="Table_Cell">Specifies the alias for the truststore that contains the list of CA certificates that API Gateway uses to validate the trust relationship with the native API.</div><div id="wwID0EDG5Y" class="Table_Cell">If you do not configure any truststore alias, it implies that <span class="ph">API Gateway</span> does not validate the certificates provided by native APIs.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0ESG5Y" class="Table_Cell"><span class="uicontrol">Service Registry Configuration</span></div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ECH5Y" class="Table_Cell"><span class="uicontrol">Service Discovery Endpoint Parameter</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EMH5Y" class="Table_Cell">Values required for constructing the discovery service URI.</div><div id="wwID0EYH5Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Parameter</span>: An alias that you have included in the discovery service URI while adding the service registry to API Gateway.</div><div id="wwID0EPI5Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Value</span>: Specifies a value for the path parameter. The alias specified in Path Parameter is substituted with this value when invoking the discovery service.</div><div id="wwID0EHJ5Y" class="Table_Cell">For example: if the service registry configuration of the service registry that you have selected in <span class="uicontrol">Endpoint URI</span> has <span class="uicontrol">Service discovery path</span> set to <span class="userinput">/catalog/service/{serviceName}</span> (and the <span class="userinput">{serviceName}</span> alias is intended for passing the service name), you must enter <span class="userinput">{serviceName}</span> as <span class="uicontrol">Parameter</span> and the name of the service as <span class="uicontrol">Value</span>.</div><div id="wwID0EJK5Y" class="Table_Cell">As the <span class="uicontrol">Value</span> field supports variable framework, you can make use of the available variables as path parameters.</div><div id="wwID0ETK5Y" class="Table_Cell">For example, if you provide a parameter as <span class="userinput">{serviceName}</span>( in <span class="uicontrol">Service discovery path</span> while you define a service registry) and the corresponding values for the path parameter as <span class="codeph">${request.header.var1}</span>, the value in <span class="userinput">var1</span> retrieved from the request header substitutes the service name.</div><div id="wwID0EJL5Y" class="Table_Cell">For details about the variables available in <span class="ph">API Gateway</span>, see 
    <a href="../yai-webhelp/co-variable_extraction.html#wwID0E1BA1"
   
     title="Variable Framework"
    ><span class="heading-page">Variables Available in API Gateway</span></a>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0EDM5Y" class="Table_Cell"><span class="uicontrol">Rule</span>: Defines the routing decisions based on one of the following routing options. Click <span class="uicontrol">Add Rule</span> and provide the following information.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EXM5Y" class="Table_Cell"><span class="uicontrol">Payload Identifier</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ECN5Y" class="Table_Cell">Specifies using the payload identifier to identify the client, extract the custom authentication credentials supplied in the request represented using the payload identifier, and verify the client's identity.</div><div id="wwID0EIN5Y" class="Table_Cell">In the Payload identifier section, click <span class="uicontrol">Add payload identifier</span>, provide the following information, and click <span class="uicontrol">Add</span>.</div><div id="wwID0E3N5Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Expression type</span>. Specifies the type of expression, which is used for identification. You can select one the following expression type:</div><div id="wwID0EXO5Y" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">XPath</span>. Provide the following information:</div><div id="wwID0ETP5Y" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Payload Expression</span>. Specifies the payload expression that the specified XPath expression type in the request has to be converted to. For example: /name/id</div><div id="wwID0EJQ5Y" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Namespace Prefix</span>. The namespace prefix of the payload expression to be validated.</div><div id="wwID0E6Q5Y" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Namespace URI</span>. The namespace URI of the payload expression to be validated.</div><div class="ww_skin_page_overflow"><div id="wwID0EWR5Y" class="Note_2"><span class="Bold">Note:<br /></span>You can add multiple namespace prefix and URI by clicking <img class="Default" src="../yai-webhelp/images/add.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 16px; max-width: 28px; top: 0pt" alt="" />.</div></div><div id="wwID0EWS5Y" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">JSONPath</span>. Provide the <span class="uicontrol">Payload Expression</span> that specifies the payload expression that the specified JSONPath expression type in the request has to be converted to. For example: $.name.id</div><div id="wwID0EQT5Y" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Text</span>. Provide the <span class="uicontrol">Payload Expression</span> that specifies the payload expression that the specified Text expression type in the request has to be converted to. For example: any valid regular expression.</div><div id="wwID0ENU5Y" class="Table_Cell">You can add multiple payload identifiers as required.</div><div id="wwID0ESU5Y" class="Note"><span class="Bold">Note:<br /></span>Only one payload identifier of each type is allowed. For example, you can add a maximum of three payload identifiers, each being of a different type.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0ENV5Y" class="Table_Cell"><span class="uicontrol">Route To</span>. Specifies the Endpoint URI of native APIs in a pool to which the requests are routed.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E4V5Y" class="Table_Cell"><span class="uicontrol">Endpoint URI </span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHW5Y" class="Table_Cell">Specifies the URI of the native API endpoint to route the request to.</div><div id="wwID0ENW5Y" class="Table_Cell">You can use service registries in a similar manner as described in the main <span class="uicontrol">Endpoint URI</span> above.</div><div id="wwID0EXW5Y" class="Table_Cell">For example, if your service is hosted at the URL: <span class="codeph">http://host:port/abc/</span>, you need to configure the Endpoint URI as: <span class="codeph">http://${ServiceRegistryName}/abc/</span>.</div><div id="wwID0EFX5Y" class="Table_Cell">As this property supports variable framework, you can make use of the available variables. For example, you can configure the endpoint URI using hard coded URL, simple alias, endpoint alias, and variable syntax or any of these combination. If you define the endpoint URI as <span class="codeph">http://${myAliasHost}:${request.headers.nativeport}/${sys:resource-path}</span>, where the <span class="codeph">${myAliasHost}</span> variable syntax is used to define the simple alias and the <span class="codeph">${request.headers.nativeport}</span> variable syntax is used to define the native port based on the request.</div><div id="wwID0EXX5Y" class="Table_Cell">For details about the variables available in <span class="ph">API Gateway</span>, see 
    <a href="../yai-webhelp/co-variable_extraction.html#wwID0E1BA1"
   
     title="Variable Framework"
    ><span class="heading-page">Variables Available in API Gateway</span></a>.</div><div id="wwID0EMY5Y" class="Note"><span class="Bold">Note:<br /></span>If you use endpoint alias, make sure the endpoint alias is created before you define it in the policy. For example, if you define ${alias} syntax in the policy before creating the <span class="userinput">alias</span> as endpoint alias, <span class="ph">API Gateway</span> considers ${alias} as custom variable or simple alias and tries to resolve against those. So in that case, after creating endpoint alias you have to edit and save the API or policy to associate ${alias} syntax with the endpoint alias.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EPZ5Y" class="Table_Cell"><span class="uicontrol">HTTP Method</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZZ5Y" class="Table_Cell">This is applicable for REST-based APIs.</div><div id="wwID0E6Z5Y" class="Table_Cell">Specifies the available routing methods: <span class="uicontrol">GET</span>, <span class="uicontrol">POST</span>, <span class="uicontrol">PUT</span>, <span class="uicontrol">DELETE</span>, and <span class="uicontrol">CUSTOM</span> (default).</div><div id="wwID0EZ15Y" class="Table_Cell">When <span class="uicontrol">CUSTOM</span> is selected, the HTTP method in the incoming request is sent to the native service. When other methods are selected, the selected method is used in the request sent to the native service.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EI25Y" class="Table_Cell"><span class="uicontrol">Soap Optimization Method</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ES25Y" class="Table_Cell">This is applicable for SOAP-based APIs.</div><div id="wwID0EY25Y" class="Table_Cell">Specifies the optimization methods that <span class="ph">API Gateway</span> can use to parse SOAP requests to the native API.</div><div id="wwID0EC35Y" class="Table_Cell">Select one of the following options:</div><div id="wwID0EN35Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">MTOM</span>. <span class="ph">API Gateway</span> uses the Message Transmission Optimization Mechanism (MTOM) to parse SOAP requests to the API.</div><div id="wwID0EH45Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">SwA</span>. <span class="ph">API Gateway</span> uses the SOAP with Attachment (SwA) technique to parse SOAP requests to the API.</div><div id="wwID0EB55Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">None</span>. <span class="ph">API Gateway</span> does not use any optimization method to parse the SOAP requests to the API. This is selected by default.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EB65Y" class="Table_Cell"><span class="uicontrol">HTTP Connection Timeout (seconds)</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EL65Y" class="Table_Cell">Specifies the time interval (in seconds) after which a connection attempt times out.</div><div id="wwID0ER65Y" class="Table_Cell">The precedence of the Connection Timeout configuration is as follows:</div><div id="wwID0E365Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>If you specify a value for the <span class="uicontrol">Connection timeout</span> field in routing endpoint alias, then the <span class="uicontrol">Connection timeout</span> value specified in the Endpoint alias section takes precedence over the timeout values defined at the API level and the global level.</div><div id="wwID0EXA6Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>If you specify a value 0 for the <span class="uicontrol">Connection timeout</span> field in routing endpoint alias, then <span class="ph">API Gateway</span> uses the value specified in the <span class="uicontrol">Connection timeout</span> field in the routing protocol processing step of an API. The Read Timeout value specified at an API level takes precedence over the global configuration.</div><div id="wwID0EWB6Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>If you specify a value 0 or do not specify a value for the <span class="uicontrol">Connection timeout</span> field in the routing protocol processing step at the API level or specify a value 0 at an alias level, then <span class="ph">API Gateway</span> uses the value specified in this <span class="parmname">pg.endpoint.connectionTimeout</span> property.</div><div id="wwID0EWC6Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>If you do not specify any value for <span class="parmname">pg.endpoint.connectionTimeout</span>, then <span class="ph">API Gateway</span> uses the default value of 30 seconds.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYD6Y" class="Table_Cell"><span class="uicontrol">Read Timeout (seconds)</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ECE6Y" class="Table_Cell">Specifies the time interval (in seconds) after which a socket read attempt times out.</div><div id="wwID0EIE6Y" class="Table_Cell">The precedence of the Read Timeout configuration is as follows:</div><div id="wwID0ETE6Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>If you specify a value for the <span class="uicontrol">Read timeout</span> field in routing endpoint alias, then the <span class="uicontrol">Read timeout</span> value specified in the Endpoint alias section takes precedence over the timeout values defined at the API level and the global level.</div><div id="wwID0EOF6Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>If you specify a value 0 for the <span class="uicontrol">Read timeout</span> field in routing endpoint alias, then <span class="ph">API Gateway</span> uses the value specified in the <span class="uicontrol">Read Timeout</span> field in the routing protocol processing step of an API. The Read Timeout value specified at an API level takes precedence over the global configuration.</div><div id="wwID0ENG6Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>If you specify a value 0 or do not specify a value for the <span class="uicontrol">Read timeout</span> field in the routing protocol processing step at the API level or specify a value 0 at an alias level, then <span class="ph">API Gateway</span> uses the value specified in this <span class="parmname">pg.endpoint.readTimeout</span> property.</div><div id="wwID0ENH6Y" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>If you do not specify any value for <span class="parmname">pg.endpoint.readTimeout</span>, then <span class="ph">API Gateway</span> uses the default value of 30 seconds.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EPI6Y" class="Table_Cell"><span class="uicontrol">Pass WS-Security Headers</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZI6Y" class="Table_Cell">This is applicable for SOAP-based APIs.</div><div id="wwID0E6I6Y" class="Table_Cell">Selecting this indicates that <span class="ph">API Gateway</span> should pass the WS-Security headers of the incoming requests to the native API.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EOJ6Y" class="Table_Cell"><span class="uicontrol">SSL Configuration</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYJ6Y" class="Table_Cell">Configures keystore, key alias, and truststore for securing connections to native APIs.</div><div id="wwID0E5J6Y" class="Table_Cell">Provide the following information:</div><div id="wwID0EJK6Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Keystore Alias</span>. Specifies the keystore alias configured in <span class="ph">API Gateway</span>. This value (along with the value of Client Certificate Alias) is used for performing SSL client authentication.</div><div id="wwID0EDL6Y" class="List_1_Continued">Lists all available keystores. If you have not configured any keystore, the list is empty.</div><div id="wwID0EJL6Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Key Alias</span>. Specifies the alias for the private key, which must be stored in the keystore specified by the keystore alias.</div><div id="wwID0E6L6Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Truststore Alias</span>. Specifies the alias for the truststore that contains the list of CA certificates that API Gateway uses to validate the trust relationship with the native API.</div><div id="wwID0EVM6Y" class="List_1_Continued">If you do not configure any truststore alias, it implies that <span class="ph">API Gateway</span> does not validate the certificates provided by native APIs.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0EGN6Y" class="Table_Cell"><span class="uicontrol">Service Registry Configuration</span></div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EWN6Y" class="Table_Cell"><span class="uicontrol">Service Discovery Endpoint Parameter</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EAO6Y" class="Table_Cell">Values required for constructing the discovery service URI.</div><div id="wwID0EMO6Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Parameter</span>: An alias that you have included in the discovery service URI while adding the service registry to API Gateway.</div><div id="wwID0EDP6Y" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Value</span>: Specifies a value for the path parameter. The alias specified in Path Parameter is substituted with this value when invoking the discovery service.</div><div id="wwID0E2P6Y" class="Table_Cell">For example: if the service registry configuration of the service registry that you have selected in <span class="uicontrol">Endpoint URI</span> has <span class="uicontrol">Service discovery path</span> set to <span class="userinput">/catalog/service/{serviceName}</span> (and the <span class="userinput">{serviceName}</span> alias is intended for passing the service name), you must enter <span class="userinput">{serviceName}</span> as <span class="uicontrol">Parameter</span> and the name of the service as <span class="uicontrol">Value</span>.</div><div id="wwID0E4Q6Y" class="Table_Cell">As the <span class="uicontrol">Value</span> field supports variable framework, you can make use of the available variables as path parameters.</div><div id="wwID0EHR6Y" class="Table_Cell">For example, if you provide a parameter as <span class="userinput">{serviceName}</span>( in <span class="uicontrol">Service discovery path</span> while you define a service register) and the corresponding values for the path parameter as <span class="codeph">${request.header.var1}</span>, the value in var 1 retrieved from the request header will substitute the service name.</div><div id="wwID0EZR6Y" class="Table_Cell">For details about the variables available in <span class="ph">API Gateway</span>, see 
    <a href="../yai-webhelp/co-variable_extraction.html#wwID0E1BA1"
   
     title="Variable Framework"
    ><span class="heading-page">Variables Available in API Gateway</span></a>.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright Â© 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>