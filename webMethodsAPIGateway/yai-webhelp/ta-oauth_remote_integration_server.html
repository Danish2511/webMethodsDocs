<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Securing APIs using OAuth 2.0 with API Gateway as Resource Server and Remote Integration Server as Authorization Server</title><link rel="Prev" href="ta-oauth_local_oauth_server.html" title="Previous" /><link rel="Next" href="ta-oauth_thridparty_oauth_server.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/ta-oauth_remote_integration_server.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pyTHLstMtlCJopgOtwCPXPQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/ta-oauth_remote_integration_server.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.503.html#wwconnect_header">Using API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.535.html#wwconnect_header">Implement APIs</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_manage_policies.html#wwconnect_header">Policies</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_iam_policies.html#wwconnect_header">Identify and Access</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/re-iam_identify_authorize_app.html#wwconnect_header">Identify &amp; Authorize</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Securing APIs using OAuth 2.0 with API Gateway as Resource Server and Remote Integration Server as Authorization Server</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0ERQ1X" class="Heading_5">Securing APIs using OAuth 2.0 with API Gateway as Resource Server and Remote Integration Server as Authorization Server</div><div id="wwID0E4Q1X" class="Body">This use case explains, with a simple example, how to secure an API with OAuth2 authentication with <span class="ph">API Gateway</span> configured as Resource Server and remote <span class="ph">Integration Server</span> configured as the Authorization Server. The diagram illustrates the work flow for this use case.</div><div class="ww_skin_page_overflow"><div id="wwID0ELR1X" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/gate_resorce_server.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 277px; max-width: 631px; top: 0pt" alt="gate resource server" /></div></div><div id="wwID0EGS1X" class="Section_Title">Actors</div><div id="wwID0EPS1X" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Developers with basic knowledge on <span class="ph">webMethods API Gateway</span> , <span class="ph">Integration Server</span>, OAuth2 architecture</div><div id="wwID0EIT1X" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Customers with basic knowledge about <span class="ph">webMethods API Gateway</span>, <span class="ph">Integration Server</span>, OAuth2 architecture</div><div id="wwID0EKU1X" class="Section_Title">Before you begin</div><div id="wwID0EPU1X" class="Body">Ensure that you have:</div><div id="wwID0E1U1X" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Installed <span class="ph">Integration Server</span> with <span class="ph">API Gateway</span></div><div id="wwID0ESV1X" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Knowledge on any Rest Client</div><div id="wwID0EDW1X" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="ph">API Gateway</span> up and running</div><div id="wwID0EAX1X" class="Section_Title">Basic Flow</div><div id="wwID0EFX1X" class="Body">The following diagram depicts the high level steps of the basic flow for this use case.</div><div class="ww_skin_page_overflow"><div id="wwID0EKX1X" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/basic_flow2.4.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 235px; max-width: 536px; top: 0pt" alt="basic flow2.4" /></div></div><div id="wwID0EGY1X" class="Section_Title">Step 1: Configure remote Integration Server as authorization server</div><div id="wwID0ERY1X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Disable HTTPS in OAuth in <span class="ph">Integration Server</span>.</div><div id="wwID0EGZ1X" class="Numbered_1_Continued">In this example you disable HTTPS in the remote <span class="ph">Integration Server</span> OAuth as authorization is through HTTP.</div><div id="wwID0EVZ1X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span>Login to <span class="ph">Integration Server</span> with the URL. <span class="codeph">https://</span><span class="codeph_002c_emphasis">mahinename</span><span class="codeph">:5555</span></div><div id="wwID0EU11X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span>Navigate to <span class="uicontrol">Security</span> &gt; <span class="uicontrol">OAuth</span>.</div><div id="wwID0EN21X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span>Click Edit <span class="uicontrol">OAuth Global Settings</span>.</div><div id="wwID0EC31X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>d. </span></span>Uncheck <span class="userinput">Require HTTPS</span>.</div><div id="wwID0EX31X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>e. </span></span>Click <span class="uicontrol">Save Changes</span>.</div><div class="ww_skin_page_overflow"><div id="wwID0EM41X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/disable_https.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 234px; max-width: 631px; top: 0pt" alt="disable_https" /></div></div><div id="wwID0ES51X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Configure the following extended settings.</div><div id="wwID0EK61X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span>Navigate to <span class="uicontrol">Settings</span> &gt; <span class="uicontrol">Extended</span>.</div><div id="wwID0EDA2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span>Click <span class="uicontrol">Show</span> and <span class="uicontrol">Hide</span> Keys.</div><div id="wwID0E3A2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span>Select <span class="uicontrol">watt.server.oauth.requireHTTPs</span> and <span class="userinput">watt.server.oauth.requirePost </span>.</div><div id="wwID0EVB2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>d. </span></span>Set both the value as <span class="userinput">false</span>.</div><div class="ww_skin_page_overflow"><div id="wwID0EKC2X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/extended_settings.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 173px; max-width: 631px; top: 0pt" alt="setting" /></div></div><div id="wwID0ERD2X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Create Client.</div><div id="wwID0EJE2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span>Navigate to <span class="uicontrol">Security</span> &gt; <span class="uicontrol">OAuth</span>.</div><div id="wwID0ECF2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span>Click <span class="uicontrol"> Client Registration</span>.</div><div id="wwID0EXF2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span>Click <span class="uicontrol"> Register Client</span>.</div><div id="wwID0EMG2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>d. </span></span>Provide the following information:</div><div id="wwID0ECH2X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Name</span>: <span class="userinput">OAuth Client</span></div><div id="wwID0EZH2X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Version</span>: <span class="userinput">1.0</span></div><div id="wwID0ERI2X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Type</span>: <span class="userinput">Confidential</span></div><div id="wwID0EJJ2X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Redirect URIs</span>: <span class="codeph">https://example.com/redirect</span></div><div id="wwID0EAK2X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Allowed Grants</span>: <span class="userinput">Authorization Code Grant</span>, <span class="userinput">Client Credentials Grant</span></div><div id="wwID0E2K2X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Expiration Interval</span>: <span class="userinput">Never Expires</span></div><div id="wwID0ESL2X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Refresh Count</span>: <span class="userinput">Unlimited</span></div><div id="wwID0EKM2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>e. </span></span>Click <span class="uicontrol">Save </span>.</div><div class="ww_skin_page_overflow"><div id="wwID0E6M2X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/register_client.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 433px; max-width: 631px; top: 0pt" alt="register_client" /></div></div><div id="wwID0ESN2X" class="Numbered_2_Continued">Onsuccessfully saving the following message displays: Successfully registered client OAuth Client, version 1.0. To use the client credentials grant, this client must be given ACL permissions to access the resources in the client's scopes.</div><div id="wwID0EXN2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>f. </span></span>Click <span class="uicontrol">OAuth Client (1.0)</span>. Note down the ID and Secret that are generated.</div><div class="ww_skin_page_overflow"><div id="wwID0EMO2X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/id_screen.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 451px; max-width: 631px; top: 0pt" alt="id_screen" /></div></div><div id="wwID0ETP2X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>ACL Permission to Client</div><div id="wwID0EFQ2X" class="Numbered_1_Continued">Provide Permission to client application by adding it to the Administrators group.</div><div id="wwID0EQQ2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span>Navigate to <span class="uicontrol">Security</span> &gt; <span class="uicontrol">User Management</span></div><div id="wwID0EIR2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span>Under Groups, select the group <span class="uicontrol">Administrator</span> (by default Administrators is selected)</div><div id="wwID0E4R2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span>The client id is present in the <span class="uicontrol">Remaining Users</span> section,</div><div class="ww_skin_page_overflow"><div id="wwID0ESS2X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/acl_permission.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 397px; max-width: 631px; top: 0pt" alt="acl_permission" /></div></div><div id="wwID0EGT2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>d. </span></span>Move the client ID under <span class="uicontrol">Users in this Group</span>.</div><div id="wwID0E2T2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>e. </span></span>Click <span class="uicontrol">Save Changes</span>.</div><div class="ww_skin_page_overflow"><div id="wwID0EQU2X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/select_group_administrator.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 371px; max-width: 631px; top: 0pt" alt="select_group_administrator" /></div></div><div id="wwID0EXV2X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>Create Scope and associate with client</div><div id="wwID0EPW2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span>Navigate to <span class="uicontrol">Security</span> &gt;<span class="uicontrol">OAuth</span>.</div><div id="wwID0EIX2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span>Click <span class="uicontrol">Scope Management</span>.</div><div id="wwID0E4X2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span>Click <span class="uicontrol">Add Scope</span>.</div><div id="wwID0ESY2X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>d. </span></span>Provide the following information:</div><div id="wwID0EIZ2X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Name</span>: <span class="userinput">View</span></div><div id="wwID0E6Z2X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Description</span>: <span class="userinput">Read only access scope</span></div><div id="wwID0EX12X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Folders and services</span>: <span class="userinput">example.com</span></div><div class="ww_skin_page_overflow"><div id="wwID0EO22X" class="Figure_3"><img class="ScaleFit" src="../yai-webhelp/images/return_to_scope_management.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 451px; max-width: 631px; top: 0pt" alt="return_to_scope" /></div></div><div id="wwID0EC32X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Click <span class="uicontrol">Associate Scopes to Client</span>.</div><div id="wwID0EX32X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Select <span class="userinput">OAuth Client(1.0)</span> in the <span class="uicontrol">Remaining Clients</span> section and move it to the <span class="uicontrol">Clients associated with Scope</span> section.</div><div id="wwID0EU42X" class="List_3"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Click <span class="uicontrol">Save Changes</span>.</div><div class="ww_skin_page_overflow"><div id="wwID0EJ52X" class="Figure_3"><img class="ScaleFit" src="../yai-webhelp/images/return_to_scope_management_2.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 251px; max-width: 631px; top: 0pt" alt="return_to_scope" /></div></div><div id="wwID0EJ62X" class="Section_Title">Step2: Configure remote Integration Server authorization server in API Gateway</div><div id="wwID0EO62X" class="Body">Configure the remote <span class="ph">Integration Server</span> as an external authorization server in <span class="ph">API Gateway</span>.</div><div id="wwID0ECA3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Navigate to <span class="uicontrol">Menu</span> &gt;<span class="uicontrol">Administration</span></div><div id="wwID0E1A3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Click <span class="uicontrol"> Security</span> &gt; <span class="uicontrol">JWT/OAuth/OpenID</span></div><div id="wwID0ESB3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Click <span class="uicontrol">External authorization servers</span> &gt; <span class="uicontrol">Add authorization server</span>.</div><div id="wwID0ELC3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>Provide the following:</div><div id="wwID0EBD3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Name</span>: <span class="userinput">IS_OAuthServer</span></div><div id="wwID0EYD3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Description (optional)</span>: I<span class="userinput">ntegration Server acting as Authorization server</span></div><div id="wwID0EQE3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>Click <span class="uicontrol"> Introspection</span>.</div><div id="wwID0EFF3X" class="Numbered_1_Continued">You use Introspection to authenticate the token. It happens ollows</div><div id="wwID0ENF3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">Local introspection</span>. Validating the token within the gateway. This is done using the JWKS URI or the public certificate of the issuer. In this case the token should necessarily be JWT.</div><div id="wwID0ECG3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">Remote introspection</span>. Validating the token with the authorization server. It has introspection endpoint, which is used to validate the token. In addition, the client id and client secret are used to protect the endpoint, so that anonymous users cannot access to the resource. To invoke an endpoint you require a user; Gateway user is the one you cam use to invoke the endpoint.</div><div id="wwID0EZG3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span>Provide the following in the Remote introspection section</div><div id="wwID0EQH3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Introspection endpoint</span>: <span class="codeph">http://{7BIntegrationserver_machinename}:5555/invoke/pub.oauth/introspectToken</span></div><div id="wwID0EII3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Gateway user</span>: <span class="userinput">Administrator</span></div><div id="wwID0E6I3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Client ID</span> and <span class="uicontrol">Secret</span>: Use ID and secret noted down earlier.</div><div class="ww_skin_page_overflow"><div id="wwID0EXJ3X" class="Figure_1"><img class="ScaleFit" src="../yai-webhelp/images/Introspection_endpoint.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 287px; max-width: 631px; top: 0pt" alt="Introspection_endpoint" /></div></div><div id="wwID0ELK3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>7. </span></span>Create Scopes in External Authorization servers page</div><div id="wwID0EBL3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Click <span class="uicontrol">Scopes</span> under <span class="uicontrol">Add authorization server</span> Create Scope similar to the one in Integration Server.</div><div id="wwID0E1L3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Provide the Scope: <span class="uicontrol">View</span></div><div id="wwID0EOM3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Provide Description: <span class="uicontrol">Scope created similar to IS Scope</span></div><div id="wwID0ECN3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Click <span class="uicontrol">Add</span></div><div class="ww_skin_page_overflow"><div id="wwID0EWN3X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/external_authorization.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 221px; max-width: 631px; top: 0pt" alt="external_authorization" /></div></div><div id="wwID0EKO3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Integration Server should be listed in External authorization servers</div><div class="ww_skin_page_overflow"><div id="wwID0E2O3X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/external_authorization_2.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 69px; max-width: 631px; top: 0pt" alt="external_authorization" /></div></div><div id="wwID0EZP3X" class="Section_Title">Step 3: Create an API with strategy</div><div id="wwID0E5P3X" class="Body">In this example you create an API by importing from the URL <span class="codeph">https://petstore.swagger.io/v2/swagger.json</span>, enforce it with OAuth2 policy, and create an applicatin with strategy and associate it with the API. .</div><div id="wwID0EOQ3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>In the <span class="uicontrol">APIs</span> tab click <span class="uicontrol">Create API</span>.</div><div id="wwID0EHR3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Select <span class="uicontrol">Import API from URL</span>.</div><div id="wwID0E3R3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Provide the following information.</div><div id="wwID0ESS3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">URL</span>: <span class="userinput">https://petstore.swagger.io/v2/swagger.json</span></div><div id="wwID0EJT3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Name</span>: <span class="userinput">RestOps</span></div><div id="wwID0EAU3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Type</span>: <span class="userinput">Swagger</span></div><div id="wwID0EXU3X" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Version</span>: <span class="userinput">1.0</span></div><div id="wwID0EPV3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>Click <span class="uicontrol">Create</span>. The API is created and the API details page for the API appears.</div><div class="ww_skin_page_overflow"><div id="wwID0EEW3X" class="Figure_1"><img class="ScaleFit" src="../yai-webhelp/images/oauth_third_party_create_api01.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 294px; max-width: 504px; top: 0pt" alt="oauth_third_party_create_api01" /></div></div><div id="wwID0EYW3X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>Create an Application with Strategy</div><div id="wwID0EJX3X" class="Numbered_1_Continued">For creating an Application, follow the below steps.</div><div id="wwID0ETX3X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span>Click <span class="uicontrol">Applications</span> in the title navigation bar.</div><div id="wwID0EIY3X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span>Click <span class="uicontrol">Create application </span> provide the <span class="uicontrol">Name</span>: <span class="userinput">API Application</span></div><div id="wwID0EFZ3X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span>Click <span class="uicontrol">Continue to Identifiers</span>.</div><div class="ww_skin_page_overflow"><div id="wwID0E1Z3X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/continue_identifier.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 261px; max-width: 631px; top: 0pt" alt="continue_identifier" /></div></div><div id="wwID0EN13X" class="Numbered_2_Continued">In this use case, no details are provided for the Identifier page.</div><div id="wwID0ES13X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>d. </span></span>Search the API <span class="apiname">RestOps</span>, by typing <span class="userinput">RestOps</span> in the <span class="uicontrol">Find APIs</span> text box.</div><div id="wwID0EQ23X" class="Numbered_2_Continued">The <span class="apiname">RestOps</span> API appears in the <span class="uicontrol">Selected APIs</span> section.</div><div id="wwID0E623X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>e. </span></span>Select the <span class="apiname">RestOps</span>API.</div><div id="wwID0EV33X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>f. </span></span>Click <span class="uicontrol">Continue to Advanced</span>.</div><div class="ww_skin_page_overflow"><div id="wwID0EK43X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/continue_advance.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 277px; max-width: 631px; top: 0pt" alt="continue_advance" /></div></div><div id="wwID0E543X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>g. </span></span>Click <span class="uicontrol">Continue to Authentication</span> .</div><div id="wwID0ET53X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>h. </span></span>Click <span class="uicontrol">Create Strategy</span> . A strategy is a way to authenticate the incoming request and provides multiple authentication mechanisms or multiple authorization servers for a single authentication scheme. One can create multiple strategies authorized by an API for an application.</div><div id="wwID0EI63X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>i. </span></span>Provide the <span class="uicontrol">Name</span>: <span class="userinput">AppStrategy</span>.</div><div id="wwID0EBA4X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>j. </span></span>Click<span class="uicontrol">Add</span></div><div id="wwID0EWA4X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>k. </span></span>Click <span class="uicontrol">Save</span></div><div class="ww_skin_page_overflow"><div id="wwID0ELB4X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/app_stratergy.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 277px; max-width: 631px; top: 0pt" alt="app_stratergy" /></div></div><div id="wwID0EAC4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span>Enforcing OAUTH2 policy on the API</div><div id="wwID0ERC4X" class="Numbered_1_Continued">Enforce OAuth2 policy to the created API . This policy ascertains that an OAuth token is required to access this API..</div><div id="wwID0E2C4X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span>Click <span class="uicontrol">API</span> in the title Navigation Panel.</div><div id="wwID0EQD4X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span>Click <span class="uicontrol">RestOps</span>.</div><div id="wwID0EFE4X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span>Click <span class="uicontrol">Policies</span> tab.</div><div id="wwID0E1E4X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>d. </span></span>Click <span class="uicontrol">Edit</span></div><div id="wwID0EPF4X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>e. </span></span>Click<span class="uicontrol">Identify &amp; Access</span> from the Policy catalog.</div><div id="wwID0EEG4X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>f. </span></span>Select the identification type as <span class="uicontrol">OAuth2 Token</span> and <span class="uicontrol">Save</span>.</div><div id="wwID0E4G4X" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>g. </span></span>The API can be Activated, or can navigate to the APIs in the title navigation bar and <span class="uicontrol">Activate</span>.</div><div class="ww_skin_page_overflow"><div id="wwID0ESH4X" class="Figure_2"><img class="ScaleFit" src="../yai-webhelp/images/enforcing_oauth2.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 397px; max-width: 631px; top: 0pt" alt="enforcing_oauth2" /></div></div><div id="wwID0EQI4X" class="Section_Title">Step 4: Mapping OAuth scopes</div><div id="wwID0EVI4X" class="Body">Now map the scope that was defined in the Authorization server with the APIs in <span class="ph">API Gateway</span> to authorize the access tokens to be used to access the protected resources. One can map either a complete API or parts (resources or methods) of an API to the scope or can add the scope details and modify the scope details as required from the OAuth/OpenID scopes page.</div><div id="wwID0EFJ4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Expand the menu options in the title bar and Select <span class="uicontrol">OAuth/OpenID scopes</span>.</div><div id="wwID0E1J4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Click <span class="uicontrol">Map scope</span>.</div><div id="wwID0EPK4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Type<span class="uicontrol">IS_OAuthServer</span> in Select authorization server scope and select the listed Authorization server scope from the search list populated.</div><div class="ww_skin_page_overflow"><div id="wwID0EEL4X" class="Figure_1"><img class="ScaleFit" src="../yai-webhelp/images/map_scope.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 176px; max-width: 631px; top: 0pt" alt="map_scope" /></div></div><div id="wwID0EYL4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>Click <span class="uicontrol"> API</span> scopes.</div><div id="wwID0ENM4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>Type <span class="userinput">RestOps API Scope</span>, which is to be linked to the authorization server, in API scopes search text box.</div><div id="wwID0ECN4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span>Save the changes. This maps the authorization server scope to the selected API scopes and lists the authorization scope in the scopes list.</div><div class="ww_skin_page_overflow"><div id="wwID0ETN4X" class="Figure_1"><img class="ScaleFit" src="../yai-webhelp/images/scoping_map.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 223px; max-width: 631px; top: 0pt" alt="scoping_map" /></div></div><div id="wwID0EQO4X" class="Section_Title">Step 5: Get authorization code</div><div id="wwID0E2O4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>To get the Authorization code copy the client ID from the Integration server as seen in above step 1.</div><div id="wwID0EMP4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Access the Authorization code using below URL. <span class="codeph">https://&lt;machinename_remoteintegrationserver&gt;:5555/invoke/pub.oauth/authorize?client_id= f2c86e721b0344b0a076834449ae70a9&amp;redirect_uri=http://example.com/redirect&amp;response_type=code&amp;state=121</span></div><div id="wwID0EBQ4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Click <span class="uicontrol"> Approve</span></div><div id="wwID0EVQ4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>Copy the authorization code from the URL. <span class="codeph">http://example.com/redirect?code=4a609ffc126343ae841237c0428bf0f9&amp;grant_type=authorization_code&amp;redirect_uri=http%253A%252F%252Fexample.com%252Fredirect&amp;state=121&amp;scope=View</span>Copy the authorization code from the URL.</div><div id="wwID0ELR4X" class="Body">You might get an error, but the authorization code is present in the URL as you are providing dummy redirect URI.</div><div id="wwID0EYR4X" class="Section_Title">Step 6: Getting the access token</div><div id="wwID0E4R4X" class="Body">To get the access token, follow the below steps.</div><div id="wwID0EIS4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Open <span class="uicontrol">Postman</span> or any other <span class="uicontrol">Rest Client</span></div><div id="wwID0EBT4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Copy the code from the above step</div><div id="wwID0EST4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Make a POST call to the following URL, with the hostname of the system, where API Gateway is installed in place of localhost and use external port instead of default port like below. <span class="codeph">https://&lt;machinename_integrationserver&gt;:5555 /invoke/pub.oauth/getToken</span></div><div id="wwID0EHU4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>In the Body provide the following Request payload:</div><div id="wwID0EYU4X" class="Preformatted_1"><br />{<br />"code":"4a609ffc126343ae841237c0428bf0f9",<br />"redirect_uri":"http://example.com/redirect",<br />"grant_type":"authorization_code",<br />"scope":"View"<br />}<br /></div><div id="wwID0EAV4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>In the Authorization select <span class="uicontrol">Basic Auth </span>and provide the client_id in the Username and client_secret in the password.</div><div class="ww_skin_page_overflow"><div id="wwID0EVV4X" class="Figure_1"><img class="ScaleFit" src="../yai-webhelp/images/access_token.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 157px; max-width: 631px; top: 0pt" alt="access_token" /></div></div><div id="wwID0EJW4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span>The output is the access_token, refresh_token and token_type</div><div class="ww_skin_page_overflow"><div id="wwID0E1W4X" class="Figure_1"><img class="ScaleFit" src="../yai-webhelp/images/token.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 286px; max-width: 621px; top: 0pt" alt="token" /></div></div><div id="wwID0EXX4X" class="Section_Title">Step 7: Invoke API</div><div id="wwID0E3X4X" class="Body">The access_token can be used to invoke the API</div><div id="wwID0EHY4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Navigate to APIs in the title menu</div><div id="wwID0EYY4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Click <span class="uicontrol">RestOps</span></div><div id="wwID0ENZ4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Under Technical information copy the Gateway endpoints</div><div id="wwID0E5Z4X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>Have a look into the Resources and methods. You can use invoke any of these.</div><div id="wwID0EP14X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>In PostMan invoke the API using the Gateway endpoints with the required resource or method.</div><div id="wwID0EA24X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span>In Authorization provide select <span class="uicontrol">Bearer token</span> and provide the access_token</div><div class="ww_skin_page_overflow"><div id="wwID0EV24X" class="Figure_1"><img class="ScaleFit" src="../yai-webhelp/images/invoking_api.png" width="100%" style="display: inline; float: none; left: 0pt; max-height: 130px; max-width: 631px; top: 0pt" alt="invoking_api.png" /></div></div><div id="wwID0ES34X" class="Section_Title">Alternative/Exception Flows</div><div id="wwID0EX34X" class="Body">The same use case can be done with Client Credentials as well.</div><div id="wwID0E334X" class="Body">You can get the access token using client credentials. You require the client_id and client_secret.</div><div id="wwID0EH44X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Open Postman or any other Rest Client</div><div id="wwID0EY44X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Make a POST call to the following URL, with the hostname of the system where API Gateway is installed in place of localhost and use external port instead of default port as follows: <span class="codeph">https://&lt;machinename_remoteintegrationserver&gt;:5555 /invoke/pub.oauth/getToken</span></div><div id="wwID0EM54X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>In the Headers provide <span class="uicontrol">Content-Type</span> as<span class="uicontrol">application/json</span> (if not specified).</div><div id="wwID0EF64X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>In the Body provide the following Request payload:</div><div id="wwID0EW64X" class="Preformatted_1"><br />{ <br />   “client_id”:”xxxxx”,  <br />   “client_secret”:”xxxxx”,<br />   “ grant_type”:”client_credentials”<br />}<br /></div><div id="wwID0E564X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>The output gives you the access token.</div><div id="wwID0EPA5X" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span>Use the access token to invoke the API.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>