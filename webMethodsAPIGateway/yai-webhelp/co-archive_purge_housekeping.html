<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Archive and Purge using API</title><link rel="Prev" href="co-housekeeping.html" title="Previous" /><link rel="Next" href="ta-rollover_index_using_api.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/co-archive_purge_housekeping.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="piojy1hjHNdeFn_002ft7SLNPLg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/co-archive_purge_housekeping.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.032.html#wwconnect_header">Administering API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.078.html#wwconnect_header">Operating API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/co-data_management_housekeeping.html#wwconnect_header">Data Management</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/co-housekeeping.html#wwconnect_header">Data Housekeeping</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Archive and Purge using API</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0E2SFO" class="Heading_4">Archive and Purge using API</div><div id="wwID0EDTFO" class="Body">You can use the APIs provided by <span class="ph">API Gateway</span> to archive and purge data. This method is easy and helps you automate the archive and purge operations.</div><div id="wwID0EUTFO" class="Section_Title">Archive transaction and Audit data</div><div id="wwID0EZTFO" class="Body">You can archive outdated data (for example, data that is older than a year) for forensic analysis and decision making. Archived data is not the same as backup data. <span class="ph">Software&nbsp;AG</span> recommends that you use a proper naming convention for every archive that you create. You can specify the period (like from 1 June to 1 July) and the type of events to be archived. For the list of events that you can archive, see 
    <a href="../yai-webhelp/re-events_list_archive_purge.html#wwID0EYXIO"
   
     title="List of events that can be archived or purged"
    ><span class="heading-page">List of events that can be archived or purged</span></a>.</div><div id="wwID0EOUFO" class="Body">You can use the following REST API to archive data:</div><div id="wwID0ETUFO" class="Preformatted">curl -X POST -u "Administrator:manage" -H "content-type:application/json" -H "Accept:application/json" <br />"http://localhost:5555/rest/apigateway/apitransactions/archives?"<span class="varname">time interval</span>"</div><div id="wwID0EAVFO" class="Body">The following API archives data of all event types for the period, 3 June 2021 to 4 June 2021:</div><div id="wwID0EFVFO" class="Preformatted">curl -X POST -u "Administrator:manage" -H "content-type:application/json" -H "Accept:application/json" <br />"http://localhost:5555/rest/apigateway/apitransactions/archives?<br />from=2021-06-03%2000:00:00&amp;until=2021-06-04%2000:00:00&amp;eventType=ALL"<br /></div><div id="wwID0EMVFO" class="Body">You can schedule archiving using cron jobs or any other scheduling methods. Archiving is a resource-intensive operation. You must not schedule it during peak hours.</div><div id="wwID0ERVFO" class="Body">You can monitor the status of an archive job using the following API:</div><div id="wwID0EWVFO" class="Preformatted">curl -X GET -u "Administrator:manage" -H "content-type:application/json" -H "Accept:application/json" <br />"http://localhost:5555/rest/apigateway/apitransactions/jobs/9c0eefde-dc26-4cb7-b0eb-dfe8f3a8a545"<br /></div><div id="wwID0E4VFO" class="Body">The above command returns the following output, if the archive job completes successfully:</div><div id="wwID0ECWFO" class="Preformatted">{<br />   "status":"Completed",<br />   "Filename":"\\default-2021-06-14-1623648788446"<br />}</div><div id="wwID0EJWFO" class="Body">If the archive job fails, the status field in the above output, displays <span class="msgph">Failed</span>. You must configure alerts for failures to get notified about the failed archive jobs. Common reasons for failure include health of the Elasticsearch cluster, load on the system, and so on. You can look into server logs and analyze the failure reasons.</div><div id="wwID0E2WFO" class="Section_Title">Purging data</div><div id="wwID0EAXFO" class="Body">You can schedule and automate the purge process. You can also purge data manually through the <span class="ph">API Gateway</span> UI. To learn more about how to purge data manually, refer to the 
    <a href="../yai-webhelp/gtw_archive_purge.html#wwID0E4HHO"
   
     title="Archive and Purge using UI"
    ><span class="heading-page">Archive and Purge using UI</span></a> section. You can purge the following data using commands.</div><div id="wwID0E2XFO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Analytics data</div><div id="wwID0EOYFO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Backup snapshots</div><div id="wwID0EBZFO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Obsolete or empty indexes</div><div id="wwID0EUZFO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Expired OAuth tokens</div><div id="wwID0EH1FO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Archive data</div><div id="wwID0ED2FO" class="Section_Title">Purge Analytics Data</div><div id="wwID0EI2FO" class="Body">You can purge analytics data based on timeline or size. As an example of timeline based purging, you can purge data older than an year. As an example of size-based purging, you can purge data greater than 100 GB.</div><div id="wwID0EN2FO" class="Body"><span class="inlinetitle">Timeline based purging</span></div><div id="wwID0EX2FO" class="Body">You can use the following API to purge the analytics data of the specified event type and period:</div><div id="wwID0EB3FO" class="Preformatted">curl -X DELETE -u "Administrator:manage" -H "Accept:application/json"<br /> "http://localhost:5555/rest/apigateway/apitransactions?<br />  action=purge&amp;eventType=<span class="varname">eventtype</span>&amp;olderThan=<span class="varname">timeline</span>"<br /> </div><div id="wwID0E32FO-2" class="Body">For the list of events that you can specify with the API, see 
    <a href="../yai-webhelp/re-events_list_archive_purge.html#wwID0EYXIO"
   
     title="List of events that can be archived or purged"
    ><span class="heading-page">List of events that can be archived or purged</span></a>.</div><div id="wwID0E53FO" class="Body">The <span class="inlinetitle">olderthan</span> field is the timeline field and can have one of the following values:</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 17.5%"><div id="wwID0EN5FO" class="Table_Cell_Head">Timeline Name</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 26.7%"><div id="wwID0ET5FO" class="Table_Cell_Head">Syntax</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 17.6%"><div id="wwID0EZ5FO" class="Table_Cell_Head">Example</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 38%"><div id="wwID0E65FO" class="Table_Cell_Head">Usage</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EM6FO" class="Table_Cell">Year</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ES6FO" class="Table_Cell">&lt;number&gt;Y</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EY6FO" class="Table_Cell">&lt;1&gt;Year</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E56FO" class="Table_Cell">Purges all data up to last 1 year</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EIAGO" class="Table_Cell">Month</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EOAGO" class="Table_Cell">&lt;number&gt; M</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUAGO" class="Table_Cell">&lt;1&gt; M</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E1AGO" class="Table_Cell">Purges all data up to last 1 month</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EEBGO" class="Table_Cell">Days</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EKBGO" class="Table_Cell">&lt;number&gt;d</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EQBGO" class="Table_Cell">&lt;1&gt;d</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EWBGO" class="Table_Cell">Purges all data up to last day</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EACGO" class="Table_Cell">Time</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EMCGO" class="Lines">&lt;number&gt;h&lt;number&gt;<br />m&lt;number&gt;s</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ETCGO" class="Table_Cell">14h30m2s\</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZCGO" class="Table_Cell">Purge all data up to the given time</div></td></tr></table></div><div id="wwID0EDDGO" class="Body">You can monitor the status of a purge job using the following API:</div><div id="wwID0EIDGO" class="Preformatted">http://localhost:5555/rest/apigateway/apitransactions/jobs/&lt;job_id&gt;</div><div id="wwID0EDDGO-2" class="Body">If the purge is successful, you get the following output.</div><div id="wwID0EODGO" class="Preformatted">{<br />"status": "Completed",<br />"Filename": "<span class="varname">File_name</span>"<br />}</div><div id="wwID0E2DGO" class="Body"><span class="inlinetitle">Purge based on size</span></div><div id="wwID0EFEGO" class="Body">You can purge data based on size. When the size of an index exceeds the specified 25 GB limit, you must roll over the index. When you roll over an index, a new index is created. When you have new indexes, you can purge the old indexes. For example, if you have set maximum size for analytics data as 300 GB, maximum size of an index to be 25 GB, and if your data grows to 325 GB, then you have 13 indexes and the size of each index is 25 GB. Each index contains a primary and a replica shard. So, when the size of the primary shard of an index equals 12.5 GB, the size of the replica index will also be 12.5 GB. The total size of the index will be 25 GB. Hence, you must check the size of the primary shard of an index to decide whether the index needs to be rolled over.</div><div id="wwID0EKEGO" class="Body">You must regularly monitor the indexes that need to be purged. For information on calculating index size, see 
    <a href="../yai-webhelp/re-monitoring_apids_appln_metrics.html#wwID0EY1HR"
   
     title="Application Metrics"
    ><span class="heading-page">Calculating index size</span></a>.</div><div id="wwID0E2EGO" class="Body">If you regularly roll over indexes, it becomes easier to find the oldest indexes and purge them. Purging older and obsolete indexes ensure the quick recovery of disk space.</div><div id="wwID0EAFGO" class="Body">Perform the following steps to purge an index:</div><div id="wwID0ELFGO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Find the oldest index using the following API:</div><div id="wwID0E5FGO" class="Preformatted_1">curl -X GET http://localhost:9240/_cat/indices/gateway_default_analytics_transactionalevents*?h=i&amp;s=i:desc</div><div id="wwID0EEGGO" class="Note_1"><span class="Bold">Note:<br /></span>The above API returns the list of indexes in descending order of index name. <span class="ph">API Gateway</span> follows the pattern, gateway_default_transactionalevents_epoch_00000n, where the date and time is represented in the epoch format and 'n' denotes any number starting from 1, which increments during rollover.</div><div id="wwID0E4GGO" class="Numbered_1_Continued">API Gateway returns the following pattern, aliasname_yyyyMMddhhmm-00000n when no target index suffix parameter is provided during roll over. If a target index suffix parameter is provided during rollover, API Gateway returns aliasname_&lt;targetIndexSuffix&gt;</div><div id="wwID0EDHGO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Delete the index returned in the previous step using the following API:</div><div id="wwID0EWHGO" class="Preformatted_1">curl -X DELETE http://localhost:9240/<span class="varname">indexname</span></div><div id="wwID0ECIGO" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>To ensure that an index is deleted, run the following command with the required index name:</div><div id="wwID0EVIGO" class="Preformatted_1">curl -v -X GET http://localhost:9240/<span class="varname">indexname</span></div><div id="wwID0EAJGO" class="Numbered_1_Continued">If the deletion is successful, the above API returns the status code 404.</div><div id="wwID0EQJGO" class="Section_Title">Purge backup snapshots</div><div id="wwID0EVJGO" class="Body">Data backups are created to safeguard data in a repository for restoring in case of any disasters. The backup snapshots created over a period of time occupies a considerable disk space. Hence, it is essential to purge backup snapshots that are older than the data retention period.</div><div id="wwID0E1JGO" class="Body">For information on purging backup snapshots, see 
    <a href="../yai-webhelp/ta-delete_backup_using_script.html#wwID0EQRSO"
   
     title="Deleting a Backup File"
    ><span class="heading-page">Deleting a Backup File</span></a>.</div><div id="wwID0ETKGO" class="Section_Title">Purge obsolete or empty indexes</div><div id="wwID0EYKGO" class="Body"><span class="ph">API Gateway</span> may have empty indexes due to roll-over and purge operations. It is essential to cleanup the empty indexes. You can delete an index if there are multiple indexes and the index to be deleted is not a write index. <span class="ph">Software&nbsp;AG</span> recommends that you perform the purge operation after the scheduled backups.</div><div id="wwID0EGLGO" class="Body">You can use the following API to check the documents stored by the indexes:</div><div id="wwID0EQLGO" class="Preformatted">curl -X GET "http://localhost:9240/_cat/indices/<br />gateway_default_analytics_transactionalevents*?s=docs.count:asc&amp;h=i,docs.count"</div><div id="wwID0ELLGO-2" class="Body">The API returns the following response:</div><div id="wwID0EWLGO" class="Preformatted">gateway_default_analytics_transactionalevents_202106111722  0<br />gateway_default_analytics_transactionalevents_1622725174422-000001  2</div><div id="wwID0ELLGO-4" class="Body">If an index's response value is more than <span class="inlinetitle">0</span>, it implies that index is not empty and must not be deleted.</div><div id="wwID0ECMGO" class="Body">You can use the following API to check if the indexes are write index:</div><div id="wwID0EMMGO" class="Preformatted">curl -X GET "http://localhost:9240/_cat/aliases/gateway_default_analytics_transactionalevents?<br />h=i,is_write_index&amp;s=is_write_index:asc"</div><div id="wwID0EHMGO-2" class="Body">The above API returns the following response:</div><div id="wwID0ESMGO" class="Preformatted">gateway_default_analytics_transactionalevents_1622725174422-000001  false<br /># gateway_default_analytics_transactionalevents_202106111722                 true</div><div id="wwID0EHMGO-4" class="Body">If an index has a value <span class="inlinetitle">true</span>, it implies that the index is a write index and should not be deleted.</div><div id="wwID0E5MGO" class="Body">You can use the following API to delete an index:</div><div id="wwID0EDNGO" class="Preformatted">curl -X DELETE http://localhost:9240/<span class="varname">indexname</span></div><div id="wwID0EPNGO" class="Body">You can schedule the purge operation of indexes using a cron job or some other scheduling method. You can schedule index purging on a daily basis. You can monitor the index delete index by using the following API:</div><div id="wwID0EUNGO" class="Preformatted">curl -v -X GET http://localhost:9240/<span class="varname">indexname</span></div><div id="wwID0EPNGO-2" class="Body">If the deletion is successful, the above API returns status code 404. You must configure alerts for failed purge jobs. When a purge job fails, you must check the Elasticsearch logs to troubleshoot.</div><div id="wwID0EIOGO" class="Section_Title">Purge expired OAuth tokens</div><div id="wwID0ENOGO" class="Body">You can use the following API to delete expired OAuth tokens.</div><div id="wwID0ESOGO" class="Preformatted">https://&lt;&gt;/invoke/pub.oauth:removeExpiredAccessTokens</div><div id="wwID0EZOGO" class="Body">You can schedule the purge operation of indexes using a cron job or some other scheduling method. You can schedule OAuth token purging on a daily basis. You must configure alerts for failed purge jobs. When a purge job fails, you must check the server logs.</div><div id="wwID0EGPGO" class="Section_Title">Purge Archive Data</div><div id="wwID0ELPGO" class="Body">You must delete the archive data after it reaches the maximum retention period. There is no API to clear the archive data. You must delete archives manually. You can delete archives on a daily basis.</div><div id="wwID0EQPGO" class="Important"><span class="Bold">Important:<br /></span><span class="ph">API Gateway</span> does not perform the purge operation immediately. Once you initiate the purge process, <span class="ph">API Gateway</span> starts to mark the files for deletion. Once all the files are marked, the status of the purge operation shows 100% and this implies that the files are deleted internally. However, the actual disk space which was occupied by the purged files is not freed-up, even after the purge status shows 100%. When the purge status is 100%, it implies that the files are internally deleted and it may take up more time to free up the disk space.</div><div id="wwID0ENQGO" class="Body_-_Note_-_Important_-_not_first">If you want to free up the disk space immediately after initiating the purge process, use the following REST API:</div><div id="wwID0ESQGO" class="Preformatted_-_Note_-_Important_-_not_first">http://<span class="userinput">Elasticsearch_host</span>:<span class="userinput">Elasticsearch_port</span>/<span class="userinput">target_indexes</span>/_forcemerge?<br />only_expunge_deletes=true</div><div id="wwID0EQPGO-8" class="Important">where,</div><div id="wwID0ELRGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">&lt;target&gt;</span>. Comma-separated list of data streams, indexes, and aliases used to limit the request. This parameter supports wildcards (*). To target all data streams and indices, exclude this parameter or use * or _all.</div><div id="wwID0ECSGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">only_expunge_deletes</span>. Boolean parameter. When set to <span class="emphasis">true</span>, it expunges only those segments containing document deletions.</div><div id="wwID0E6SGO" class="Body_-_Note_-_Important_-_not_first">Sample command</div><div id="wwID0EETGO" class="Preformatted_-_Note_-_Important_-_not_first">http://localhost:9240/gateway_default_analytics_transactionalevents/_forcemerge?only_expunge_deletes=true</div><div id="wwID0ELTGO" class="Body_-_Note_-_Important_-_not_first">You can use the Force Merge API on the following indexes in API Data Store or an Elasticsearch:</div><div id="wwID0EWTGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Transaction events (gateway_default_transactionalevents)</div><div id="wwID0EJUGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Lifecycle events (gateway_default_lifecycleevents)</div><div id="wwID0E3UGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Performance metrics (gateway_default_performancemetrics)</div><div id="wwID0EPVGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Monitor events (gateway_default_monitorevents)</div><div id="wwID0ECWGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Threat Protection events (gateway_default_threatprotectionevents)</div><div id="wwID0EVWGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Policy violation events (gateway_default_policyviolationevents)</div><div id="wwID0EIXGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Error events (gateway_default_errorevents)</div><div id="wwID0E2XGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Audit events (gateway_default_auditlogs)</div><div id="wwID0EOYGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Application logs (gateway_default_log)</div><div id="wwID0EBZGO" class="List_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Mediator trace span (gateway_default_mediatortracespan and gateway_default_serverlogtracespans)</div><div id="wwID0EWZGO" class="Body_-_Note_-_Important_-_not_first">To learn more about this API, see 
    <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-forcemerge.html"
   
     target="external_window"
    ><span class="heading-page">Elasticsearch documentation</span></a> on Force Merge API.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>