<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Dynamic Routing</title><link rel="Prev" href="re-routing_context_based.html" title="Previous" /><link rel="Next" href="re-routing_load_balancer.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/re-routing_dynamic.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pL6pYAMCWV_002fWmCmX5q_002bkSvw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/re-routing_dynamic.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.503.html#wwconnect_header">Using API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.535.html#wwconnect_header">Implement APIs</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_manage_policies.html#wwconnect_header">Policies</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_routing_policies.html#wwconnect_header">Routing</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Dynamic Routing</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EGSCZ" class="Heading_4">Dynamic Routing</div><div id="wwID0EVSCZ" class="Body">This policy enables <span class="ph">API Gateway</span> to support dynamic routing of virtual aliases based on policy configuration. The configured policies are enforced on the request sent to an API and these requests are forwarded to the dynamic endpoint based on specific criteria that you specify.</div><div id="wwID0E6SCZ" class="Note"><span class="Bold">Note:<br /></span>As the dynamic routing policy's capabilities can also be configured using conditional routing policy, the dynamic routing policy will be deprecated in future releases and the configurations will be migrated to conditional routing policy. Hence, <span class="ph">Software&nbsp;AG</span> recommends to use conditional routing policy over dynamic routing policy. In future version, when dynamic routing is migrated to conditional routing policy ${sys:dyn_Endpoint} will be replaced with ${dynamicEndpoint} system variable.</div><div id="wwID0EZTCZ" class="Body">The table lists the properties that you can specify for this policy:</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 30.6%"><div id="wwID0EYUCZ" class="Table_Cell_Head">Property</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 69.3%"><div id="wwID0E5UCZ" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0ELVCZ" class="Table_Cell"><span class="uicontrol">Route To</span>. Specifies the URLs of two or more native services in a pool to which the requests are routed.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2VCZ" class="Table_Cell"><span class="uicontrol">Endpoint URI</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EFWCZ" class="Table_Cell">Specifies the URI of the native API endpoint to route the request to in case all routing rules evaluate to False. Service registries that have been added to the API Gateway instance are also included in the list.</div><div id="wwID0ELWCZ" class="Table_Cell">If you choose a service registry, API Gateway sends a request to the service registry to discover the IP address and port at which the native service is running. API Gateway replaces the service registry alias in the <span class="uicontrol">Endpoint URI</span> with the IP address and port returned by the service registry.</div><div id="wwID0EVWCZ" class="Table_Cell">For example, if your service is hosted at the URL: <span class="codeph">http://host:port/abc/</span>, you need to configure the Endpoint URI as: <span class="codeph">http://${ServiceRegistryName}/abc/</span>.</div><div id="wwID0EDXCZ" class="Table_Cell">As this property supports variable framework, you can make use of the available variables. For example, you can configure the endpoint URI using hard coded URL, simple alias, endpoint alias, and variable syntax or any of these combination. If you define the endpoint URI as <span class="codeph">http://${myAliasHost}:${request.headers.nativeport}/${sys:resource-path}</span>, where the <span class="codeph">${myAliasHost}</span> variable syntax is used to define the simple alias and the <span class="codeph">${request.headers.nativeport}</span> variable syntax is used to define the native port based on the request.</div><div id="wwID0EVXCZ" class="Table_Cell">For details about the variables available in <span class="ph">API Gateway</span>, see 
    <a href="../yai-webhelp/co-variable_extraction.html#wwID0E1BA1"
   
     title="Variable Framework"
    ><span class="heading-page">Variables Available in API Gateway</span></a>.</div><div id="wwID0EKYCZ" class="Note"><span class="Bold">Note:<br /></span>If you use endpoint alias, make sure the endpoint alias is created before you define it in the policy. For example, if you define ${alias} syntax in the policy before creating the <span class="userinput">alias</span> as endpoint alias, <span class="ph">API Gateway</span> considers ${alias} as custom variable or simple alias and tries to resolve against those. So in that case, after creating endpoint alias you have to edit and save the API or policy to associate ${alias} syntax with the endpoint alias.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ENZCZ" class="Table_Cell"><span class="uicontrol">HTTP Method </span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EXZCZ" class="Table_Cell">This is applicable to REST-based APIs.</div><div id="wwID0E4ZCZ" class="Table_Cell">Specifies the available routing methods: <span class="uicontrol">GET</span>, <span class="uicontrol">POST</span>, <span class="uicontrol">PUT</span>, <span class="uicontrol">DELETE</span>, and <span class="uicontrol">CUSTOM</span> (default).</div><div id="wwID0EX1CZ" class="Table_Cell">When <span class="uicontrol">CUSTOM</span> is selected, the HTTP method in the incoming request is sent to the native service. When other methods are selected, the selected method is used in the request sent to the native service.</div><div id="wwID0EB2CZ" class="Note"><span class="Bold">Note:<br /></span><span class="ph">Software&nbsp;AG</span> recommends to use <span class="uicontrol">Request Transformation &gt; Method Transformation</span> to achieve this as other transformations can also be done under the same policy.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ED3CZ" class="Table_Cell"><span class="uicontrol">SOAP Optimization Method </span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EN3CZ" class="Table_Cell">This is applicable for SOAP-based APIs.</div><div id="wwID0ET3CZ" class="Table_Cell">Specifies the optimization methods that <span class="ph">API Gateway</span> can use to parse SOAP requests to the native API.</div><div id="wwID0E43CZ" class="Table_Cell">Select one of the following options:</div><div id="wwID0EI4CZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">MTOM</span>. <span class="ph">API Gateway</span> uses the Message Transmission Optimization Mechanism (MTOM) to parse SOAP requests to the API.</div><div id="wwID0EC5CZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">SwA</span>. <span class="ph">API Gateway</span> uses the SOAP with Attachment (SwA) technique to parse SOAP requests to the API.</div><div id="wwID0E35CZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">None</span>. <span class="ph">API Gateway</span> does not use any optimization method to parse the SOAP requests to the API. This is selected by default.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E36CZ" class="Table_Cell"><span class="uicontrol">HTTP Connection Timeout (seconds) </span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGADZ" class="Table_Cell">Specifies the time interval (in seconds) after which a connection attempt times out.</div><div id="wwID0EMADZ" class="Table_Cell">The precedence of the Connection Timeout configuration is as follows:</div><div id="wwID0EXADZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>If you specify a value for the <span class="uicontrol">Connection timeout</span> field in routing endpoint alias, then the <span class="uicontrol">Connection timeout</span> value specified in the Endpoint alias section takes precedence over the timeout values defined at the API level and the global level.</div><div id="wwID0ESBDZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>If you specify a value 0 for the <span class="uicontrol">Connection timeout</span> field in routing endpoint alias, then <span class="ph">API Gateway</span> uses the value specified in the <span class="uicontrol">Connection timeout</span> field in the routing protocol processing step of an API. The Read Timeout value specified at an API level takes precedence over the global configuration.</div><div id="wwID0ERCDZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>If you specify a value 0 or do not specify a value for the <span class="uicontrol">Connection timeout</span> field in the routing protocol processing step at the API level or specify a value 0 at an alias level, then <span class="ph">API Gateway</span> uses the value specified in this <span class="parmname">pg.endpoint.connectionTimeout</span> property.</div><div id="wwID0ERDDZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>If you do not specify any value for <span class="parmname">pg.endpoint.connectionTimeout</span>, then <span class="ph">API Gateway</span> uses the default value of 30 seconds.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ETEDZ" class="Table_Cell"><span class="uicontrol">Read Timeout (seconds)</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E4EDZ" class="Table_Cell">Specifies the time interval (in seconds) after which a socket read attempt times out.</div><div id="wwID0EDFDZ" class="Table_Cell">The precedence of the Read Timeout configuration is as follows:</div><div id="wwID0EOFDZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>If you specify a value for the <span class="uicontrol">Read timeout</span> field in routing endpoint alias, then the <span class="uicontrol">Read timeout</span> value specified in the Endpoint alias section takes precedence over the timeout values defined at the API level and the global level.</div><div id="wwID0EJGDZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>If you specify a value 0 for the <span class="uicontrol">Read timeout</span> field in routing endpoint alias, then <span class="ph">API Gateway</span> uses the value specified in the <span class="uicontrol">Read Timeout</span> field in the routing protocol processing step of an API. The Read Timeout value specified at an API level takes precedence over the global configuration.</div><div id="wwID0EIHDZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>If you specify a value 0 or do not specify a value for the <span class="uicontrol">Read timeout</span> field in the routing protocol processing step at the API level or specify a value 0 at an alias level, then <span class="ph">API Gateway</span> uses the value specified in this <span class="parmname">pg.endpoint.readTimeout</span> property.</div><div id="wwID0EIIDZ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>If you do not specify any value for <span class="parmname">pg.endpoint.readTimeout</span>, then <span class="ph">API Gateway</span> uses the default value of 30 seconds.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EKJDZ" class="Table_Cell"><span class="uicontrol">Pass WS-Security Headers</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUJDZ" class="Table_Cell">This is applicable for SOAP-based APIs.</div><div id="wwID0E1JDZ" class="Table_Cell">Selecting this indicates that <span class="ph">API Gateway</span> should pass the WS-Security headers of the incoming requests to the native API.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0EJKDZ" class="Table_Cell"><span class="uicontrol">SSL Configuration</span>. Configures keystore, key alias, and truststore for securing connections to native APIs.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZKDZ" class="Table_Cell"><span class="uicontrol">Keystore Alias </span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EDLDZ" class="Table_Cell">Specifies the keystore alias configured in <span class="ph">API Gateway</span>. This value (along with the value of Client Certificate Alias) is used for performing SSL client authentication.</div><div id="wwID0ENLDZ" class="Table_Cell">Lists all available keystores. If you have not configured any keystore, the list is empty.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EXLDZ" class="Table_Cell"><span class="uicontrol">Key Alias</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EBMDZ" class="Table_Cell">Specifies the alias for the private key, which must be stored in the keystore specified by the keystore alias.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ELMDZ" class="Table_Cell"><span class="uicontrol">Truststore Alias </span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EVMDZ" class="Table_Cell">Specifies the alias for the truststore that contains the list of CA certificates that API Gateway uses to validate the trust relationship with the native API.</div><div id="wwID0E2MDZ" class="Table_Cell">If you do not configure any truststore alias, it implies that <span class="ph">API Gateway</span> does not validate the certificates provided by native APIs.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0EKNDZ" class="Table_Cell"><span class="uicontrol">Service Registry Configuration</span></div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E1NDZ" class="Table_Cell"><span class="uicontrol">Service Discovery Endpoint Parameter</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EEODZ" class="Table_Cell">Values required for constructing the discovery service URI.</div><div id="wwID0EQODZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Parameter</span>: An alias that you have included in the discovery service URI while adding the service registry to API Gateway.</div><div id="wwID0EHPDZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Value</span>: Specifies a value with a syntax. The alias specified in Path Parameter is substituted with this value when invoking the discovery service.</div><div id="wwID0E6PDZ" class="Table_Cell">For example: if the service registry configuration of the service registry that you have selected in <span class="uicontrol">Endpoint URI</span> has <span class="uicontrol">Service discovery path</span> set to <span class="userinput">/catalog/service/{serviceName}</span> (and the <span class="userinput">{serviceName}</span> alias is intended for passing the service name), you must enter <span class="userinput">{serviceName}</span> as <span class="uicontrol">Parameter</span> and the name of the service as <span class="uicontrol">Value</span>.</div><div id="wwID0EBRDZ" class="Table_Cell">As the <span class="uicontrol">Value</span> field supports variable framework, you can make use of the available variables as path parameters.</div><div id="wwID0ELRDZ" class="Table_Cell">For example, if you provide a parameter as <span class="userinput">{serviceName}</span>( in <span class="uicontrol">Service discovery path</span> while you define a service register) and the corresponding values for the path parameter as <span class="codeph">${request.header.var1}</span>, the value in var 1 retrieved from the request header will substitute the service name.</div><div id="wwID0E4RDZ" class="Table_Cell">For details about the variables available in <span class="ph">API Gateway</span>, see 
    <a href="../yai-webhelp/co-variable_extraction.html#wwID0E1BA1"
   
     title="Variable Framework"
    ><span class="heading-page">Variables Available in API Gateway</span></a>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0EXSDZ" class="Table_Cell"><span class="uicontrol">Rule</span>. Defines the routing decisions based on one of the following routing options.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHTDZ" class="Table_Cell"><span class="uicontrol">Route Using</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ESTDZ" class="Table_Cell">Defines the dynamic URL based on the HTTP header value sent by the client or the context variable value.</div><div id="wwID0EYTDZ" class="Table_Cell">Select one of the following:</div><div id="wwID0EDUDZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Header</span>: Select and specify the <span class="uicontrol">Name</span> required. This header name is configured by the API provider and is used to decide the routing decisions at the API level. The request message must be routed to the dynamic URL generated from the HTTP header value.</div><div id="wwID0E4UDZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Context</span>: The API providers must provide IS service in the policy, Invoke webMethods Integration Server. IS service would perform custom manipulations and set the value for the Context Variable ROUTING_ENDPOINT. <span class="ph">API Gateway</span> takes this ROUTING_ENDPOINT value as the native endpoint value and performs the routing.</div><div id="wwID0EXVDZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Name</span>. This field is displayed only when you select <span class="uicontrol">Header</span> as the routing method. Type a name for the Routing header. API Gateway expects this header name in the incoming request that invokes the API.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EXWDZ" class="Table_Cell"><span class="uicontrol">Route To</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EBXDZ" class="Table_Cell">Specifies the endpoint URI of native services in a pool to which the requests are routed.</div><div id="wwID0EHXDZ" class="Table_Cell">Provide the following information:</div><div id="wwID0ESXDZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Endpoint URI </span>. Specifies the URI of the native API endpoint to route the request to. You can use service registries in a similar manner as described in the main <span class="uicontrol">Endpoint URI</span> above.</div><div id="wwID0EMYDZ" class="List_1_Continued">As this property supports variable framework, you can make use of the available variables. For example, you can configure the endpoint URI using hard coded URL, simple alias, endpoint alias, and variable syntax or any of these combination. If you define the endpoint URI as <span class="codeph">http://${myAliasHost}:${request.headers.nativeport}/${sys:resource-path}</span>, where the <span class="codeph">${myAliasHost}</span> variable syntax is used to define the simple alias and the <span class="codeph">${request.headers.nativeport}</span> variable syntax is used to define the native port based on the request.</div><div id="wwID0E5YDZ" class="List_1_Continued">You can also use the system-defined alias <span class="codeph">${sys:dyn-Endpoint}</span>. When you use the system-defined alias, the variables are replaced at runtime by the <span class="uicontrol">Header</span> value or the <span class="uicontrol">Context</span> value, selected as the <span class="uicontrol">Route To</span> option.</div><div id="wwID0EUZDZ" class="List_1_Continued">Consider the following URL with the system-defined alias:</div><div id="wwID0EZZDZ" class="Lines_1"> <br /><span class="codeph">http://HOSTNAME:5555/rest/com/<br />softwareag/mediator/samples/dynamicRouting/<br />validateDynamicURI/${sys:dyn-Endpoint}</span></div><div id="wwID0EE1DZ" class="List_1_Continued">Now, if the incoming request has <span class="uicontrol">Header</span> value as <span class="inlinetitle">resource</span>, the <span class="codeph">${sys:dyn-Endpoint}</span> alias in the URL is replaced by the <span class="uicontrol">Header</span> value and the effective URL is</div><div id="wwID0E11DZ" class="Lines_1"> <br /><span class="codeph">http://HOSTNAME:5555/rest/com/<br />softwareag/mediator/samples/dynamicRouting/validateDynamicURI/<br />resource</span>.</div><div id="wwID0EG2DZ" class="List_1_Continued">For details about the variables available in <span class="ph">API Gateway</span>, see 
    <a href="../yai-webhelp/co-variable_extraction.html#wwID0E1BA1"
   
     title="Variable Framework"
    ><span class="heading-page">Variables Available in API Gateway</span></a>.</div><div id="wwID0E22DZ" class="Note_1"><span class="Bold">Note:<br /></span>If you use endpoint alias, make sure the endpoint alias is created before you define it in the policy. For example, if you define ${alias} syntax in the policy before creating the <span class="userinput">alias</span> as endpoint alias, <span class="ph">API Gateway</span> considers ${alias} as custom variable or simple alias and tries to resolve against those. So in that case, after creating endpoint alias you have to edit and save the API or policy to associate ${alias} syntax with the endpoint alias.</div><div id="wwID0E13DZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">HTTP Method</span>. This applicable to REST-based APIs. Specifies the available routing methods: <span class="uicontrol">GET</span>, <span class="uicontrol">POST</span>, <span class="uicontrol">PUT</span>, <span class="uicontrol">DELETE</span>, and <span class="uicontrol">CUSTOM</span> (default).</div><div id="wwID0EE5DZ" class="List_1_Continued">When <span class="uicontrol">CUSTOM</span> is selected, the HTTP method in the incoming request is sent to the native service. When other methods are selected, the selected method is used in the request sent to the native service.</div><div id="wwID0EP5DZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">HTTP Connection Timeout (seconds)</span>. Specifies the time interval (in seconds) after which a connection attempt times out.</div><div id="wwID0EF6DZ" class="List_1_Continued">The precedence of the Connection Timeout configuration is as follows:</div><div id="wwID0EQ6DZ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>If you specify a value for the <span class="uicontrol">Connection timeout</span> field in routing endpoint alias, then the <span class="uicontrol">Connection timeout</span> value specified in the Endpoint alias section takes precedence over the timeout values defined at the API level and the global level.</div><div id="wwID0ELAEZ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>If you specify a value 0 for the <span class="uicontrol">Connection timeout</span> field in routing endpoint alias, then <span class="ph">API Gateway</span> uses the value specified in the <span class="uicontrol">Connection timeout</span> field in the routing protocol processing step of an API. The Read Timeout value specified at an API level takes precedence over the global configuration.</div><div id="wwID0EKBEZ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>If you specify a value 0 or do not specify a value for the <span class="uicontrol">Connection timeout</span> field in the routing protocol processing step at the API level or specify a value 0 at an alias level, then <span class="ph">API Gateway</span> uses the value specified in this <span class="parmname">pg.endpoint.connectionTimeout</span> property.</div><div id="wwID0EKCEZ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>If you do not specify any value for <span class="parmname">pg.endpoint.connectionTimeout</span>, then <span class="ph">API Gateway</span> uses the default value of 30 seconds.</div><div id="wwID0EIDEZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Read Timeout (seconds)</span>. Specifies the time interval (in seconds) after which a socket read attempt times out.</div><div id="wwID0E5DEZ" class="List_1_Continued">The precedence of the Read Timeout configuration is as follows:</div><div id="wwID0EJEEZ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>If you specify a value for the <span class="uicontrol">Read timeout</span> field in routing endpoint alias, then the <span class="uicontrol">Read timeout</span> value specified in the Endpoint alias section takes precedence over the timeout values defined at the API level and the global level.</div><div id="wwID0EEFEZ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>If you specify a value 0 for the <span class="uicontrol">Read timeout</span> field in routing endpoint alias, then <span class="ph">API Gateway</span> uses the value specified in the <span class="uicontrol">Read Timeout</span> field in the routing protocol processing step of an API. The Read Timeout value specified at an API level takes precedence over the global configuration.</div><div id="wwID0EDGEZ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>If you specify a value 0 or do not specify a value for the <span class="uicontrol">Read timeout</span> field in the routing protocol processing step at the API level or specify a value 0 at an alias level, then <span class="ph">API Gateway</span> uses the value specified in this <span class="parmname">pg.endpoint.readTimeout</span> property.</div><div id="wwID0EDHEZ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>If you do not specify any value for <span class="parmname">pg.endpoint.readTimeout</span>, then <span class="ph">API Gateway</span> uses the default value of 30 seconds.</div><div id="wwID0EBIEZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">SSL Configuration</span>. Configures keystore, key alias, and truststore for securing connections to native APIs. Provide the following information:</div><div id="wwID0E3IEZ" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Keystore Alias</span>. Specifies the keystore alias configured in <span class="ph">API Gateway</span>. This value (along with the value of Client Certificate Alias) is used for performing SSL client authentication.</div><div id="wwID0EWJEZ" class="List_2_Continued">Lists all available keystores. If you have not configured any keystore, the list is empty.</div><div id="wwID0E3JEZ" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Key Alias</span>. Specifies the alias for the private key, which must be stored in the keystore specified by the keystore alias.</div><div id="wwID0ESKEZ" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Truststore Alias</span>. Specifies the alias for the truststore that contains the list of CA certificates that API Gateway uses to validate the trust relationship with the native API.</div><div id="wwID0EILEZ" class="List_2_Continued">If you do not configure any truststore alias, it implies that <span class="ph">API Gateway</span> does not validate the certificates provided by native APIs.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E3LEZ" class="Table_Cell"><span class="uicontrol">SOAP Optimization Method </span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGMEZ" class="Table_Cell">This is applicable for SOAP-based APIs.</div><div id="wwID0EMMEZ" class="Table_Cell">Specifies the optimization methods that <span class="ph">API Gateway</span> can use to parse SOAP requests to the native API.</div><div id="wwID0EWMEZ" class="Table_Cell">Select one of the following options:</div><div id="wwID0EBNEZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">MTOM</span>. <span class="ph">API Gateway</span> uses the Message Transmission Optimization Mechanism (MTOM) to parse SOAP requests to the API.</div><div id="wwID0E2NEZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">SwA</span>. <span class="ph">API Gateway</span> uses the SOAP with Attachment (SwA) technique to parse SOAP requests to the API.</div><div id="wwID0EVOEZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">None</span>. <span class="ph">API Gateway</span> does not use any optimization method to parse the SOAP requests to the API. This is selected by default.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EVPEZ" class="Table_Cell"><span class="uicontrol">Pass WS-Security Headers</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E6PEZ" class="Table_Cell">This is applicable for SOAP-based APIs.</div><div id="wwID0EFQEZ" class="Table_Cell">Selecting this indicates that <span class="ph">API Gateway</span> should pass the WS-Security headers of the incoming requests to the native API.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>