<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Application Metrics</title><link rel="Prev" href="co-monitoring_apigw_prometheus_metrics.html" title="Previous" /><link rel="Next" href="re-monitoring_apigw_availability_metrics.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/re-monitoring_gtw_appln_metrics.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pfKZHmHcsykRSEYyenpWxBQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/re-monitoring_gtw_appln_metrics.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.032.html#wwconnect_header">Administering API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.078.html#wwconnect_header">Operating API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/co-overview_monitoring.html#wwconnect_header">Monitoring API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/co-monitoring_node_level.html#wwconnect_header">Node-level Monitoring</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/co-monitoring_gtw.html#wwconnect_header">Monitoring API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Application Metrics</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EKGBQ" class="Heading_5">Application Metrics</div><div id="wwID0EZGBQ" class="Body">Monitor the following Prometheus metrics to analyze <span class="ph">API Gateway</span> health.</div><div id="wwID0EIHBQ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Threads statistics</div><div id="wwID0E2HBQ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Service errors</div><div id="wwID0EOIBQ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Memory usage of JVM</div><div id="wwID0EBJBQ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>HTTP or HTTPS requests</div><div id="wwID0EVJBQ" class="Note"><span class="Bold">Note:<br /></span>The threshold values, configurations, and severities that are mentioned throughout this section are the guidelines that <span class="ph">Software&nbsp;AG</span> suggests for an optimal performance of <span class="ph">API Gateway</span>. You can modify these thresholds or define actions based on your operational requirements.</div><div id="wwID0ESKBQ" class="Body_-_Note_-_not_first">For details about how to generate thread dump, heap dump and log locations, see 
    <a href="../yai-webhelp/re-troubleshooting_monitoring_apigw.html#wwID0EDVFR"
   
     title="Troubleshooting: Monitoring API Gateway"
    ><span class="heading-page">Troubleshooting: Monitoring API Gateway</span></a>.</div><div id="wwID0EFLBQ" class="Body">If the metrics return an exceeded threshold value, consider the severity as mentioned and perform the possible actions that <span class="ph">Software&nbsp;AG</span> recommends to identify and debug the problem and contact <span class="ph">Software&nbsp;AG</span> for further support.</div><div id="wwID0ETLBQ" class="Body"><span class="inlinetitle">Monitor the Threads statistics </span></div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 27%"><div id="wwID0EXMBQ" class="Table_Cell_Head">Metric</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 72.9%"><div id="wwID0E4MBQ" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EQNBQ" class="Table_Cell"><span class="inlinetitle">sag_is_service_threads</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2NBQ" class="Table_Cell">Checks the percentage of total number of threads used for service execution where the threads are obtained from the server thread pool.</div><div id="wwID0EBOBQ" class="Table_Cell">If the threads usage is above the recommended threshold value for more than <span class="codeph">15</span> minutes, consider the severity as mentioned:</div><div id="wwID0EROBQ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Above <span class="emphasis">80%</span> threshold, Severity: <span class="emphasis">ERROR</span></div><div id="wwID0EOPBQ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Above <span class="emphasis">90%</span> threshold, Severity: <span class="emphasis">CRITICAL</span></div><div id="wwID0EMQBQ" class="Table_Cell">The steps to identify the causes of higher threads usage are as follows:</div><div id="wwID0EXQBQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Identify the process that consumes the highest number of threads.</div><div id="wwID0EKRBQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Generate the thread dump.</div><div id="wwID0E4RBQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Analyze thread dump to identify the thread locks.</div><div id="wwID0EQSBQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>Analyze the logs of all API Gateway instances in the node.</div></td></tr></table></div><div id="wwID0EJTBQ" class="Body"><span class="inlinetitle">Monitor the Service errors</span></div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 27.1%"><div id="wwID0ENUBQ" class="Table_Cell_Head">Metric</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 72.8%"><div id="wwID0ETUBQ" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGVBQ" class="Table_Cell"><span class="inlinetitle">sag_is_number_​service_errors</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ERVBQ" class="Table_Cell">Checks the number of services that results in errors or exceptions.</div><div id="wwID0EXVBQ" class="Table_Cell">If service errors are encountered, consider the severity as <span class="emphasis">ERROR</span>.</div><div id="wwID0ECWBQ" class="Table_Cell">The steps to identify the causes of service errors are as follows:</div><div id="wwID0ENWBQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Check the cluster status of <span class="ph">API Gateway</span> using the following REST endpoint: <span class="apiname">GET</span> <span class="filepath">/rest/apigateway/health/engine</span> to know if API Gateway is healthy and is in a cluster mode.</div><div id="wwID0ENXBQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Check the server logs for any exception from <span class="filepath_002c_varname">SAGInstallDirectory</span><span class="filepath">\IntegrationServer\instances\</span><span class="filepath_002c_varname">instance_name</span><span class="filepath">\logs\server.log</span>.</div></td></tr></table></div><div id="wwID0EWYBQ" class="Body"><span class="inlinetitle">Monitor the Memory usage of JVM </span></div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 26.8%"><div id="wwID0E1ZBQ" class="Table_Cell_Head">Metric</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 73.1%"><div id="wwID0EA1BQ" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ET1BQ" class="Table_Cell"><span class="inlinetitle">sag_is_used_​memory_bytes</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E51BQ" class="Table_Cell">Checks the percentage of total used memory of JVM.</div><div id="wwID0EE2BQ" class="Table_Cell">If the memory usage is above the recommended threshold value for more than <span class="emphasis">15</span> minutes, consider the severity as mentioned:</div><div id="wwID0EV2BQ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Above <span class="emphasis">80%</span> threshold, Severity: <span class="emphasis">ERROR</span></div><div id="wwID0ES3BQ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Above <span class="emphasis">90%</span> threshold, Severity: <span class="emphasis">CRITICAL</span></div><div id="wwID0EQ4BQ" class="Table_Cell">The steps to identify the causes of higher memory usage of JVM are as follows:</div><div id="wwID0E24BQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Check the cluster status of <span class="ph">API Gateway</span> using the following REST endpoint: <span class="apiname">GET</span> <span class="filepath">/rest/apigateway/health/engine</span> to know if API Gateway is healthy and is in a cluster mode.</div><div id="wwID0E25BQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Generate the heap dump.</div><div id="wwID0EO6BQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Analyze the logs of all the <span class="ph">API Gateway</span> instances.</div><div id="wwID0EFACQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>Identify the server that has an issue and restart the server if required.</div><div id="wwID0EYACQ" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>Perform the following actions after restarting the server:</div><div id="wwID0EQBCQ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span>Check for the readiness of <span class="ph">API Gateway</span>.</div><div id="wwID0EHCCQ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span>Check the cluster status of API Gateway using the following REST endpoint: <span class="apiname">GET</span><span class="filepath"> /rest/apigateway/health/engine</span> to know if API Gateway is healthy and is in a cluster mode.</div><div id="wwID0ECDCQ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span>Check the resource availability of all the required system resources like memory, heap, and disk.</div><div id="wwID0EVDCQ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>d. </span></span>Check API Data Store connectivity with <span class="ph">API Gateway</span> server.</div><div id="wwID0EMECQ" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>e. </span></span>Check the Terracotta client logs for errors in Terracotta communication for a cluster set up.</div></td></tr></table></div><div id="wwID0EHFCQ" class="Body"><span class="inlinetitle">Monitor the HTTP or HTTPS requests </span></div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 26.6%"><div id="wwID0ELGCQ" class="Table_Cell_Head">Metric</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 73.3%"><div id="wwID0ERGCQ" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EEHCQ" class="Table_Cell"><span class="inlinetitle">sag_is_http_requests</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EPHCQ" class="Table_Cell">Checks the percentage of total number of HTTP or HTTPS requests since the last statistics poll.</div><div id="wwID0EVHCQ" class="Table_Cell">The statistics poll interval is controlled by the <span class="parmname">watt.server.stats.pollTime</span> server configuration parameter and the default interval is <span class="emphasis">60</span> seconds.</div><div id="wwID0EFICQ" class="Table_Cell">If the total number of HTTP or HTTPS requests since the last statistics poll is above the threshold limit that is based on the Throughput Per Second (TPS) value, consider the severity as <span class="emphasis">ERROR</span>.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>