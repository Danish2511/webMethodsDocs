<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Infrastructure Metrics</title><link rel="Prev" href="re-monitoring_apids_appln_metrics.html" title="Previous" /><link rel="Next" href="re-monitoring_apids_container_metrics.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/re-monitoring_apids_infra_metrics.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN1ME0l_002bRkc7fK6Rg0MSpXbw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/re-monitoring_apids_infra_metrics.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.032.html#wwconnect_header">Administering API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.078.html#wwconnect_header">Operating API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/co-overview_monitoring.html#wwconnect_header">Monitoring API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/co-monitoring_node_level.html#wwconnect_header">Node-level Monitoring</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/co-monitoring_apigateway_datastore.html#wwconnect_header">Monitoring API Data Store</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Infrastructure Metrics</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0ECUIR" class="Heading_5">Infrastructure Metrics</div><div id="wwID0ERUIR" class="Body">Infrastructure metrics include system metrics and container metrics. For information about container metrics, see 
    <a href="../yai-webhelp/re-monitoring_apids_container_metrics.html#wwID0EXCKR"
   
     title="Container Metrics"
    ><span class="heading-page">Container Metrics</span></a>.</div><div id="wwID0ECVIR" class="Body"><span class="inlinetitle">System Metrics</span></div><div id="wwID0EMVIR" class="Body">Monitor the following system metrics to analyze API Data Store health.</div><div id="wwID0EXVIR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>CPU usage</div><div id="wwID0EKWIR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Disk usage</div><div id="wwID0E4WIR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Memory usage</div><div id="wwID0ERXIR" class="Body"><span class="inlinetitle">Monitor the CPU usage</span></div><div id="wwID0E2XIR" class="Body">To ensure that CPU is not over utilized, you must monitor the CPU health regularly. You can monitor the CPU usage at two levels: process level and OS level. If the process level CPU is utilized beyond the threshold limits, you can share the load. However, if the OS level CPU has reached its limits, you must contact your IT team.</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 26.8%"><div id="wwID0E1YIR" class="Table_Cell_Head">Command / Metric</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 73.1%"><div id="wwID0EAZIR" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ENZIR" class="Table_Cell"><span class="codeph">curl -X GET http://localhost:9240​/_nodes/stats/process?pretty</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYZIR" class="Table_Cell">This command retrieves the CPU utilization by the API Data Store pods.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EC1IR" class="Table_Cell"><span class="codeph">$.nodes.</span><span class="codeph_002c_varname">nodeid</span><span class="codeph">​.process.cpu.percent</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ET1IR" class="Table_Cell">This JSON path expression retrieves the percentage of CPU usage by an API Data Store pod.</div><div id="wwID0EZ1IR" class="Table_Cell">If a pod is using <span class="emphasis">80%</span> of the CPU space for more than <span class="emphasis">15 </span>minutes, consider the severity as <span class="emphasis">WARNING</span> and perform the following steps to identify the causes of higher CPU usage.</div><div id="wwID0ET2IR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Identify the process that consumes the highest CPU.</div><div id="wwID0EG3IR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Generate the thread dump.</div><div id="wwID0EZ3IR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Analyze the thread dump to identify the thread locks.</div><div id="wwID0EO4IR" class="Table_Cell">If a pod is using <span class="emphasis">90%</span> of the CPU space for more than <span class="emphasis">15</span> minutes, look for the following Prometheus metrics:</div><div id="wwID0EE5IR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>elasticsearch_os_cpu_percent</div><div id="wwID0EX5IR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>elasticsearch_process_cpu_percent</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EQ6IR" class="Table_Cell"><span class="inlinetitle">elasticsearch_os_​cpu_percent</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EBAJR" class="Table_Cell">If elasticsearch_os_cpu_percent is more than <span class="emphasis">90%</span>, consider the severity as <span class="emphasis">CRITICAL</span> and perform the following steps to identify the causes of higher CPU usage.</div><div id="wwID0EWAJR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Restart the pod.</div><div id="wwID0EJBJR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Check the readiness and liveliness of the pod.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EDCJR" class="Table_Cell"><span class="inlinetitle">elasticsearch_process_​cpu_percent</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUCJR" class="Table_Cell">If elasticsearch_process_cpu_percent is more than <span class="emphasis">90%</span>, consider the severity as <span class="emphasis">CRITICAL</span> and add a new node to the cluster. To learn more about how to add a new API Data Store node, see 
    <a href="../yai-webhelp/ta-add_node_to_cluster.html#wwID0E66BM"
   
     title="Adding New Nodes to an Elasticsearch Cluster"
    ><span class="heading-page">Adding New Nodes to an Elasticsearch Cluster</span></a>.</div></td></tr></table></div><div id="wwID0EUDJR" class="Body"><span class="inlinetitle">Monitor the Disk usage</span></div><div id="wwID0E5DJR" class="Body">To ensure that all nodes have enough disk space, <span class="ph">Software&nbsp;AG</span> recommends to monitor the disk space regularly.</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 31.9%"><div id="wwID0ECFJR" class="Table_Cell_Head">Command</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 68%"><div id="wwID0EIFJR" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EVFJR" class="Table_Cell"><span class="codeph">curl -X GET http://localhost:9240​/_nodes/stats/fs</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EAGJR" class="Table_Cell">This command retrieves the disk space of the API Data Store nodes. It lists the disk space available in all nodes.</div><div id="wwID0EGGJR" class="Table_Cell">For more information about Elasticsearch node statistics, see 
    <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html"
   
     target="external_window"
    ><span class="heading-page">Elasticsearch documentation</span></a>.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2GJR" class="Table_Cell"><span class="codeph">$.nodes..fs.total.total_in_bytes</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EFHJR" class="Table_Cell">This JSON path expression retrieves the total disk space.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EPHJR" class="Table_Cell"><span class="codeph">$.nodes..fs.total.free_in_bytes</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZHJR" class="Table_Cell">This JSON path expression retrieves the free disk space.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EDIJR" class="Table_Cell"><span class="codeph">.nodes..fs.total.available_in_bytes</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ENIJR" class="Table_Cell">This JSON path expression retrieves the available disk space.</div></td></tr></table></div><div id="wwID0EXIJR" class="Body"><span class="inlinetitle">Disk-based shard allocations</span></div><div id="wwID0EAJJR" class="Note"><span class="Bold">Note:<br /></span>500GB(HA) / 150GB(single node) is used as an example for maximum data retention here.</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 25.2%"><div id="wwID0EQKJR" class="Table_Cell_Head">Command</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 74.7%"><div id="wwID0EWKJR" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EDLJR" class="Table_Cell"><span class="codeph">curl -X GET http://localhost:9240​/_cluster/settings?pretty</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ENLJR" class="Table_Cell">This command retrieves the configured disk-based shard allocations in API Data Store. To learn more about disk-based shard allocations, see 
    <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.13/modules-cluster.html#disk-based-shard-allocation"
   
     target="external_window"
    ><span class="heading-page">Elasticsearch documentation</span></a>.</div><div id="wwID0E4LJR" class="Table_Cell">The shard allocation is based on the thresholds known as <span class="codeph">Low</span>, <span class="codeph">High</span>, and <span class="codeph">Flood</span> watermark.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUMJR" class="Table_Cell">Shard allocation: <span class="codeph">Low</span></div><div id="wwID0E5MJR" class="Table_Cell"><span class="codeph">$.persitent.cluster.routing​.allocation.disk.​watermark.low</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EONJR" class="Table_Cell">The default threshold for this level is <span class="emphasis">80%</span>. Once the threshold is reached, API Data Store does not allocate new shards to nodes that have used more than 80% disk space. You can calculate if the disk usage is low by using the expression ( average disk usage of the API Data Store cluster / standalone). If the result of this expression exceeds the defined threshold (80%), the disk has reached the <span class="codeph">Low</span> stage. If your disk usage has reached <span class="codeph">low</span>, perform the following steps:</div><div id="wwID0EHOJR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Query the transaction event index size and verify if the index is above 525 GB(HA) / 175 GB(single node). If it is already breached, monitor if the purge scripts are running and the index size is decreasing.</div><div id="wwID0E1OJR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Verify if the size of each transaction event index is equal to the sum of used space (range of 25 GB). If this does not match, some other external items like increased logs size or heap dump are occupying a lot of space. Clear the logs and heap dump.</div><div id="wwID0ENPJR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Repeat the above steps until the transaction event index is less than 525 GB and the average disk usage of the cluster becomes less than 80%.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGQJR" class="Table_Cell">Shard allocation: <span class="codeph">High</span></div><div id="wwID0EQQJR" class="Table_Cell"><span class="codeph">$.persitent.cluster.routing​.allocation.disk.​watermark.high</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EARJR" class="Table_Cell">The default threshold for this level is <span class="emphasis">85%</span>. Once the threshold is reached, API Data Store attempts to relocate shards away from a node whose disk usage is above 85%. You can calculate if the disk usage is low by using the expression ( average disk usage of the API Data Store cluster / standalone). If the result of this expression exceeds the defined threshold (85%), the disk has reached the <span class="codeph">High</span> stage. If your disk usage has reached <span class="codeph">High</span>, perform the following steps:</div><div id="wwID0EZRJR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Query the transaction event index and verify if the index is above 525 GB(HA) / 175 GB(single node). If it is already breached, monitor if the purge scripts are running and the index size is decreasing.</div><div id="wwID0EMSJR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Verify if the size of each transaction event index is equal to the sum of used space (range of 25 GB). If this does not match, some other external items like increased logs size or heap dump are occupying a lot of space. Clear the logs and heap dump.</div><div id="wwID0E6SJR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Repeat the above steps until the transaction event index is less than 525 GB and the average disk usage of the cluster becomes less than 85%</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYTJR" class="Table_Cell">Shard allocation: <span class="codeph">Flood</span></div><div id="wwID0ECUJR" class="Table_Cell"><span class="codeph">$.persitent.cluster.routing​.allocation.disk.​watermark.flood</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ESUJR" class="Table_Cell">The default threshold for this level is <span class="emphasis">90%</span>. Once the threshold is reached, API Data Store enforces a read-only index block (index.blocks.read_only_allow_delete) on every index that has one or more shards allocated on the node that has at least one disk exceeding the flood stage. This is the last resort to prevent nodes from running out of disk space.</div><div id="wwID0E4UJR" class="Table_Cell">You can calculate if the disk usage is in flood stage, by using the expression ( average disk usage of the API Data Store cluster / standalone). If the result of this expression exceeds the defined threshold (90%), the disk is in the <span class="codeph">Flood</span> stage. If your disk usage has reached the <span class="codeph">Flood</span> stage, perform the following steps:</div><div id="wwID0ERVJR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Monitor the purging of data and ensure the purging happens and the disk space occupancy is reduced.</div><div id="wwID0EEWJR" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If this situation is due to a spike in the requests count and size, follow up with the customer to understand the reason for the sudden spike and inform the customer to compress the payload for transaction logging or not to store the request or response.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E4WJR" class="Table_Cell"><span class="codeph">curl -X GET http://localhost:9240​/_nodes/stats/</span><span class="codeph_002c_varname">metric</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ENXJR" class="Table_Cell">This command retrieves information about specific metrics like fs, http, os, process, and so on.</div><div id="wwID0ETXJR" class="Table_Cell">For more information about the corresponding metrics, see 
    <a href="https://www.elastic.co/guide/index.html"
   
     target="external_window"
    ><span class="heading-page">Elasticsearch documentation</span></a>.</div></td></tr></table></div><div id="wwID0EJYJR" class="Body"><span class="inlinetitle">Monitor the Memory usage</span></div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 26.8%"><div id="wwID0ENZJR" class="Table_Cell_Head">Command</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 73.1%"><div id="wwID0ETZJR" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EA1JR" class="Table_Cell"><span class="codeph">http://HOST:9240/​_nodes/</span><span class="codeph_002c_varname">nodeid</span><span class="codeph">/stats/os</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ES1JR" class="Table_Cell">This URL retrieves the memory status utilized by the API Data Store pods.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E31JR" class="Table_Cell"><span class="codeph">http:</span><span class="codeph_002c_varname">URL</span><span class="codeph">/nodes?​v&amp;full_id=true&amp;h=id,name,ip</span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EN2JR" class="Table_Cell">This URL retrieves the node id of the corresponding API. This returns the node id, node name, and the node IP address.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EX2JR" class="Table_Cell"><span class="codeph">$.nodes.</span><span class="codeph_002c_varname">nodeid</span><span class="codeph">​.os.mem.free_percent </span></div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EI3JR" class="Table_Cell">This JSON expression retrieves the percentage of memory that is free.</div><div id="wwID0EO3JR" class="Table_Cell">If a pod is using <span class="emphasis">85%</span> of the available memory, consider the severity as <span class="emphasis">WARNING</span>, and identify the process that consumes more memory and generate the heap dump.</div><div id="wwID0E53JR" class="Table_Cell">If a pod is using <span class="emphasis">90%</span> of the available memory, consider the severity as <span class="emphasis">CRITICAL</span>, and perform the following steps to identify the reason.</div><div id="wwID0ET4JR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Identify the process that consumes more memory.</div><div id="wwID0EG5JR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Generate the heap dump.</div><div id="wwID0EZ5JR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Restart the pod.</div><div id="wwID0EM6JR" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>Check the readiness and liveliness of the pod.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>