<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>OAuth Authentication in API Gateway</title><link rel="Prev" href="re-iam_identify_authorize_app.html" title="Previous" /><link rel="Next" href="ta-oauth_local_oauth_server.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/co-oauth_usecase_workflow.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pNBIpX_002fe7r0FY_002bXQ9F6GyWA" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/co-oauth_usecase_workflow.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.503.html#wwconnect_header">Using API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.535.html#wwconnect_header">Implement APIs</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_manage_policies.html#wwconnect_header">Policies</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/gtw_iam_policies.html#wwconnect_header">Identify and Access</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/re-iam_identify_authorize_app.html#wwconnect_header">Identify &amp; Authorize</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">OAuth Authentication in API Gateway</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EQKWX" class="Heading_5">OAuth Authentication in API Gateway</div><div id="wwID0EYKWX" class="Body">The Open Authorization is a flexible authorization framework for securing application access to protected resources of APIs.<span class="ph">API Gateway</span> can connect to the OAuth server of your choice to authorize client applications. <span class="ph">API Gateway</span> also includes an in-built authorization server that supports OAuth 2.0 for securing your APIs. This article explains how to use the OAuth 2.0 functionality in <span class="ph">API Gateway</span>.</div><div id="wwID0EKLWX" class="Body">The OAuth 2.0 authorization framework enables a third-party application to obtain limited access to an HTTP service, either on behalf of a resource owner by orchestrating an approval interaction between the resource owner and the HTTP service, or by allowing the third-party application to obtain access on its own behalf. For details, see 
    <a href="https://tools.ietf.org/html/rfc6749"
   
     target="external_window"
    ><span class="heading-page">https://tools.ietf.org/html/rfc6749</span></a>.</div><div class="ww_skin_page_overflow"><div id="wwID0E1LWX" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/oauth_concept.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 191px; max-width: 504px; top: 0pt" alt="OAuth authentication" /></div></div><div id="wwID0EKMWX" class="Body">OAuth adds a new layer called Authorization Layer for enabling access for protected information for the clients. Unlike the OAuth 1.0 protocol, OAuth 2.0 provides a rich authorization framework (not a protocol) with well-defined security properties. However, as a rich and highly extensible framework with many optional components, on its own, this specification is likely to produce a wide range of non-interoperable implementations. In addition, this specification leaves a few required components partially or fully undefined (for example, client registration, authorization server capabilities, endpoint discovery). Without these components, clients must be manually and specifically configured against a specific authorization server and resource server in order to interoperate.</div><div id="wwID0EPMWX" class="Body">The following diagram depicts the abstract flow of OAuth 2.0 Authorization framework. OAuth defines four roles: Resource Owner, Resource Server, Client, and Authorization Server.</div><div class="ww_skin_page_overflow"><div id="wwID0EUMWX" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/oauth_roles.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 232px; max-width: 504px; top: 0pt" alt="Abstract flow OAuth framework" /></div></div><div id="wwID0EENWX" class="Body"><span class="inlinetitle">Roles</span></div><div id="wwID0EUNWX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="term">Resource Owner </span>(or the end user). This is the holder of the protected resources that the client application accesses. The resource owner is typically a person (usually the end user), but could also be an application.</div><div id="wwID0EKOWX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="term">Resource Server</span> (or <span class="ph">API Gateway</span>). This is the server that stores the protected resources the application is trying to access and is capable of accepting and responding to protected resource requests using access tokens. API Gateway acts as a resource server.</div><div id="wwID0ECPWX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="term">Client Application</span> (or the Client). This is the application that is requesting access to protected resources on behalf of the resource owner and with its authorization.</div><div id="wwID0EYPWX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="term">Authorization Server</span>. This is the server that acts as an interface between the client application and end user, authenticates the end user, and issues access tokens to the clients after proper authorization. API Gateway can be configured to act as an OAuth 2.0 authorization server. You can configure API Gateway for use with a third-party OAuth 2.0 authorization server, such as OKTA and PingFederate.</div><div id="wwID0EPQWX" class="Body">Resource Server and Authorization Server interact with each other to verify the access tokens. There can be various levels of these interactions (3-legged OAuth, 4-legged OAuth, and so on). <span class="ph">API Gateway</span> can be used as an authorization server and as a resource server.</div><div id="wwID0EZQWX" class="Body"><span class="inlinetitle">Clients can be of following types:</span></div><div id="wwID0EJRWX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="term">Confidential</span>. A confidential client is an application that is capable of keeping a client password confidential to the world. This client password is assigned to the client app by the authorization server. This password is used to identify the client to the authorization server, to avoid fraud. An example of a confidential client is a web app, where no one but the administrator can get access to the server, and see the client password.</div><div id="wwID0E6RWX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="term">Public</span>. A public client is an application that is not capable of keeping a client password confidential. For instance, a mobile phone application or a desktop application that has the client password embedded inside it. Such an application could get cracked, and this could reveal the password. The same is true for a JavaScript application running in the users browser. The user could use a JavaScript debugger to look into the application, and see the client password.</div><div id="wwID0E4SWX" class="Section_Title">API Gateway as a Resource Server</div><div id="wwID0ECTWX" class="Body">When <span class="ph">API Gateway</span> acts as a resource server, it hosts the protected resources, accepts, and responds to the client applications' requests that include an access token. The client application sends the access token in the Authorization request header field using the Bearer authentication scheme. The resource server validates the access token locally or remotely if it cannot validate locally.</div><div id="wwID0EMTWX" class="Body">If the token is valid and the client application has privileges to access the protected resources, the resource server executes the request. If the access token is invalid, it rejects the request.</div><div id="wwID0EZTWX" class="Section_Title"><span class="ph">API Gateway</span> as an Authorization Server</div><div id="wwID0ECUWX" class="Body">When <span class="ph">API Gateway</span> acts as an authorization server, it receives authorization requests from client applications. The authorization server handles the interactions between the client application, resource server, and resource owner for approval of the request.</div><div id="wwID0EMUWX" class="Body">As an authorization server <span class="ph">API Gateway</span> issues tokens to client applications on behalf of a resource owner for use in authenticating subsequent API calls to the resource server. The resource server hosts the protected resources, and can accept or respond to the protected resource requests using access tokens. If the client application is authorized to access the protected resources, the resource server executes the request. The authorization server retains the information about the access tokens it issues, including the user information. When a client presents an access token to the resource server, the resource server sends the token to the authorization server to ensure that the token is valid and that the requested service is within the scope for which the access token was issued. A <span class="term">scope</span> is the definition of the resources that the client application can access on behalf of a resource owner. If the client application does not have privileges to access the resources, the resource server rejects the request.</div><div id="wwID0ECVWX" class="Section_Title">Using <span class="ph">API Gateway</span> with an External Authorization Server</div><div id="wwID0EMVWX" class="Body">When <span class="ph">API Gateway</span> is the resource server, you must specify an authorization server. As an alternative to using <span class="ph">API Gateway</span> as the authorization server, you can use a third-party server as the authorization server. This allows <span class="ph">API Gateway</span> to validate access tokens issued by third-party servers and also allow to dynamically create clients in the third-party server.</div><div id="wwID0E5VWX" class="Note"><span class="Bold">Note:</span>&nbsp;</div><div id="wwID0EYWWX" class="List_1_-_Note"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Before you configure <span class="ph">API Gateway</span> to use a third-party authorization server, make sure that the authorization server is compliant with the RFC 7662, OAuth 2.0 token introspection.</div><div id="wwID0EPXWX" class="List_1_-_Note_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>From <span class="ph">API Gateway</span> release 10.3 onwards <span class="ph">API Gateway</span> supports multiple authorization servers.</div><div id="wwID0EMYWX" class="Body">To use an external authorization server, you must configure your third-party authorization server. This includes, but is not limited to, the following:</div><div id="wwID0EXYWX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>To introspect the token, you should have a JWKS URI or you should create a client account that <span class="ph">API Gateway</span> uses to call the authorization server's introspection endpoint.</div><div id="wwID0EOZWX" class="List_1_Continued">Make a note of the client_id and client_secret values. You provide this information as part of defining the external authorization server alias for the <span class="ph">API Gateway</span> resource server.</div><div id="wwID0EYZWX" class="List_1_Continued">You can validate the JWT of the external authorization server using one of the following ways in <span class="ph">API Gateway</span>:</div><div id="wwID0EF1WX" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Using RSA</span>. The external authorization server's signature in the JWT is verified by using the certificate in the JWKS URI or the truststore defined in the local introspection configuration.</div><div id="wwID0EZ1WX" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Using HMAC</span>. If the authorization server uses HMAC algorithm , that means the signature validation of the JWT is performed using a shared key between the authorization server and <span class="ph">API Gateway</span>. You must specify the HMAC shared secret when creating the strategy of the an application. The HMAC shared secret in the application will be used to validate the authorization server's signature present in JWT. Make a note of the URL for the introspection endpoint. You provide this information as part of defining the external authorization server alias in the <span class="ph">API Gateway</span> resource server.</div><div id="wwID0EW2WX" class="List_1_Continued">Make a note of the URL for the introspection endpoint. You provide this information as part of defining the external authorization server alias in the <span class="ph">API Gateway</span> resource server.</div><div id="wwID0EB3WX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Create the required scopes.</div><div id="wwID0EU3WX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Configure an alias to the authorization server.</div><div id="wwID0EI4WX" class="Body">Currently, <span class="ph">API Gateway</span>, by default, can be used with the following third-party authorization servers, but are not limited to, that are RFC 7662, OAuth 2.0 token introspection compliant:</div><div id="wwID0EY4WX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Okta</div><div id="wwID0EL5WX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>PingFederate</div><div id="wwID0E65WX" class="Body">You can also use other third-party authorization servers like Google, keycloak, and so on.</div><div id="wwID0EM6WX" class="Section_Title">Authorizations for applications created from API Portal</div><div id="wwID0ER6WX" class="Body">When you create applications through API Portal, you must specify the required authorization server using the <span class="uicontrol">watt.server.oauth.authServer.alias</span> settings in the Administration section of API Gateway.</div><div id="wwID0E26WX" class="Body">If API Gateway is the authorization server, then provide <span class="userinput">local</span> as the value of the <span class="uicontrol">watt.server.oauth.authServer.alias</span> setting. Else, provide the name of the corresponding authorization server. For information on extended settings, see 
    <a href="../yai-webhelp/gtw_configure_extended_settings.html#wwID0ESVOR"
   
     title="Configuring Extended Settings"
    ><span class="ph_002c_heading-page">Configuring Extended Settings</span></a>.</div><div id="wwID0EBBXX" class="Section_Title">OAuth Authorization Workflow</div><div id="wwID0EGBXX" class="Body">The flow of authorization requests and responses between the end user, client application, authorization server, and resource server is as depicted in the following figure.</div><div class="ww_skin_page_overflow"><div id="wwID0ELBXX" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/workflow_oauth.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 302px; max-width: 603px; top: 0pt" alt="OAuth workflow" /></div></div><div id="wwID0E6BXX" class="Body">The OAuth authorization workflow is as follows:</div><div id="wwID0EKCXX" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>The client sends user authentication request to the authorization server (local or external) to obtain an access token.</div><div id="wwID0E4CXX" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>The authorization server validates the request, wuthenticates the client and generates an access token for the client.</div><div id="wwID0EQDXX" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>The client uses this access token to send HTTP requests to <span class="ph">API Gateway</span>.</div><div id="wwID0EHEXX" class="Numbered_1_Continued"><span class="ph">API Gateway</span> then performs the following:</div><div id="wwID0EVEXX" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>a. </span></span>Identifies the application using the clientId.</div><div id="wwID0EIFXX" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>b. </span></span>Validates the token locally or remotely if it is not possible locally.</div><div id="wwID0E2FXX" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>c. </span></span>Checks if the requested resource is part of the scopes in the token.</div><div id="wwID0EOGXX" class="Numbered_2"><span class="WebWorks_Number" style="width: 18pt"><span>d. </span></span>Checks the audience.</div><div id="wwID0ECHXX" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>After validating the client, the request is directed to the Internal Server.</div><div id="wwID0EVHXX" class="Numbered_1_Continued">If the access token is expired, authorization server returns a specific error response. The client application can then use Refresh Token to request a new access token. The Authorization Server returns a new access token that can be used to access the protected resource.</div><div id="wwID0EZHXX" class="Note_1"><span class="Bold">Note:<br /></span>When a Policy violation event is logged in case of expired Oauth2 tokens, the application that is associated turn in to <span class="uicontrol">Unknown</span>.</div><div id="wwID0EWIXX" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span>The Internal Server sends the response with requested resource to API Gateway.</div><div id="wwID0EHJXX" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span>API Gateway then sends the protected request resource to the Client.</div><div id="wwID0ECKXX" class="Section_Title">Authorization Grant Types Supported</div><div id="wwID0EHKXX" class="Body">OAuth 2.0 provides several grant types, based on the work flow required by your application. The following grant types are supported by the API Gateway local Authorization Server. APIs can be enabled for more than one grant types. This table lists the grant types and the applications they are sutable for</div><div class="ww_skin_page_overflow"><table class="Simple" cellspacing="0" summary=""><tr><td class="Simple_Table_Cell_Head" style="background-color: #D6D6D6; border-bottom-color: #007096; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 50%"><div id="wwID0EXKXX" class="Simple_Table_Cell_Head">Grant type</div></td><td class="Simple_Table_Cell_Head" style="background-color: #D6D6D6; border-bottom-color: #007096; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 50%"><div id="wwID0E3KXX" class="Simple_Table_Cell_Head">Suitable for</div></td></tr><tr><td class="Simple_Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EFLXX" class="Simple_Table_Cell">Authorization Code</div></td><td class="Simple_Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EKLXX" class="Simple_Table_Cell">Regular web applications executing on a server.</div></td></tr><tr><td class="Simple_Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ETLXX" class="Simple_Table_Cell">Implicit</div></td><td class="Simple_Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYLXX" class="Simple_Table_Cell">Single page applications.</div></td></tr><tr><td class="Simple_Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EBMXX" class="Simple_Table_Cell">Resource Owner Password Credentials</div></td><td class="Simple_Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGMXX" class="Simple_Table_Cell">Aplications that can be fully trusted with user credentials.</div></td></tr><tr><td class="Simple_Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EPMXX" class="Simple_Table_Cell">Refresh Token</div></td><td class="Simple_Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUMXX" class="Simple_Table_Cell">To further secure applications that require the Authorization Code or Implicit grant types.</div></td></tr><tr><td class="Simple_Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E4MXX" class="Simple_Table_Cell">Client Credentials</div></td><td class="Simple_Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ECNXX" class="Simple_Table_Cell">Applications that involve only machine to machine interactions.</div></td></tr></table></div><div id="wwID0EJNXX" class="Body"><span class="inlinetitle">Authorization Code</span></div><div id="wwID0ESNXX" class="Body">The Authorization Code grant type enables API providers to open their APIs to unknown (but registered) third-party application developers. This grant enables a flow in which user credentials are never shared with the client application. Users are redirected to the authorization server to authenticate themselves. Only when users authenticate themselves and grant the required permissions to the client application can the client application access their resources.</div><div id="wwID0EXNXX" class="Body"><span class="inlinetitle">When should you use the authorization code grant type?</span></div><div id="wwID0EAOXX" class="Body">Use the authorization code grant type in scenarios where the API is being opened to unknown third-party application developers and exposing the user credentials is risky.</div><div id="wwID0EFOXX" class="Body">The user agent (web browser) is required component of this flow as many of the steps, such as user authentication, granting access permissions, passing an authorization code to the application and verifying the authenticity of the client application are performed by redirecting the web browser to different URLs. Therefore, it can be implemented in applications that either run in a web browser or can access a web browser.</div><div id="wwID0EKOXX" class="Body">It is suitable for:</div><div id="wwID0ETOXX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Web applications that execute on a server</div><div id="wwID0EEPXX" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Mobile applications that can access a web browser</div><div id="wwID0EWPXX" class="Body">This diagram illustrates the flow for the Authorization Code grant type</div><div class="ww_skin_page_overflow"><div id="wwID0E2PXX" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/oauth_authorization_grant_type.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 361px; max-width: 504px; top: 0pt" alt="Authorization code grant type" /></div></div><div id="wwID0ELQXX" class="Body">For public clients, the <span class="emphasis">Authorization Code</span> grant type can be further secured by PKCE mechanism. For more details, see 
    <a href="../yai-webhelp/co-pkce_overview.html#wwID0E6TOY"
   
     title="Securing Access Token Calls with PKCE"
    ><span class="ph_002c_heading-page"> Securing Access Token Calls with PKCE </span></a>.</div><div id="wwID0EGRXX" class="Note"><span class="Bold">Note:<br /></span>API Gateway supports the confidential client authentication using Authorization headers. The confidential clients have to authenticate using their credentials, the client id and client secret combination. Few points to consider using the Authorization Code grant type:</div><div id="wwID0EBSXX" class="List_1_-_Note_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If the property <span class="codeph">watt.server.oauth.token.endpoint.auth=session</span> (the default value) and the confidential client already has a session when it comes to the token endpoint, the access to the endpoint is granted even if there are no credentials in the header.</div><div id="wwID0EYSXX" class="List_1_-_Note_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If the property <span class="codeph">watt.server.oauth.token.endpoint.auth=credentials</span> or if the client does not already have a session, the confidential client must provide the client_secret in the Authorization header.</div><div id="wwID0EPTXX" class="List_1_-_Note_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>API Gateway does not support the client secret in the body of the request for the Authorization code grant.</div><div id="wwID0ECUXX" class="Body_-_Note_-_not_first">For details about the properties mentioned, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Integration Server Administrator’s Guide</span>.</div><div id="wwID0ETUXX" class="Body"><span class="inlinetitle">Implicit</span></div><div id="wwID0E3UXX" class="Body">The implicit grant type is similar to the authentication code flow, but the access token is given to the user-agent to forward to the application. This exposes the token to the user and other applications on the user's device. Also, this grant type does not authenticate the identity of the application and relies on the redirect URI (that was registered with the service) to serve this purpose.</div><div id="wwID0EBVXX" class="Body">In addition, the implicit grant type does not support refresh tokens. This diagram illustrates the flow for the implicit grant type</div><div class="ww_skin_page_overflow"><div id="wwID0EGVXX" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/oauth_implicit_grant_type.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 365px; max-width: 504px; top: 0pt" alt="implicit grant type" /></div></div><div id="wwID0EWVXX" class="Body">The flow for the implicit grant type is similar to the flow for the authorization code grant type, except that the authorization server sends an access token to the user-agent instead of an authorization code. The user-agent then passes the access token to the client application.</div><div id="wwID0E2VXX" class="Body">When should you use the implicit grant type? You should use the implicit grant type only with applications developed and published by trusted parties.</div><div id="wwID0EAWXX" class="Body">It is suitable for single-page applications that execute in the web browser as they cannot execute the flow required by the more secure and elaborate Authentication Code grant type</div><div id="wwID0EFWXX" class="Body"><span class="inlinetitle">Resource Owner Password Credentials</span></div><div id="wwID0EOWXX" class="Body">In the flow for the resource owner password credentials grant type, users enter their username and password for a resource directly in the client application. The client application then passes the credentials to the authentication server to authenticate the user and obtain an access token.</div><div id="wwID0ETWXX" class="Body">This diagram illustrates the flow for the Resource Owner Password Credentials grant type.</div><div class="ww_skin_page_overflow"><div id="wwID0EYWXX" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/oauth_resource_owner_pwd_grant_type.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 272px; max-width: 504px; top: 0pt" alt="Resource owner password credentials grant type" /></div></div><div id="wwID0EIXXX" class="Body">Client application asks the user for her credentials and passes them to the Authorization Server. In response, the Authorization Server sends the access token directly to the client application.</div><div id="wwID0ENXXX" class="Body">When should you use the resource owner password credentials grant type? The resource owner password credentials grant type can be used only when users trust the client application with their credentials for a resource. This is usually the case when the client application is from the same party that hosts the resource or service that the client application is trying to access.</div><div id="wwID0ESXXX" class="Body">This grant type should only be used only if other grant types are not viable.</div><div id="wwID0EXXXX" class="Body"><span class="inlinetitle">Client Credentials</span></div><div id="wwID0EAYXX" class="Body">This is the grant type used to obtain access tokens for client-only authentication.</div><div id="wwID0EFYXX" class="Body">The client credentials grant type is similar to the resource owner password credential grant type. The difference is that instead of user credentials, the client application provides its own client and secret. This grant type is intended for flows in which users are not involved.</div><div id="wwID0EKYXX" class="Body">This diagram illustrates the flow for the Client Credentials grant type.</div><div class="ww_skin_page_overflow"><div id="wwID0EPYXX" class="Figure"><img class="ScaleFit" src="../yai-webhelp/images/oauth_client_credentials_grant_type.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 272px; max-width: 504px; top: 0pt" alt="client credentials grant type" /></div></div><div id="wwID0E6YXX" class="Body">The steps are similar to the resource owner password credential flow. Clients use their client IDs and secrets to identify themselves. On success, the Authorization Server returns access tokens. Avoid using refresh tokens in this flow as it increases the risk of exposing the client credentials.</div><div id="wwID0EEZXX" class="Body">When should you use the client credentials grant type? In this grant type, users do not need to authenticate themselves or authorize access to a particular resource or service. This grant type is suitable for scenarios such as client applications accessing their own resources. For example: a client application retrieving data from its own account</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>