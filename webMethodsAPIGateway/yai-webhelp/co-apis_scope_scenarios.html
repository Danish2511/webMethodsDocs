<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Example: Usage Scenarios of API Scopes</title><link rel="Prev" href="ta-policy_scope_delete.html" title="Previous" /><link rel="Next" href="gtw_manage_policy_templates.html" title="Next" /><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_api_gtw_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/yai-webhelp/co-apis_scope_scenarios.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pqVCWDWU_002fixi583l5XX4edg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/yai-webhelp/co-apis_scope_scenarios.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>API Gateway</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.503.html#wwconnect_header">Using API Gateway</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../yai-webhelp/_api_gtw_integrated_webhelp.1.535.html#wwconnect_header">Implement APIs</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Example: Usage Scenarios of API Scopes</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0E6HP2" class="Heading_2">Example: Usage Scenarios of API Scopes</div><div id="wwID0EHIP2" class="Body">API Provider can restrict the enforcement of policies at the resource-level or method-level for a REST API, and at the operations-level for a SOAP API. This policy enforcement on the resources, methods, or operations of the API will apply in addition to the default enforcement of policies at the global-level and the user-defined enforcement of policies at the API-level.</div><div id="wwID0EMIP2" class="Body">Consider you have a REST API, for example, <span class="emphasis">PhoneStore API</span>, with a collection of resources and methods.</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 30.5%"><div id="wwID0EWJP2" class="Table_Cell_Head">Resource Name</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 45.4%"><div id="wwID0E3JP2" class="Table_Cell_Head">Resource Path</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 24%"><div id="wwID0ECKP2" class="Table_Cell_Head">Supported Methods</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" rowspan="2"><div id="wwID0EPKP2" class="Table_Cell">Resource A</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" rowspan="2"><div id="wwID0EWKP2" class="Table_Cell">/phones/orders</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E4KP2" class="Table_Cell">GET</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHLP2" class="Table_Cell">POST</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" rowspan="3"><div id="wwID0ERLP2" class="Table_Cell">Resource B</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" rowspan="3"><div id="wwID0EYLP2" class="Table_Cell">/phones/orders/{order-id}</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E6LP2" class="Table_Cell">GET</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EJMP2" class="Table_Cell">PUT</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ETMP2" class="Table_Cell">DELETE</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" rowspan="2"><div id="wwID0E4MP2" class="Table_Cell">Resource C</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top" rowspan="2"><div id="wwID0EENP2" class="Table_Cell">/phones/orders/{order-id}/paymentdetails</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ELNP2" class="Table_Cell">GET</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EVNP2" class="Table_Cell">POST</div></td></tr></table></div><div id="wwID0E6NP2" class="Body">The following section demonstrates the application of scopes and the policy enforcement using Resource C: /phones/orders/{order-id}/paymentdetails of the PhoneStore API.</div><div id="wwID0EEOP2" class="Body">You can create scopes in the PhoneStore API, and define the individual scopes with a specific set of resources, methods, or both.</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 25.7%"><div id="wwID0EIPP2" class="Table_Cell_Head">Scope Name</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 42.2%"><div id="wwID0EOPP2" class="Table_Cell_Head">Applied Resource</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 31.9%"><div id="wwID0EUPP2" class="Table_Cell_Head">Applied Method</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EBQP2" class="Table_Cell">PAYMENT Scope</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHQP2" class="Table_Cell">Resource C: /phones/orders/{order-id}/paymentdetails</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYQP2" class="Table_Cell">WRITE Scope</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5QP2" class="Table_Cell">Resource C: /phones/orders/{order-id}/paymentdetails</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EERP2" class="Table_Cell">POST</div></td></tr></table></div><div id="wwID0EORP2" class="Body">Assume you have an API-level policy which enforces an Identify &amp; Authorize policy with HTTP Basic Authentication for the PhoneStore API. Now, you might need to have different authentication mechanisms for different methods and resources (collectively, scopes) of the PhoneStore API, depending on the level of access you need.</div><div id="wwID0ETRP2" class="Body">For example, you might want to enforce an Identify &amp; Authorize policy for the Resource C in PAYMENT Scope to enforce secured access to the data. You might also want to apply an Identify &amp; Authorize policy with API Key authentication and Traffic Optimization policy (with 5 API invocations per minute), in particular, for the POST method of the Resource C in WRITE Scope to enforce a higher-level of secured access and manipulation of the REST data.</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 42.7%"><div id="wwID0ESSP2" class="Table_Cell_Head">API-level / Scope-level Policy</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 57.2%"><div id="wwID0EYSP2" class="Table_Cell_Head">Applied Policies</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EFTP2" class="Table_Cell">API-level Policy</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ELTP2" class="Table_Cell">Identify &amp; Authorize policy with HTTP Basic Authentication</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EVTP2" class="Table_Cell">Scope-level Policy for PAYMENT Scope</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2TP2" class="Table_Cell">Identify &amp; Authorize policy</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EFUP2" class="Table_Cell">Scope-level Policy for WRITE Scope</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ELUP2" class="Table_Cell">Identify &amp; Authorize policy with API Key</div><div id="wwID0ERUP2" class="Table_Cell">Traffic Optimization</div></td></tr></table></div><div id="wwID0E2UP2" class="Body">The API Scopes definition looks like this:</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 41.6%"><div id="wwID0E1VP2" class="Table_Cell_Head">API-level / Scope-level Policy</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 58.3%"><div id="wwID0EAWP2" class="Table_Cell_Head">Applied Policies</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ENWP2" class="Table_Cell">API-level Policy</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ETWP2" class="Table_Cell">Identify &amp; Authorize policy with HTTP Basic Authentication</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E4WP2" class="Table_Cell">Policy for PAYMENT Scope</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EDXP2" class="Table_Cell">Resource C: /phones/orders/{order-id}/paymentdetails</div><div id="wwID0EJXP2" class="Table_Cell">Identify &amp; Authorize policy</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ETXP2" class="Table_Cell">Policy for WRITE Scope</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZXP2" class="Table_Cell">Resource C: /phones/orders/{order-id}/paymentdetails</div><div id="wwID0E6XP2" class="Table_Cell">Method: POST</div><div id="wwID0EEYP2" class="Table_Cell">Identify &amp; Authorize policy with API Key</div><div id="wwID0EJYP2" class="Table_Cell">Traffic Optimization</div></td></tr></table></div><div id="wwID0ETYP2" class="Body">The precedence of the policy enforcement effective for an API at run-time is as follows:</div><div id="wwID0E5YP2" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Global Policy Enforcement</div><div id="wwID0ERZP2" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Method-level Policy Enforcement (REST APIs) -OR- Operation-level Policy Enforcement (SOAP APIs)</div><div id="wwID0EE1P2" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Resource-level Policy Enforcement (REST APIs)</div><div id="wwID0EX1P2" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>API-level Policy Enforcement</div><div id="wwID0EM2P2" class="Body">The specific aspect of processing during the handling of an API invocation at run-time in <span class="ph">API Gateway</span> can be best understood with the following scenarios:</div><div id="wwID0EW2P2" class="Body"><span class="inlinetitle">Scenario A</span>: Invoke GET method on the Resource C: /phones/orders/{order-id}/paymentdetails</div><div id="wwID0EG3P2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Global Policy: Not applicable</div><div id="wwID0EZ3P2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Method-level Policy: Not applicable</div><div id="wwID0EM4P2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Resource-level Policy(s): Identify &amp; Authorize</div><div id="wwID0E64P2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>API-level Policy: Identify &amp; Authorize policy with HTTP Basic Authentication</div><div id="wwID0ET5P2" class="Body">As per the precedence of policy enforcement, the Inbound Authentication - Transport at the resource-level and the Identify &amp; Authorize policy with HTTP Basic Authentication at the API-level are enforced at run-time.</div><div id="wwID0EY5P2" class="Body">The effective policy set enforced on the API for the GET method at run-time includes:</div><div id="wwID0ED6P2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Identify &amp; Authorize</div><div id="wwID0EW6P2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Identify &amp; Authorize policy with HTTP Basic Authentication</div><div id="wwID0ELAQ2" class="Body"><span class="inlinetitle">Scenario B</span>: Invoke POST method on the Resource C: /phones/orders/{order-id}/paymentdetails in WRITE Scope</div><div id="wwID0E2AQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Global Policy: Not applicable</div><div id="wwID0EOBQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Method-level Policy(s): (1) Identify &amp; Authorize policy with API Key (2) Traffic Optimization</div><div id="wwID0EBCQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Resource-level Policy(s): Identify &amp; Authorize</div><div id="wwID0EUCQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>API-level Policy: Identify &amp; Authorize policy with HTTP Basic Authentication</div><div id="wwID0EIDQ2" class="Body">As per the precedence of policy enforcement, the Identify &amp; Authorize policy with API Key at the method-level takes precedence over the Identify &amp; Authorize policy with HTTP Basic Authentication at the API-level, and is enforced at run-time.</div><div id="wwID0ENDQ2" class="Body">The effective policy set enforced on the API for the POST method at run-time includes:</div><div id="wwID0EYDQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Identify &amp; Authorize</div><div id="wwID0ELEQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Identify &amp; Authorize policy with API Key</div><div id="wwID0E5EQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Traffic Optimization</div><div id="wwID0ETFQ2" class="Body">Now, consider that you apply an active Global Policy that has the Identify &amp; Authorize policy with Hostname Address for all REST APIs (including our PhoneStore API).</div><div id="wwID0EYFQ2" class="Body"><span class="inlinetitle">Scenario C</span>: Invoke POST method on the Resource C: /phones/orders/{order-id}/paymentdetails in WRITE Scope</div><div id="wwID0EIGQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Global Policy: Identify &amp; Authorize policy with Hostname Address</div><div id="wwID0E2GQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Method-level Policy(s): (1) Identify &amp; Authorize policy with API Key (2) Traffic Optimization</div><div id="wwID0EOHQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Resource-level Policy(s): Identify &amp; Authorize</div><div id="wwID0EBIQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>API-level Policy: Identify &amp; Authorize policy with HTTP Basic Authentication</div><div id="wwID0EVIQ2" class="Body">As per the precedence of policy enforcement, the Identify &amp; Authorize policy with Hostname Address applied through the global policy takes precedence over every other Identify &amp; Authorize policy that is applied at the method-level and the API-level, and is enforced at run-time.</div><div id="wwID0E1IQ2" class="Body">The effective policy set enforced on the API for the POST method at run-time includes:</div><div id="wwID0EFJQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Identify &amp; Authorize</div><div id="wwID0EYJQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Identify &amp; Authorize policy with Hostname Address</div><div id="wwID0ELKQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Traffic Optimization</div><div id="wwID0EALQ2" class="Body"><span class="inlinetitle">Resolving Scope Conflicts</span></div><div id="wwID0EKLQ2" class="Body">When you save an API, <span class="ph">API Gateway</span> combines the scopes specified with the set of policies defined at the API-level, and on saving the API, <span class="ph">API Gateway</span> applies the policies to the API at various enforcement levels. <span class="ph">API Gateway</span> validates the scope list to ensure that it contains no conflicting or incompatible policies. If the list contains conflicts or inconsistencies, <span class="ph">API Gateway</span> prompts you with an error message.</div><div id="wwID0EAMQ2" class="Body">Consider that you modify the existing UPDATE scope to include a POST method for Resource C. The API Scopes definition now looks like this:</div><div class="ww_skin_page_overflow"><table class="rules1" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 28%"><div id="wwID0E6MQ2" class="Table_Cell_Head">API-level / Scope-level Policy</div></td><td class="Table_Cell_Head" style="background-color: #CFCFCE; border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 71.9%"><div id="wwID0EFNQ2" class="Table_Cell_Head">Applied Policies</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ESNQ2" class="Table_Cell">API-level Policy</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYNQ2" class="Table_Cell">Identify &amp; Authorize policy with HTTP Basic Authentication</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ECOQ2" class="Table_Cell">Policy for PAYMENT Scope</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EIOQ2" class="Table_Cell">Resource C: /phones/orders/{order-id}/paymentdetails</div><div id="wwID0EOOQ2" class="Table_Cell">Identify &amp; Authorize policy</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYOQ2" class="Table_Cell">Policy for WRITE Scope</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5OQ2" class="Table_Cell">Resource C: /phones/orders/{order-id}/paymentdetails</div><div id="wwID0EEPQ2" class="Table_Cell">Method: POST</div><div id="wwID0EJPQ2" class="Table_Cell">Identify &amp; Authorize policy with API Key</div><div id="wwID0EOPQ2" class="Table_Cell">Traffic Optimization</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYPQ2" class="Table_Cell">Policy for UPDATE Scope</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5PQ2" class="Table_Cell">Resource C: /phones/orders/{order-id}/paymentdetails</div><div id="wwID0EEQQ2" class="Table_Cell">Method: POST</div><div id="wwID0EJQQ2" class="Table_Cell">Identify &amp; Authorize policy with API Key</div></td></tr></table></div><div id="wwID0ETQQ2" class="Body"><span class="inlinetitle">Scenario D</span>: Save the updated PhoneStore API.</div><div id="wwID0EDRQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Global Policy: Not applicable</div><div id="wwID0EWRQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Method-level Policy(s): (1) Identify &amp; Authorize policy with API Key (2) Identify &amp; Authorize policy with IP Address Range (3) Traffic Optimization</div><div id="wwID0EJSQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Resource-level Policy(s): Identify &amp; Authorize</div><div id="wwID0E3SQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>API-level Policy: Identify &amp; Authorize policy with HTTP Basic Authentication</div><div id="wwID0EQTQ2" class="Body">As per the precedence of policy enforcement, the Identify &amp; Authorize policy at the method-level in WRITE and UPDATE Scopes take precedence over the Identify &amp; Authorize policy at the API-level. But the Identify &amp; Authorize policy with the API Key and IP Address Range authentications that are applied at the method-level results in a policy conflict.</div><div id="wwID0EVTQ2" class="Body">To resolve the conflicts, you can choose one of the following workaround:</div><div id="wwID0EAUQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">Option 1</span>: Remove the existing association between the POST method and the WRITE Scope or UPDATE Scope through the API Scope details.</div><div id="wwID0EXUQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">Option 2</span>: Delete the WRITE Scope or UPDATE Scope.</div><div id="wwID0EOVQ2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">Option 3</span>: Remove the Identify &amp; Authorize policy from the WRITE Scope or UPDATE Scope.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2016-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>