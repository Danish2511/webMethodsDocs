<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Building the Docker Image for an Integration Server Instance</title><link rel="Prev" href="to-docker_8.html" title="Previous" /><link rel="Next" href="to-docker_10.html" title="Next" /><link rel="StyleSheet" href="css/is_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/is_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/pie-webhelp/to-docker_9.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pTBr1iybqEXO2JBGPIFda_002fw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/pie-webhelp/to-docker_9.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Integration Server</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../pie-webhelp/to-webhelp_intro_is_admin_guide.html#wwconnect_header">Integration Server Administrator's Guide</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../pie-webhelp/to-docker.html#wwconnect_header">Using Integration Server with Docker</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Building the Docker Image for an Integration Server Instance</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0E2MDZ" class="Heading_2">Building the Docker Image for an <span class="ph">Integration Server</span> Instance</div><div id="wwID0EJNDZ" class="Context">Building a Docker image for <span class="ph">Integration Server</span> consists of:</div><div id="wwID0E1NDZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Creating a Dockerfile for the <span class="ph">Integration Server</span> instance. This Dockerfile contains system (Wm*) packages and core functionality.</div><div id="wwID0ERODZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Building a base Docker image for <span class="ph">Integration Server</span> using the Dockerfile with the core functionality and system packages.</div><div id="wwID0EIPDZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Creating a Dockerfile with the base image created in the step above for custom packages to include in the <span class="ph">Integration Server</span> image.</div><div id="wwID0E6PDZ" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Building a Docker image for <span class="ph">Integration Server</span> image using the custom packages Dockerfile. The resulting Docker image contains core functionality, system packages, and custom packages.</div><div id="wwID0EWQDZ" class="Note_1"><span class="Bold">Note:<br /></span>If you use automatic package deployment, you do not need to create an image for custom packages. Instead, create the base image and an image containing the Default package. Then use the automatic package deployment feature to add packages to the <span class="ph">Microservices Runtime</span> or <span class="ph">Integration Server</span> running in a Docker container. For more information about automatic package deployment, see <span class="Citation">Developing Microservices with webMethods Microservices Runtime.</span>.</div><div id="wwID0E2RDZ" class="Body">Before building an <span class="ph">Integration Server</span> image to use with Docker containers, make sure to complete the prerequisites listed in 
    <a href="../pie-webhelp/to-docker_6.html#wwID0E3SCZ"
   
     title="Prerequisites for Building a Docker Image"
    ><span class="heading-page">Prerequisites for Building a Docker
Image</span></a>.</div><div id="wwID0EOSDZ" class="Body">For information, including prerequisites, about using an <span class="ph">Integration Server</span> running in a Docker container as the local development server for the local service development feature in , see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Service Development Help</span>.</div><div id="wwID0EFTDZ" class="Note"><span class="Bold">Note:<br /></span>The Dockerfile created by <span class="ph">Integration Server</span> contains metadata about the <span class="ph">Integration Server</span> instance used for the image in the Dockerfile. The metadata appears as a Label in the Dockerfile and includes the name, product version, product build number, and primary port of the instance.</div><div id="wwID0ECUDZ" class="procedure"><span><img src="icon_task_xpe.png" alt="*" border="0" width="20" height="13" /></span>To create a Docker image for <span class="ph">Integration Server</span></div><div id="wwID0ETUDZ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span><span class="Command">Go to the </span><span class="Command_002c_Command"> </span><span class="Command_002c_Command_002c_emphasis">Software&nbsp;AG_directory</span><span class="Command_002c_Command"> </span><span class="Command">\</span><span class="Command_002c_Command"> </span><span class="Command_002c_Command_002c_emphasis">Integration&nbsp;Server_directory</span><span class="Command_002c_Command"> </span><span class="Command">\docker directory.</span></div><div id="wwID0EGWDZ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span><span class="Command">Create a Dockerfile for the core of an </span><span class="Command_002c_Command">Integration Server</span><span class="Command"> instance using one of the commands below. The Dockerfile is created in </span><span class="Command_002c_varname">Software AG_directory</span><span class="Command">.</span></div><div id="wwID0EWXDZ" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Create a Dockerfile that specifies your choice of JDK or JRE and as many Wm packages as you want to include (that is, system packages and hosted product packages, such as <span class="ph">Trading Networks Server</span>) by running the <span class="codeph">createDockerFile</span> command below. The file is stored in the Software AG directory.</div><div id="wwID0ERYDZ" class="Preformatted_2">is_container.sh/bat createDockerfile [<span class="varname">optional arguments</span>]</div><div class="ww_skin_page_overflow"><table class="norules3" cellspacing="4" summary=""><tr><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 30.7%"><div id="wwID0ED1DZ" class="Table_Cell_Head">Argument</div></td><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 69.2%"><div id="wwID0EJ1DZ" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E51DZ" class="Lines"><br /><span class="codeph">-Dimage.name=</span> <span class="varname">baseImageName</span><br /></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EP2DZ" class="Table_Cell">Optional. Base image such as alpine or redhat/ubi8.</div><div id="wwID0EV2DZ" class="Table_Cell">Default: redhat/ubi8</div><div id="wwID0E12DZ" class="Table_Cell">For an <span class="ph">Integration Server</span> running on Windows, the <span class="codeph">-Dimage.name</span> parameter should be set as follows:</div><div id="wwID0EI3DZ" class="Table_Cell"><span class="codeph">-Dimage.name=mcr.microsoft.com/windows/servercore:</span><span class="codeph_002c_varname">YourOsImageTag</span><span class="codeph"> </span></div><div id="wwID0EZ3DZ" class="Table_Cell">Where <span class="codeph"> </span><span class="codeph_002c_varname">YourOsImageTag</span><span class="codeph"> </span> is the tag for the Windows image created for the OS version on which <span class="ph">Integration Server</span> runs.</div><div id="wwID0EN4DZ" class="Note"><span class="Bold">Note:<br /></span>Make sure you select a base image that is supported with any layered products installed on the <span class="ph">Integration Server</span> instance that you intend to include in the Docker image. For more information about supported base images, refer to <span class="ph"> </span><span class="ph_002c_Citation">System Requirements for Software AG Products</span>.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E45DZ" class="Lines"><br /><span class="codeph">-Dinstance.name=</span> <span class="varname">instance_ name</span><br /></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EO6DZ" class="Table_Cell">Optional. <span class="ph">Integration Server</span> instance to include in the image.</div><div id="wwID0EY6DZ" class="Table_Cell">Default: default (The instance named default.)</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EJAEZ" class="Lines"><br /><span class="codeph">-Dport.list=</span> <span class="varname">ports</span><br /></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E1AEZ" class="Table_Cell">Optional. Comma-separated list of the ports on the instance to expose in the image.</div><div id="wwID0EABEZ" class="Table_Cell">Default: <span class="ph">Integration Server</span> uses the port numbers assigned to the primary, diagnostic, and default secure port.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EWBEZ" class="Lines"><br /><span class="codeph">-Dpackage.list=</span> <span class="varname">Wm packages</span><br /></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHCEZ" class="Table_Cell">Optional. Comma-separated list of Wm packages on the instance to include in the image.</div><div id="wwID0ENCEZ" class="Table_Cell">Default: all (this includes all of the Wm packages and the Default package)</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5CEZ" class="Lines"><br /><span class="codeph">-Dinclude.jdk=</span>{true|false}</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EKDEZ" class="Table_Cell">Optional. Whether to include the <span class="ph">Integration Server</span> JDK (true) or JRE (false) in the image.</div><div id="wwID0EUDEZ" class="Table_Cell">Default: true</div><div id="wwID0EZDEZ" class="Note"><span class="Bold">Note:<br /></span>For an <span class="ph">Integration Server</span> running with Java 11, the full JDK is used regardless of the <span class="codeph">-Dinclude.jdk</span> value.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EDFEZ" class="Lines"><br /><span class="codeph">-Dfile.name=</span> <span class="varname">Dockerfile_name</span><br /></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUFEZ" class="Table_Cell">Optional. Filename for the generated Dockerfile.</div><div id="wwID0E1FEZ" class="Table_Cell">Default: Dockerfile_IS</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ELGEZ" class="Lines"><br /><span class="codeph">-Dtarget.configuration=</span><br /><span class="varname">configuration_name</span><br /></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E3GEZ" class="Table_Cell">Optional. Target configuration of <span class="ph">Integration Server</span> for which the Dockerfile is being created.</div><div id="wwID0EGHEZ" class="Table_Cell">Default: There is no default value for this parameter.</div><div id="wwID0ELHEZ" class="Table_Cell">If the Dockerfile is for an <span class="ph">Integration Server</span> that will be used as the local development server, specify: <span class="codeph">localdev</span></div><div id="wwID0EZHEZ" class="Table_Cell">For more information about using an <span class="ph">Integration Server</span> running in a Docker container as the local development server for the local service development feature in , see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Service Development Help</span>.</div><div id="wwID0EQIEZ" class="Table_Cell">If the Dockerfile is for an <span class="ph">Integration Server</span> that will be used with OpenShift, specify: <span class="codeph">OpenShift</span></div><div id="wwID0E5IEZ" class="Table_Cell">When <span class="codeph">-Dtarget.configration=OpenShift</span>, the is_container.bat/sh script creates a root group that has read, write, and execute permissions. This is needed because OpenShift runs Docker containers using an arbitrarily assigned user ID. To support running of the container by an arbitrary user, a root group needs to own the directories and files that might be written to by the processes in the Docker image, the root group must have read/write access to the directories and files, and the root group must have execute permissions to the files that can be executed.</div><div id="wwID0EIJEZ" class="Table_Cell">If the Dockerfile is for an <span class="ph">Integration Server</span> instance that will be lifted and shifted into <span class="ph">Integration Cloud</span>, set to: <span class="codeph">wmcloud</span></div><div id="wwID0E1JEZ" class="Table_Cell">When this parameter is set to <span class="codeph">wmcloud</span>, the is_container script overwrites the default truststore provided with <span class="ph">Integration Server</span> with the truststore required by <span class="ph">Integration Cloud</span>.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYKEZ" class="Lines"><br /><span class="codeph">-Dimage.createUser=</span>{true|false}</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EELEZ" class="Table_Cell">Optional. Sets a non-root user for the ownership of the files in the Docker image. When<span class="codeph">-Dimage.createUser</span> is set to true, <span class="ph">Integration Server</span> creates a Docker image for which a sagadmin user has ownership of the files in the Docker image. The default value of the parameter is false.</div><div id="wwID0ESLEZ" class="Table_Cell">Default: false</div><div id="wwID0EXLEZ" class="Note"><span class="Bold">Note:<br /></span>This option applies on operating systems other than Windows and requires Docker version 17.09 or higher.</div><div id="wwID0ENMEZ" class="Note"><span class="Bold">Note:<br /></span>If <span class="codeph">-Dtarget.configuration=OpenShift</span>, the script sets <span class="codeph">-Dimage.createUser</span> to false automatically.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ERNEZ" class="Table_Cell"><span class="codeph">-Dexclude.components = "</span><span class="codeph_002c_varname">componentName</span><span class="codeph">"</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EDOEZ" class="Table_Cell">Optional. Comma-separated list of components to exclude from the image. Currently the only component that can be excluded is: <span class="codeph">WebServices</span>. This argument applies to a Docker image created for <span class="ph">Microservices Runtime</span> only.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EWOEZ" class="Table_Cell"><span class="codeph">-Dhealth.required=</span>{true|false}</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EAPEZ" class="Table_Cell">Optional. Whether to add the HEALTHCHECK instruction to the Docker file.</div><div id="wwID0EGPEZ" class="Table_Cell">Default: false</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EPPEZ" class="Table_Cell"><span class="codeph">-Dhealth.interval=</span><span class="codeph_002c_varname">duration</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5PEZ" class="Table_Cell">Optional. The amount of time between the end of a health check and the start of the next. Make sure to specify a unit of time (s for seconds, m for minutes). This argument is ignored if <span class="codeph">-Dhealth.required=false</span>.</div><div id="wwID0EIQEZ" class="Table_Cell">Default: 30s</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ERQEZ" class="Table_Cell"><span class="codeph">-Dhealth.timeout=</span><span class="codeph_002c_varname">duration</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EAREZ" class="Table_Cell">Optional. The timeout value for the health check. If the health check takes longer than the number of seconds specified in <span class="codeph">-Dhealth.timeout</span>, Docker considers the health check to have failed. Make sure to specify a unit of time (s for seconds, m for minutes). This argument is ignored if <span class="codeph">-Dhealth.required=false</span>.</div><div id="wwID0EOREZ" class="Table_Cell">Default: 30s</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EXREZ" class="Table_Cell"><span class="codeph">-Dhealth.startperiod=</span><span class="codeph_002c_varname">duration</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGSEZ" class="Table_Cell">Optional. The amount of time that Docker waits once the container starts before running the first health check. Make sure to specify a unit of time (s for seconds, m for minutes). This argument is ignored if <span class="codeph">-Dhealth.required=false</span>.</div><div id="wwID0EQSEZ" class="Table_Cell">Default: 180s</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZSEZ" class="Table_Cell"><span class="codeph">-Dhealth.retry=</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ECTEZ" class="Table_Cell">Optional. The number of consecutive health check failures that must occur before Docker considers the container to be <span class="codeph">unhealthy</span>.</div><div id="wwID0EMTEZ" class="Table_Cell">Default: 3</div></td></tr></table></div><div id="wwID0EWTEZ" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Create a Dockerfile that includes the JDK and only the minimum system packages required for <span class="ph">Integration Server</span> to operate (WmRoot, WmPublic, and WmCloud) by running the <span class="codeph">createLeanDockerfile</span> command below.</div><div id="wwID0ERUEZ" class="Preformatted_2">is_container.sh/bat createLeanDockerfile [<span class="varname">optional arguments</span>]</div><div id="wwID0E4UEZ" class="List_2_Continued">The optional arguments are <span class="codeph"> </span><span class="codeph_002c_codeph">-Dimage.name</span><span class="codeph">, -Dinstance.name</span>, <span class="codeph">-Dport.list</span>, <span class="codeph">-Dfile.name</span>, <span class="codeph">-Dtarget.configuration</span>, <span class="codeph">-Dimage.createUser</span>, <span class="codeph">-Dexclude.components</span>, and <span class="codeph">-Dhealth.*</span> .</div><div id="wwID0EKWEZ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span><span class="Command">Build a Docker image with the core Dockerfile by running the </span><span class="Command_002c_codeph">build</span><span class="Command"> command below. The image is stored in the local Docker registry.</span></div><div id="wwID0EOXEZ" class="Preformatted_1">is_container.sh/bat build [<span class="varname">optional arguments</span>]</div><div class="ww_skin_page_overflow"><table class="norules2" cellspacing="4" summary=""><tr><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 42.5%"><div id="wwID0EAZEZ" class="Table_Cell_Head">Argument</div></td><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 57.4%"><div id="wwID0EGZEZ" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EVZEZ" class="Table_Cell"><span class="codeph">-Dfile.name=</span> <span class="varname">Dockerfile_name</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EG1EZ" class="Table_Cell">Optional. Filename of the Dockerfile to use to build the Docker image.</div><div id="wwID0EM1EZ" class="Table_Cell">Default: Dockerfile_IS</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EX1EZ" class="Table_Cell"><span class="codeph">-Dimage.name=</span> <span class="varname">Docker_ image_name</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EI2EZ" class="Table_Cell">Optional. Name for the generated Docker image.</div><div id="wwID0EO2EZ" class="Table_Cell">Default: is:micro</div></td></tr></table></div><div id="wwID0E12EZ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span><span class="Command">Create a Dockerfile that specifies the custom packages to include in the Docker image by running the </span><span class="Command_002c_codeph">createPackageDockerfile</span><span class="Command"> command below. The Dockerfile for the custom packages is stored in the </span><span class="Command_002c_varname">Software AG_directory</span><span class="Command">/</span><span class="Command_002c_Command"> </span><span class="Command_002c_Command_002c_emphasis">Integration&nbsp;Server_directory</span><span class="Command_002c_Command"> </span><span class="Command">/instances/</span><span class="Command_002c_varname">instance name</span><span class="Command">/packages directory.</span></div><div id="wwID0EX4EZ" class="Preformatted_1">is_container.sh/bat createPackageDockerfile [<span class="varname">optional arguments</span>]</div><div class="ww_skin_page_overflow"><table class="norules2" cellspacing="4" summary=""><tr><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 39.8%"><div id="wwID0EJ6EZ" class="Table_Cell_Head">Argument</div></td><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 60.1%"><div id="wwID0EP6EZ" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E56EZ" class="Table_Cell"><span class="codeph">-Dinstance.name=</span> <span class="varname">instance_name</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EPAFZ" class="Table_Cell">Optional. <span class="ph">Integration Server</span> instance that includes the user-defined packages.</div><div id="wwID0EZAFZ" class="Table_Cell">Default: default (The instance named default.)</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EEBFZ" class="Table_Cell"><span class="codeph">-Dimage.name=</span> <span class="varname">Docker_image_name</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EVBFZ" class="Table_Cell">Optional. Name of the core <span class="ph">Integration Server</span> image on which this image should be built.</div><div id="wwID0E6BFZ" class="Table_Cell">Default: is:micro</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EKCFZ" class="Table_Cell"><span class="codeph">-Dpackage.list=</span> <span class="varname">packages</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2CFZ" class="Table_Cell">Optional. Comma-separated list of the custom packages to include in the image.</div><div id="wwID0EBDFZ" class="Table_Cell">Default: all</div><div id="wwID0EGDFZ" class="Table_Cell">“all” indicates that the image for packages will include all the custom packages on the <span class="ph">Integration Server</span> instance. The Default package and packages beginning with “Wm” will not be included in the image.</div><div id="wwID0EQDFZ" class="Note"><span class="Bold">Note:<br /></span>Make sure to include any custom packages containing services that you want to expose to consumers when <span class="ph">Integration Server</span> runs in a Docker container in <span class="ph">Integration Cloud</span>. If you do not include a package that contains an exposed service a request for the service fails with a service not found error when <span class="ph">Integration Cloud</span> redirects the request to the Docker container.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5EFZ" class="Lines"><br /><span class="codeph">-Dimage.createUser=</span>{true|false}</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EKFFZ" class="Table_Cell">Optional. Sets a non-root user for the ownership of the files in the Docker image. When<span class="codeph">-Dimage.createUser</span> is set to true, <span class="ph">Integration Server</span> creates a Docker image for which a sagadmin user has ownership of the files in the Docker image. The default value of the parameter is false.</div><div id="wwID0EYFFZ" class="Note"><span class="Bold">Note:<br /></span>This option applies on operating systems other than Windows and requires Docker version 17.09 or higher.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUGFZ" class="Table_Cell"><span class="codeph">-Dfile.name=</span> <span class="varname">Dockerfile_name</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EFHFZ" class="Table_Cell">Optional. Filename for the Dockerfile that contains the custom packages.</div><div id="wwID0ELHFZ" class="Table_Cell">Default: Dockerfile_IS_Pkg</div></td></tr></table></div><div id="wwID0EVHFZ" class="Note_1"><span class="Bold">Note:<br /></span>If you are using automatic package deployment you can skip the above step. Instead, once <span class="ph">Microservices Runtime</span> or <span class="ph">Integration Server</span> running in a Docker container, you can place custom packages in the folder on the HOST machine that is mapped to the autodeploy folder. For more information, see <span class="ph"> </span>
    <a href="../pie-webhelp/to-autopackagedeployment_for_packages.html#wwID0EZUEK"
   
     title="Automatic Package Deployment"
    ><span class="ph_002c_heading-page">Automatic Package Deployment</span></a><span class="ph"> </span>.</div><div id="wwID0EHJFZ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span><span class="Command">Build the Docker image with the custom packages Dockerfile by running the </span><span class="Command_002c_codeph">buildPackage</span><span class="Command"> command below. The image is stored in the local Docker registry. The resulting Docker image contains custom packages, system packages, and the core </span><span class="Command_002c_Command">Integration Server</span><span class="Command"> functionality.</span></div><div id="wwID0ERKFZ" class="Preformatted_1">is_container.sh/bat buildPackage [<span class="varname">optional arguments</span>]</div><div class="ww_skin_page_overflow"><table class="norules2" cellspacing="4" summary=""><tr><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 40.5%"><div id="wwID0EDMFZ" class="Table_Cell_Head">Argument</div></td><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 59.4%"><div id="wwID0EJMFZ" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYMFZ" class="Table_Cell"><span class="codeph">-Dfile.name=</span> <span class="varname">Dockerfile_name</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EJNFZ" class="Table_Cell">Optional. Filename for the Dockerfile that contains the custom packages.</div><div id="wwID0EPNFZ" class="Table_Cell">Default: Dockerfile_IS_Pkg</div><div id="wwID0EUNFZ" class="Table_Cell">Docker build uses the file with the specified name located in the packages directory of the specified instance, specifically: <span class="varname">Software AG_directory</span>/<span class="ph"> </span><span class="ph_002c_emphasis">Integration&nbsp;Server_directory</span><span class="ph"> </span>/instances/<span class="varname">instance name</span>/packages/</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EVOFZ" class="Table_Cell"><span class="codeph">-Dimage.name=</span> <span class="varname">Docker_image_name</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGPFZ" class="Table_Cell">Optional. Name for the generated Docker image that contains the custom packages.</div><div id="wwID0EMPFZ" class="Table_Cell">Default: is:microPkg</div></td></tr></table></div><div id="wwID0EYPFZ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span><span class="Command">Optionally, based on your requirements, execute one or more of the following command line arguments:</span></div><div id="wwID0EVQFZ" class="Choice_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">saveImage</span> to save an <span class="ph">Integration Server</span> image to a file. For more information about <span class="codeph">saveImage</span>, see 
    <a href="../pie-webhelp/to-docker_10.html#wwID0EGVFZ"
   
     title="Loading a Docker Image to an On-Premise Docker Registry"
    ><span class="heading-page">Loading a Docker Image to an On-Premise
Docker Registry</span></a>.</div><div id="wwID0E4RFZ" class="Choice_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">loadImage</span> to load an image to a Docker registry. For more information about <span class="codeph">loadImage</span>, see 
    <a href="../pie-webhelp/to-docker_11.html#wwID0E21FZ"
   
     title="Pushing a Docker Image to an On-Premise Docker Registry"
    ><span class="heading-page">Pushing a Docker Image to an On-Premise
Docker Registry</span></a></div><div id="wwID0EBTFZ" class="Choice_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="codeph">pushImage</span> to push an <span class="ph">Integration Server</span> image created for an on-premise <span class="ph">Integration Server</span> to the <span class="ph">Integration Cloud</span> or a Docker registry. For more information about pushing an image to a Docker registry or <span class="ph">Integration Cloud</span>, see 
    <a href="../pie-webhelp/to-docker_11.html#wwID0E21FZ"
   
     title="Pushing a Docker Image to an On-Premise Docker Registry"
    ><span class="heading-page">Pushing a Docker Image to an On-Premise
Docker Registry</span></a> and 
    <a href="../pie-webhelp/to-docker_17.html#wwID0EW5HZ"
   
     title="Pushing the Docker Image to Integration Cloud"
    ><span class="heading-page">Pushing the Docker Image to Integration Cloud
</span></a></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2007-2023&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>