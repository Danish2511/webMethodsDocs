<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Publishing Documents to a webMethods Messaging Provider and Waiting for a Reply</title><link rel="Prev" href="to-overview_of_pub_sub_paths_5.html" title="Previous" /><link rel="Next" href="to-overview_of_pub_sub_paths_7.html" title="Next" /><link rel="StyleSheet" href="css/is_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/is_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/integration-server-integrated-webhelp/to-overview_of_pub_sub_paths_6.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pmm6dk4IPHM40g1ZwdPR7rw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/integration-server-integrated-webhelp/to-overview_of_pub_sub_paths_6.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Integration Server</span>&nbsp;10.11 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-webhelp_intro_is_pubsub_guide.html#wwconnect_header">Publish-Subscribe Developer’s Guide</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-overview_of_pub_sub_paths.html#wwconnect_header">Overview of Publishing and Subscribing</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-overview_of_pub_sub_paths_3.html#wwconnect_header">Overview of Publishing to a webMethods Messaging Provider</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Publishing Documents to a webMethods Messaging Provider and Waiting for a Reply</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0E15U3B" class="Heading_3">Publishing Documents to a <span class="ph">webMethods</span> Messaging Provider and Waiting for a Reply</div><div id="wwID0EP6U3B" class="Body">In a publish-and-wait scenario, a service publishes a document (a request) and then waits for a reply document. This is sometimes called the request/reply model. A request/reply can be synchronous or asynchronous.</div><div id="wwID0EY6U3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>In a <span class="term">synchronous</span> request/reply, the publishing flow service stops executing while it waits for a response. When the service receives a reply document from the specified client, the service resumes execution.</div><div id="wwID0ENAV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>In an <span class="term">asynchronous</span> request/reply, the publishing flow service continues executing after publishing the request document. That is, the publishing service does not wait for a reply before executing the next step in the flow service. The publishing flow service must invoke a separate service to retrieve the reply document.</div><div id="wwID0EDBV3B" class="Body">The following diagram illustrates how <span class="ph">Integration Server</span> and the <span class="ph">webMethods</span> messaging provider handle a synchronous request/reply. The <span class="ph">webMethods</span> messaging provider can be <span class="ph">Broker</span> or <span class="ph">Universal Messaging</span>.</div><div id="wwID0ECCV3B" class="Figure_Title">Publishing a document to the <span class="ph">webMethods</span> messaging provider and waiting for a reply</div><div class="ww_skin_page_overflow"><div id="wwID0E4BV3B-2" class="Figure"><img class="largesource" src="../integration-server-integrated-webhelp/images/ov_pub_wait_for_reply.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 216px; max-width: 403px; top: 0pt" alt="" /></div></div><div class="ww_skin_page_overflow"><table class="norules1" cellspacing="4" summary=""><tr><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 8.3%"><div id="wwID0E1DV3B" class="Table_Cell_Head">Step</div></td><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 91.6%"><div id="wwID0EAEV3B" class="Table_Cell_Head">Description</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EPEV3B" class="internalhead">1</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EVEV3B" class="Table_Cell">A publishing service sends a document (the request) to the dispatcher. <span class="ph">Integration Server</span> populates the <span class="varname">tag</span> field in the document envelope with a unique identifier that will be used to match up the reply document with this request.</div><div id="wwID0EEFV3B" class="Table_Cell">The publishing service enters into a waiting state. The service will not resume execution until it receives a reply from a subscriber or the wait time elapses. <span class="ph">Integration Server</span> begins tracking the wait time as soon as it publishes the document.</div><div id="wwID0EOFV3B" class="Table_Cell">If validation is configured for the publishable document type, <span class="ph">Integration Server</span> validates the document against its publishable document type before sending the document to the dispatcher. If the document is not valid, the service returns an exception specifying the validation error. The service unblocks, but with an exception.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5FV3B" class="internalhead">2</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EEGV3B" class="Table_Cell">The dispatcher sends the document to the <span class="ph">webMethods</span> messaging provider.</div><div id="wwID0EOGV3B" class="Note"><span class="Bold">Note:<br /></span>If the <span class="ph">webMethods</span> messaging provider is not available, the document is guaranteed, and use of the client side queue is configured, the dispatcher routes the document to the outbound document store. For more information, see 
    <a href="../integration-server-integrated-webhelp/to-overview_of_pub_sub_paths_5.html#wwID0EYVT3B"
   
     title="Publishing Documents When the webMethods Messaging Provider Is Not Available"
    ><span class="heading-page">Publishing Documents When the 
								webMethods Messaging Provider Is Not Available</span></a>.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EXHV3B" class="internalhead">3</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E4HV3B" class="Table_Cell">The <span class="ph">webMethods</span> messaging provider examines the storage type for the document to determine how to store the document.</div><div id="wwID0ELIV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If the document is volatile, the <span class="ph">webMethods</span> messaging provider stores the document in memory.</div><div id="wwID0EAJV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If the document is guaranteed, the <span class="ph">webMethods</span> messaging provider stores the document in memory and on disk.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E3JV3B" class="internalhead">4</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ECKV3B" class="Table_Cell">The <span class="ph">webMethods</span> messaging provider routes the document to subscribers by doing one of the following:</div><div id="wwID0EQKV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If the document was published (broadcast), the <span class="ph">webMethods</span> messaging provider identifies subscribers and enqueues a copy of the document for each subscriber.</div><div id="wwID0EFLV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If the document was delivered, the <span class="ph">webMethods</span> messaging provider enqueues the document for the destination specified in the delivery request.</div><div id="wwID0E2LV3B" class="Table_Cell">The <span class="ph">Broker</span> places documents in a queue for a subscriber. <span class="ph">Universal Messaging</span> places documents on a channel.</div><div id="wwID0EJMV3B" class="Table_Cell">A document remains enqueued on the <span class="ph">webMethods</span> messaging provider until it is picked up by the subscriber. If the time-to-live for the document elapses, the <span class="ph">webMethods</span> messaging provider discards the document. For more information about setting time-to-live for a publishable document type, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Service Development Help</span>.</div><div id="wwID0EBNV3B" class="Table_Cell">If there are no subscribers for the document and the messaging provider has been configured to handle dead letters (sometimes called dead events), the <span class="ph">webMethods</span> messaging provider routes the document to the dead letter queue or dead event store. For more information about configuring the messaging provider to handle documents for which there are no subscribers, refer to the documentation for the <span class="ph">webMethods</span> messaging provider that is in use.</div><div id="wwID0EPNV3B" class="Note"><span class="Bold">Note:<br /></span>If the <span class="ph">Broker</span> is the <span class="ph">webMethods</span> messaging provider and a deadletter subscription exists for the document, the <span class="ph">Broker</span> deposits the document in the queue containing the deadletter subscription. For more information about creating deadletter subscriptions, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Service Development Help</span>.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EBPV3B" class="internalhead">5</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHPV3B" class="Table_Cell">Subscribers retrieve and process the document.</div><div id="wwID0ENPV3B" class="Table_Cell">A subscriber uses the <span class="apiname">pub.publish:reply</span> service to compose and publish a reply document. This service automatically populates the <span class="varname">tag</span> field of the reply document envelope with the same value used in the <span class="varname">tag</span> field of the request document envelope.</div><div id="wwID0ECQV3B" class="Table_Cell">The <span class="apiname">pub.publish:reply</span> service also automatically specifies the requesting client as the recipient of the reply document.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ETQV3B" class="internalhead">6</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZQV3B" class="Table_Cell">One or more subscribers send reply documents to the <span class="ph">webMethods</span> messaging provider. The <span class="ph">webMethods</span> messaging provider stores the reply documents in memory.</div><div id="wwID0EHRV3B" class="Table_Cell">The <span class="ph">webMethods</span> messaging provider enqueues the reply documents in the request/reply queue or channel for the <span class="ph">Integration Server</span> that initiated the request.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2RV3B" class="internalhead">7</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EBSV3B" class="Table_Cell">The <span class="ph">Integration Server</span> that initiated the request retrieves the reply documents from the <span class="ph">webMethods</span> messaging provider. <span class="ph">Integration Server</span> uses the <span class="varname">tag</span> value of the reply document to match up the reply with the original request.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5SV3B" class="internalhead">8</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EETV3B" class="Table_Cell"><span class="ph">Integration Server</span> places the reply document in the pipeline of the waiting service. The waiting service resumes execution.</div></td></tr></table></div><div id="wwID0E2TV3B" class="Section_Title">Notes:</div><div id="wwID0EEUV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If the requesting service specified a publishable document type for the reply document, the reply document must conform to the specified type. Otherwise, the reply document can be an instance of any publishable document type.</div><div id="wwID0EVUV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>A single request might receive many replies. The <span class="ph">Integration Server</span> that initiated the request uses only the first reply document it retrieves from the <span class="ph">webMethods</span> messaging provider. <span class="ph">Integration Server</span> discards all other replies. <span class="emphasis">First</span> is arbitrarily defined. There is no guarantee provided for the order in which the <span class="ph">webMethods</span> messaging provider processes incoming replies.</div><div id="wwID0E2VV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>All reply documents are treated as volatile documents. Volatile documents are stored in memory and will be lost if resource on which the reply document is located shuts down or if a connection is lost while the reply document is in transit.</div><div id="wwID0EMWV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>When <span class="ph">Universal Messaging</span> is the <span class="ph">webMethods</span> messaging provider, reply documents use an encoding type of IData.</div><div id="wwID0EFXV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If the wait time elapses before the service receives a reply, <span class="ph">Integration Server</span> ends the request, and the service returns a null document that indicates the request timed out. <span class="ph">Integration Server</span> then executes the next step in the flow service. If a reply document arrives after the flow service resumes execution, <span class="ph">Integration Server</span> rejects the document and creates a journal log message stating that the document was rejected because there is no thread waiting for the document.</div><div id="wwID0ECYV3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>You can configure publishable document types and <span class="ph">Integration Server</span> so that <span class="ph">Integration Server</span> does not validate documents when they are published. For more information about validating publishable document types, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Service Development Help</span>.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2007-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>