<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Incorporating Echo Suppression Logic into an Update Service</title><link rel="Prev" href="to-synchronizing_data_between_multiple_resources_24.html" title="Previous" /><link rel="Next" href="to-appx_naming_guidelines.html" title="Next" /><link rel="StyleSheet" href="css/is_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/is_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/integration-server-integrated-webhelp/to-synchronizing_data_between_multiple_resources_25.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pb7YxEq_002fMVzVeEtN_002bYtRG6w" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/integration-server-integrated-webhelp/to-synchronizing_data_between_multiple_resources_25.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Integration Server</span>&nbsp;10.11 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-webhelp_intro_is_pubsub_guide.html#wwconnect_header">Publish-Subscribe Developer’s Guide</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-synchronizing_data_between_multiple_resources.html#wwconnect_header">Synchronizing Data Between Multiple Resources</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-synchronizing_data_between_multiple_resources_20.html#wwconnect_header">For N-Way Synchronizations Add Echo Suppression to Services</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-synchronizing_data_between_multiple_resources_24.html#wwconnect_header">Adding Echo Suppression to Update Trigger Services</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Incorporating Echo Suppression Logic into an Update Service</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0E2LI5B" class="Heading_4">Incorporating Echo Suppression Logic into an Update Service</div><div id="wwID0EEMI5B" class="Body">The following shows the sample update service with echo suppression logic added to it. The sample update service was presented in 
    <a href="../integration-server-integrated-webhelp/to-synchronizing_data_between_multiple_resources_19.html#wwID0EKEG5B"
   
     title="Setting Up Key Cross-Referencing in the Target Integration Server"
    ><span class="heading-page">Setting Up Key Cross-Referencing in the
						Target 
						Integration Server </span></a> along with a description of its flow steps, which are unnumbered in the sample below. The numbered flow steps in the sample below are the flow steps added for echo suppression. For more information about the numbered flow steps, see the table after the diagram.</div><div class="ww_skin_page_overflow"><div id="wwID0ETMI5B" class="Figure"><img class="largesource" src="../integration-server-integrated-webhelp/images/sync_latchingupdate_service.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 230px; max-width: 575px; top: 0pt" alt="" /></div></div><div class="ww_skin_page_overflow"><table class="norules1" cellspacing="4" summary=""><tr><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 7.4%"><div id="wwID0ENOI5B" class="Table_Cell_Head">Step</div></td><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 92.5%" colspan="2"><div id="wwID0ETOI5B" class="Table_Cell_Head">Description</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 7.4%"><div id="wwID0EEPI5B" class="internalhead">1</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 92.5%" colspan="2"><div id="wwID0EKPI5B" class="Table_Cell"><span class="inlinetitle">Determine whether the latch is open or closed for the changed object.</span> Invoke the <span class="apiname">pub.synchronization.latch:isLatchClosed</span> service to locate a row in the cross‑reference table for the changed object. Pass the <span class="apiname">isLatchClosed</span> service the following inputs that identify the object:</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 7.4%"></td><td class="internalheadrule" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 16.9%"><div id="wwID0ENQI5B" class="internalheadrule">In this input variable...</div></td><td class="internalheadrule" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 75.6%"><div id="wwID0ETQI5B" class="internalheadrule">Specify...</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EFRI5B" class="Table_Cell"><span class="varname">appId</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ERRI5B" class="Table_Cell">The identification of the application (e.g., Billing system).</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ECSI5B" class="Table_Cell"><span class="varname">objectId</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EOSI5B" class="Table_Cell">The object type (e.g., Account).</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E6SI5B" class="Table_Cell"><span class="varname">canonicalKey</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ELTI5B" class="Table_Cell">The canonical ID.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0E3TI5B" class="Table_Cell">The <span class="apiname">isLatchClosed</span> service uses the isLatchClosed field from the matching row to determine whether the latch is open or closed. If the isLatchClosed field is ‘false’, the latch is open, and the <span class="apiname">isLatchClosed</span> service returns ‘false’ in the <span class="varname">isLatchClosed</span> output variable. If the isLatchClosed field is ‘true’, the latch is closed, and the service returns ‘true’. For more information about the <span class="apiname">isLatchClosed</span> service, see the <span class="ph">the section </span><span class="ph_002c_Citation">pub.synchronization.latch:isLatchClosed</span><span class="ph"> in the </span><span class="ph_002c_ph"> </span><span class="ph_002c_ph_002c_Citation">webMethods Integration Server Built-In Services Reference</span><span class="ph">.</span>
    <a href="../integration-server-integrated-webhelp/pub_synchronization_latch_isLatchClosed.html#wwID0ECU4IB"
   
     title="pub.synchronization.latch:isLatchClosed"
    ><span class="ph_002c_heading-page">pub.synchronization.latch:isLatchClosed</span></a><span class="ph">.</span>.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGWI5B" class="internalhead">2</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0EMWI5B" class="Table_Cell"><span class="inlinetitle">Split logic based on whether the latch is open or closed.</span> Use a BRANCH flow step to split the logic. Set the <span class="uicontrol">Switch</span> property of the BRANCH to <span class="codeph">isLatchClosed</span>, to indicate that you want to split logic based on the value of the <span class="varname">isLatchClosed</span> pipeline variable.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EMXI5B" class="internalhead">3</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0ESXI5B" class="Table_Cell"><span class="inlinetitle">Build a sequence of steps to execute when the latch is open.</span> Because the <span class="uicontrol">Label</span> property for the SEQUENCE flow step is set to false, this sequence of operations is executed when the <span class="varname">isLatchClosed</span> variable is false, meaning the latch is open. When the latch is open, the target resource has not yet made the equivalent data change. This sequence of steps builds and sends a native document that the target resource uses to make the equivalent change.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EOYI5B" class="internalhead">4</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0EUYI5B" class="Table_Cell"><span class="inlinetitle">Close the latch.</span> When the latch is open, close the latch before sending the native document to the target resource. For n-way synchronizations because a target is also a source, when the resource receives and makes the equivalent data change, the resource then sends notification of a data change. By closing the latch before sending the native document to the target resource, you remove any chance that <span class="ph">Integration Server</span> will receive and act on a notification document being sent by the resource.</div><div id="wwID0EFZI5B" class="Table_Cell">To close the latch, invoke the <span class="apiname">pub.synchronization.latch:closeLatch</span> service. Pass the <span class="apiname">closeLatch</span> service the same input variables that were passed to the <span class="apiname">pub.sychronization.latch:isLatchClosed</span> service in step 1 above. For more information about the <span class="apiname">closeLatch</span> service, see the <span class="ph">the section </span><span class="ph_002c_Citation">pub.synchronization.latch:closeLatch</span><span class="ph"> in the </span><span class="ph_002c_ph"> </span><span class="ph_002c_ph_002c_Citation">webMethods Integration Server Built-In Services Reference</span><span class="ph">.</span>
    <a href="../integration-server-integrated-webhelp/pub_synchronization_latch_closeLatch.html#wwID0EMN4IB"
   
     title="pub.synchronization.latch:closeLatch"
    ><span class="ph_002c_heading-page">pub.synchronization.latch:closeLatch</span></a><span class="ph">.</span>.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EN2I5B" class="internalhead">5</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0ET2I5B" class="Table_Cell"><span class="inlinetitle">Build a sequence of steps to execute when the latch is closed.</span> Because the <span class="uicontrol">Label</span> property for the SEQUENCE flow step is set to true, this sequence of steps is executed when the <span class="varname">isLatchClosed</span> variable is true, meaning the latch is closed. When the latch is closed, the resource has already made the equivalent data change. As a result, the update service does <span class="emphasis">not</span> need to build or send a native document to the target resource.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EU3I5B" class="internalhead">6</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top" colspan="2"><div id="wwID0E13I5B" class="Table_Cell"><span class="inlinetitle">Re-open the latch.</span> Re-open the latch to reset the latch for future data changes. To re-open the latch, invoke the <span class="apiname">pub.synchronization.latch:openLatch</span> service. Pass the <span class="apiname">openLatch</span> service the same input variables that were passed to the <span class="apiname">pub.sychronization.latch:isLatchClosed</span> service in step 1 above. For more information about the <span class="apiname">openLatch</span> service, see the <span class="ph">the section </span><span class="ph_002c_Citation">pub.synchronization.latch:openLatch</span><span class="ph"> in the </span><span class="ph_002c_ph"> </span><span class="ph_002c_ph_002c_Citation">webMethods Integration Server Built-In Services Reference</span><span class="ph">.</span>
    <a href="../integration-server-integrated-webhelp/pub_synchronization_latch_openLatch.html#wwID0E3C5IB"
   
     title="pub.synchronization.latch:openLatch"
    ><span class="ph_002c_heading-page">pub.synchronization.latch:openLatch</span></a><span class="ph">.</span>.</div></td></tr></table></div><div id="wwID0EI6I5B" class="Important"><span class="Bold">Important:<br /></span>If multiple resources will make changes to the same object simultaneously or near simultaneously, echo suppression cannot guarantee successful updating. If you expect simultaneous or near simultaneous updates, you must take additional steps:</div><div id="wwID0ECAJ5B" class="Numbered_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>When defining the structure of a canonical document, include a tracking field that identifies the source of the change to the canonical document structure.</div><div id="wwID0ETAJ5B" class="Numbered_1_-_Note_-_Important_-_not_first"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>In the update service include a filter or BRANCH to test on the source field to determine whether to update the object.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2007-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>