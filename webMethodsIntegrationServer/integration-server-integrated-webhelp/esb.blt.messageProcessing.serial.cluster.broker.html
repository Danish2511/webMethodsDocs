<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Serial Processing with the webMethods Broker in a Clustered or a Non-Clustered Group of Integration Servers</title><link rel="Prev" href="esb.blt.messageProcessing.serial.cluster.html" title="Previous" /><link rel="Next" href="esb.blt.messageProcessing.serial.cluster.UM.html" title="Next" /><link rel="StyleSheet" href="css/is_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/is_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/integration-server-integrated-webhelp/esb.blt.messageProcessing.serial.cluster.broker.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pjb2KbobsHiDKxvnbeUbUJg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/integration-server-integrated-webhelp/esb.blt.messageProcessing.serial.cluster.broker.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Integration Server</span>&nbsp;10.11 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-webhelp_intro_sd_guide.html#wwconnect_header">Service Development Guide</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/esb.blt.html#wwconnect_header">Working with webMethods Messaging Triggers</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/esb.blt.messageProcessing.html#wwconnect_header">About Message Processing</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/esb.blt.messageProcessing.serial.html#wwconnect_header">Serial Processing</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/esb.blt.messageProcessing.serial.cluster.html#wwconnect_header">Serial Processing in a Cluster or Non-Clustered Group of Integration Servers</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Serial Processing with the webMethods Broker in a Clustered or a Non-Clustered Group of Integration Servers</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EHZJTB" class="Heading_5">Serial Processing with the <span class="ph">webMethods Broker</span> in a Clustered or a Non-Clustered Group of <span class="ph">Integration Server</span>s</div><div id="wwID0EI1JTB" class="Body">To ensure that a serial <span class="ph">webMethods messaging trigger</span> processes guaranteed documents from individual publishers in publication order, the <span class="ph">webMethods Broker</span> distributes documents from one publisher to a single server in a cluster or non-clustered group. The <span class="ph">webMethods Broker</span> continues distributing documents from the publisher to the same server as long as the server contains unacknowledged documents from that publisher in the trigger queue. Once the server acknowledges all of the documents from the publisher to the <span class="ph">webMethods Broker</span>, other servers in the cluster or non-clustered group can process future documents from the publisher.</div><div id="wwID0E51JTB" class="Body">For example, suppose that a cluster contains two servers: ServerX and ServerZ. Each of these servers contains the <span class="ph">webMethods messaging trigger</span> <span class="apiname">processCustomerInfo</span>. The <span class="apiname">processCustomerInfo</span> <span class="ph">webMethods messaging trigger</span> specifies serial document processing with a capacity of 2 and a refill level of 1. For each publisher, the cluster must process documents for this <span class="ph">webMethods messaging trigger</span> in the publication order. In this example, the <span class="apiname">processCustomerInfo</span> trigger client queue on the <span class="ph">webMethods Broker</span> contains documents from PublisherA, PublisherB, and PublisherC. PublisherA published documents <span class="apiname">A1</span> and <span class="apiname">A2</span>, PublisherB published documents <span class="apiname">B1</span>, <span class="apiname">B2</span>, and <span class="apiname">B3</span>, and PublisherC published documents <span class="apiname">C1</span>and <span class="apiname">C2</span>.</div><div id="wwID0EG4JTB" class="Body">The following illustration and explanation describe how serial document processing works in a clustered environment that uses <span class="ph">webMethods Broker</span> as the messaging provider.</div><div id="wwID0EX4JTB" class="Figure_Title">Serial processing in a cluster of <span class="ph">Integration Server</span>s</div><div class="ww_skin_page_overflow"><div id="wwID0EQ4JTB-2" class="Figure"><img class="Default" src="../integration-server-integrated-webhelp/images/BrLocTrig_SerialProcClusterIS.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 566px; max-width: 448px; top: 0pt" alt="" /></div></div><div class="ww_skin_page_overflow"><table class="norules1" cellspacing="4" summary=""><tr><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; text-align: center; width: 8.8%"><div id="wwID0EU6JTB" class="Table_Cell_Head">Step</div></td><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 91.1%"><div id="wwID0E26JTB" class="Table_Cell_Head">Description</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; text-align: center; vertical-align: top"><div id="wwID0EKAKTB" class="internalhead">1</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ESAKTB" class="Table_Cell">ServerX retrieves the first two documents in the queue (documents <span class="apiname">A1</span> and <span class="apiname">B1</span>) to fill its <span class="apiname">processCustomerInfo</span> trigger queue to capacity. ServerX begins processing document <span class="apiname">A1</span>.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; text-align: center; vertical-align: top"><div id="wwID0ETBKTB" class="internalhead">2</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2BKTB" class="Table_Cell">ServerZ retrieves the documents <span class="apiname">C1</span> and <span class="apiname">C2</span> to fill its <span class="apiname">processCustomerInfo</span> trigger queue to capacity. ServerZ begins processing the document <span class="apiname">C1</span>.</div><div id="wwID0EWCKTB" class="Table_Cell">Even though document <span class="apiname">B2</span> is the next document in the queue, the <span class="ph">webMethods Broker</span> does not distribute document <span class="apiname">B2</span> from PublisherB to ServerZ because ServerX contains unacknowledged documents from PublisherB.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; text-align: center; vertical-align: top"><div id="wwID0EQDKTB" class="internalhead">3</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYDKTB" class="Table_Cell">ServerX finishes processing document <span class="apiname">A1</span> and acknowledges document <span class="apiname">A1</span> to the <span class="ph">webMethods Broker</span>.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; text-align: center; vertical-align: top"><div id="wwID0ETEKTB" class="internalhead">4</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E2EKTB" class="Table_Cell">ServerX requests 1 more document from the <span class="ph">webMethods Broker</span>. (The <span class="apiname">processCustomerInfo</span> <span class="ph">webMethods messaging trigger</span> has refill level of 1.) The <span class="ph">webMethods Broker</span> distributes document <span class="apiname">B2</span> from PublisherB to ServerX.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; text-align: center; vertical-align: top"><div id="wwID0E5FKTB" class="internalhead">5</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGGKTB" class="Table_Cell">ServerZ finishes processing document <span class="apiname">C1</span> and acknowledges document <span class="apiname">C1</span>to the <span class="ph">webMethods Broker</span></div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; text-align: center; vertical-align: top"><div id="wwID0EBHKTB" class="internalhead">6</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EIHKTB" class="Table_Cell">ServerZ requests 1 more document from the <span class="ph">webMethods Broker</span>. The <span class="ph">webMethods Broker</span> distributes document <span class="apiname">A2</span>to ServerZ.</div><div id="wwID0E2HKTB" class="Table_Cell">ServerZ can process a document from PublisherA because the other server in the cluster (ServerX) does not have any unacknowledged documents from PublisherA. Even though document <span class="apiname">B3</span> is the next document in the queue, the <span class="ph">webMethods Broker</span> does not distribute document <span class="apiname">B3</span>to ServerZ because ServerX contains unacknowledged documents from PublisherB.</div></td></tr></table></div><div id="wwID0EUIKTB" class="Body">Notes:</div><div id="wwID0E6IKTB" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>The <span class="ph">webMethods Broker</span> and <span class="ph">Integration Server</span>s in a cluster cannot ensure that serial <span class="ph">webMethods messaging trigger</span>s process volatile documents from the same publisher in the order in which the documents were published.</div><div id="wwID0E5JKTB" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>When documents are delivered to the default client in a cluster, the <span class="ph">webMethods Broker</span> and <span class="ph">Integration Server</span>s cannot ensure that documents from the same publisher are processed in publication order. This is because the <span class="ph">Integration Server</span> acknowledges documents delivered to the default client as soon as they are retrieved from the <span class="ph">webMethods Broker</span>.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2007-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>