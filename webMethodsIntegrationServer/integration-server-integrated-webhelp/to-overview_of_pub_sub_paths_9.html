<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>The Subscribe Path for Delivered Documents When Using webMethods Broker</title><link rel="Prev" href="to-overview_of_pub_sub_paths_8.html" title="Previous" /><link rel="Next" href="to-overview_of_pub_sub_paths_10.html" title="Next" /><link rel="StyleSheet" href="css/is_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/is_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/integration-server-integrated-webhelp/to-overview_of_pub_sub_paths_9.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN4ZNqinWE3fHdFCaK3a1MFg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/integration-server-integrated-webhelp/to-overview_of_pub_sub_paths_9.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Integration Server</span>&nbsp;10.11 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-webhelp_intro_is_pubsub_guide.html#wwconnect_header">Publish-Subscribe Developer’s Guide</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-overview_of_pub_sub_paths.html#wwconnect_header">Overview of Publishing and Subscribing</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-overview_of_pub_sub_paths_7.html#wwconnect_header">Overview of Subscribing from webMethods Messaging Provider</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">The Subscribe Path for Delivered Documents When Using webMethods Broker</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0E4PW3B" class="Heading_3">The Subscribe Path for Delivered Documents When Using <span class="ph">webMethods Broker</span></div><div id="wwID0ESQW3B" class="Body">A publishing service can deliver a document by specifying the destination of the document. That is, the publishing service specifies the <span class="ph">Broker</span> client that is to receive the document. When the <span class="ph">Broker</span> receives a delivered document, it places a copy of the document in the queue for the specified client only.</div><div id="wwID0EARW3B" class="Body">Typically, documents are delivered to the default client. The default client is the <span class="ph">Broker</span> client created for <span class="ph">Integration Server</span> when <span class="ph">Integration Server</span> first configures its connection to the <span class="ph">Broker</span>.</div><div id="wwID0EWRW3B" class="Note"><span class="Bold">Note:<br /></span>If a publishing service specifies an individual trigger as the destination of the document (the publishing service specifies a trigger client ID as the destination ID), the subscribe path the document follows is the same as the path followed by a published document.</div><div id="wwID0EMSW3B" class="Body">The following diagram illustrates the subscription path for a document delivered to the default client when <span class="ph">Broker</span> is the messaging provider.</div><div id="wwID0E2SW3B" class="Figure_Title">Subscribe path for documents delivered to the default client when using <span class="ph">Broker</span></div><div class="ww_skin_page_overflow"><div id="wwID0EWSW3B-2" class="Figure"><img class="largesource" src="../integration-server-integrated-webhelp/images/ov_sub_path_defaullt_client.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 368px; max-width: 387px; top: 0pt" alt="" /></div></div><div class="ww_skin_page_overflow"><table class="norules1" cellspacing="4" summary=""><tr><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 7.4%"><div id="wwID0ETUW3B" class="Table_Cell_Head">Step</div></td><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 92.5%"><div id="wwID0EZUW3B" class="Table_Cell_Head">Description</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EIVW3B" class="internalhead">1</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EOVW3B" class="Table_Cell">The dispatcher on <span class="ph">Integration Server</span> requests documents from the default client’s queue on the <span class="ph">Broker</span>.</div><div id="wwID0E3VW3B" class="Note"><span class="Bold">Note:<br /></span>The default client is the <span class="ph">Broker</span> client created for <span class="ph">Integration Server</span>. <span class="ph">Broker</span> places documents in the default client’s <span class="ph">Broker</span> queue only if the publisher delivered the document to <span class="ph">Integration Server</span>’s client ID.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EMXW3B" class="internalhead">2</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ESXW3B" class="Table_Cell">The thread retrieves documents delivered to the default client in batches.</div><div id="wwID0EYXW3B" class="Table_Cell">The number of documents the thread retrieves at one time is determined by the capacity and refill level of the default document store and the number of documents available for the default client on the <span class="ph">Broker</span>. For more information about configuring the default document store, see <span class="ph">the section </span><span class="ph_002c_Citation">Configuring the Default Document Store</span><span class="ph"> in the </span><span class="ph_002c_ph"> </span><span class="ph_002c_ph_002c_Citation">webMethods Integration Server Administrator’s Guide</span><span class="ph">.</span><span class="ph"> </span>
    <a href="../integration-server-integrated-webhelp/configure_wm_msg_document_stores_2.html#wwID0EUA1R"
   
     title="Configuring the Default Document Store"
    ><span class="ph_002c_heading-page">Configuring the Default Document
						Store</span></a><span class="ph">.</span></div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ERZW3B" class="internalhead">3</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EXZW3B" class="Table_Cell">The dispatcher places a copy of the documents in memory in the default document store.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EC1W3B" class="internalhead">4</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EI1W3B" class="Table_Cell">The dispatcher identifies subscribers to the document and routes a copy of the document to each subscriber’s trigger queue.</div><div id="wwID0EO1W3B" class="Table_Cell">In the case of delivered documents, <span class="ph">Integration Server</span> saves the documents to a trigger queue. The trigger queue is located within a trigger document store that is saved on disk.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E51W3B" class="internalhead">5</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EE2W3B" class="Table_Cell"><span class="ph">Integration Server</span> removes the copy of the document from the default document store and, if the document is guaranteed, returns an acknowledgement to the <span class="ph">Broker</span>. The <span class="ph">Broker</span> removes the document from the default client’s queue.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E32W3B" class="internalhead">6</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EC3W3B" class="Table_Cell">The dispatcher obtains a thread from the server thread pool, pulls the document from the trigger queue, and evaluates the document against the conditions in the trigger.</div><div id="wwID0EI3W3B" class="Note"><span class="Bold">Note:<br /></span>If exactly-once processing is configured for the trigger, the <span class="ph">Integration Server</span> first determines whether the document is a duplicate of one already processed by the trigger. <span class="ph">Integration Server</span> continues processing the document only if the document is new.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EM4W3B" class="internalhead">7</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ES4W3B" class="Table_Cell">If the document matches a trigger condition, <span class="ph">Integration Server</span> executes the trigger service associated with that condition.</div><div id="wwID0E34W3B" class="Table_Cell">If the document does not match a trigger condition, <span class="ph">Integration Server</span>, sends an acknowledgement to the trigger queue, discards the document (removes it from the trigger queue), and returns the server thread to the server thread pool. <span class="ph">Integration Server</span> also generates a journal log message stating that the document did not match a condition.</div></td></tr><tr><td class="internalhead" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EQ5W3B" class="internalhead">8</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EW5W3B" class="Table_Cell">After the trigger service executes to completion (success or error), one of the following occurs:</div><div id="wwID0EA6W3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If the trigger service executed successfully, <span class="ph">Integration Server</span> returns an acknowledgement to the trigger queue (if this is a guaranteed document), removes the document from the trigger queue, and returns the server thread to the thread pool.</div><div id="wwID0EV6W3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If a service exception occurs, the trigger service ends in error and <span class="ph">Integration Server</span> rejects the document, removes the document from the trigger queue, returns the server thread to the thread pool, and sends an error document to indicate that an error has occurred. If the document is guaranteed, <span class="ph">Integration Server</span> returns an acknowledgement to the trigger queue. The trigger queue removes its copy of the guaranteed document from storage.</div><div id="wwID0EOAX3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If a transient error occurs during trigger service execution and the service catches the error, wraps it and re-throws it as an ISRuntimeException, then <span class="ph">Integration Server</span> waits for the length of the retry interval and re-executes the service using the original document as input. If <span class="ph">Integration Server</span> reaches the maximum number of retries and the trigger service still fails because of a transient error, <span class="ph">Integration Server</span> treats the last failure as a service error. For more information about retrying a trigger service, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Service Development Help</span>.</div></td></tr></table></div><div id="wwID0EDCX3B" class="Section_Title">Notes:</div><div id="wwID0EMCX3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="ph">Integration Server</span> saves delivered documents in a trigger document store located on disk. <span class="ph">Integration Server</span> saves published documents in a trigger document store located in memory.</div><div id="wwID0EFDX3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If <span class="ph">Integration Server</span> shuts down before processing a guaranteed document saved in a trigger document store on disk, <span class="ph">Integration Server</span> recovers the document from the trigger document store when it restarts. Volatile documents are saved in memory and are not recovered up restart.</div><div id="wwID0E5DX3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If a service generates audit data on error and includes a copy of the input pipeline in the service log, you can use <span class="ph">webMethods Monitor</span> to re-invoke the trigger service at a later time. For more information about configuring services to generate audit data, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Service Development Help</span>.</div><div id="wwID0E4EX3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>It is possible that a document could match more than one condition in a trigger. However, <span class="ph">Integration Server</span> executes only the service associated with the first matched condition.</div><div id="wwID0ESFX3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>The processing mode for a trigger determines whether <span class="ph">Integration Server</span> processes documents in a trigger queue serially or concurrently. In serial processing, <span class="ph">Integration Server</span> processes the documents one at a time in the order in which the documents were placed in the trigger queue. In concurrent processing, <span class="ph">Integration Server</span> processes as many documents as it can at one time, but not necessarily in the same order in which the documents were placed in the queue. For more information about document processing, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Service Development Help</span>.</div><div id="wwID0EZGX3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If a transient error occurs during document retrieval or storage, the audit subsystem logs the document and assigns it a status of FAILED. You can use <span class="ph">webMethods Monitor</span> to find and resubmit documents with a FAILED status if the document was published locally or received from <span class="ph">Broker</span>. For more information about using <span class="ph">webMethods Monitor</span>, see the <span class="ph">webMethods Monitor</span> documentation.</div><div id="wwID0E1HX3B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>You can configure a trigger to suspend and retry at a later time if retry failure occurs. <span class="term">Retry failure</span> occurs when <span class="ph">Integration Server</span> makes the maximum number of retry attempts and the trigger service still fails because of an ISRuntimeException. For more information about handling retry failure, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Service Development Help</span>.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2007-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>