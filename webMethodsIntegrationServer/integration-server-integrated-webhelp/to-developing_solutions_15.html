<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Writing the Logic to Initiate Download Requests</title><link rel="Prev" href="to-developing_solutions_14.html" title="Previous" /><link rel="Next" href="to-developing_solutions_16.html" title="Next" /><link rel="StyleSheet" href="css/is_integrated_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/is_integrated_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/integration-server-integrated-webhelp/to-developing_solutions_15.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pmlckA71FFVaUVxb2DjyjIg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/integration-server-integrated-webhelp/to-developing_solutions_15.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Integration Server</span>&nbsp;10.11 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-webhelp_intro_data_sync_mobile_support.html#wwconnect_header">Developing Data Synchronization Solutions with webMethods Mobile Support</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-developing_solutions.html#wwconnect_header">Developing Solutions Using Mobile Support</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../integration-server-integrated-webhelp/to-developing_solutions_11.html#wwconnect_header">Step 3: Write the Mobile Application</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Writing the Logic to Initiate Download Requests</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0E3SE1B" class="Heading_3">Writing the Logic to Initiate Download Requests</div><div id="wwID0EFTE1B" class="Body">Your mobile application should include logic to download backend data from the server to the mobile device. This logic is needed to accomplish the following:</div><div id="wwID0EQTE1B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Populate the mobile device’s local database with data when the mobile application receives a response for the download request.</div><div id="wwID0EDUE1B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Overwrite the mobile device’s local data with backend data from the server when needed in the following situations:</div><div id="wwID0E2UE1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>When you specify or change filters to download a subset of data</div><div id="wwID0EOVE1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>When you receive a “success” status from the server (status code <span class="codeph">40</span>) indicating that the download request was processed successfully</div><div id="wwID0EFWE1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>When the device’s data becomes corrupted</div><div id="wwID0E2WE1B" class="Body">Include the following:</div><div id="wwID0EGXE1B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If you want to define a filter that specifies a subset of data to download from the backend application (for example, to reduce the amount of data synchronized over a cellular network or to restrict downloaded data to a particular project), invoke the <span class="apiname">add</span> method from the <span class="apiname">com.softwareag.mobile.data.sync.Filter</span> class. Keep the following points in mind:</div><div id="wwID0EIYE1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Invoke the <span class="apiname">add</span> method once for each filter key that the business integration developer specifies in the corresponding mobile sync component.</div><div id="wwID0EAZE1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If a particular filter key is defined in the mobile sync component and you do not want that key to be applied, set the value for the key to null.</div><div id="wwID0ETZE1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If you pass more than one filter key, <span class="ph">Mobile Support</span> returns a record to the mobile application only if the record matches all of the specified filter keys.</div><div id="wwID0EK1E1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>You can specify multiple values for a filter key. If you do so, <span class="ph">Mobile Support</span> returns records that match any of the values.</div><div id="wwID0EB2E1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If you change a filter’s key or values later, you must invoke the <span class="apiname">download</span> method from the <span class="apiname">com.softwareag.mobile.data.sync.DataSynchronization</span> class, as described later in this procedure, to download data that meets the revised filter criteria.</div><div id="wwID0E52E1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>You can invoke the <span class="apiname">getKeys</span> method in the <span class="apiname">com.softwareag.mobile.data.sync.Filter</span> class to see a list of filter keys you previously added. To see the values that are set for a specified filter key, invoke the <span class="apiname">get</span> method. To see the number of filter key/value pairs defined, invoke the <span class="apiname">size</span> method.</div><div id="wwID0EH4E1B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Invoke the <span class="apiname">download</span> method from the <span class="apiname">com.softwareag.mobile.data.sync.DataSynchronization</span> class. This method passes the following parameters:</div><div id="wwID0EJ5E1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">Mobile sync component alias.</span> Obtain this alias from the business integration developer who created the mobile sync component.</div><div id="wwID0EB6E1B" class="List_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="inlinetitle">Filter.</span> If you used the <span class="apiname">add</span> method as described previously to define a filter, pass the filter instance to the <span class="apiname">download</span> method.</div><div id="wwID0EDAF1B" class="List_2_Continued">If you did not define a filter using the <span class="apiname">add</span> method, set the <span class="varname">filter</span> instance to null.</div><div id="wwID0EWAF1B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>The <span class="apiname">com.softwareag.mobile.data.sync.ResponseSet</span> class encapsulates the response from the synchronization request. The response includes records from the server (filtered, if a filter was supplied with the request). Use the <span class="apiname">getRowStructures</span> and <span class="apiname">getStatus</span> methods in this class to process the response further.</div><div id="wwID0EYBF1B" class="List_1_Continued"><span class="ph">Mobile Support</span> returns the following status codes:</div><div class="ww_skin_page_overflow"><table class="norules1" cellspacing="4" summary=""><tr><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 21.7%"><div id="wwID0EHDF1B" class="Table_Cell_Head">Status Code</div></td><td class="Table_Cell_Head" style="border-bottom-color: #0899CC; border-bottom-style: solid; border-bottom-width: thin; padding-left: 2pt; padding-right: 2pt; width: 78.2%"><div id="wwID0ENDF1B" class="Table_Cell_Head">Meaning</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E3DF1B" class="Table_Cell"><span class="codeph">30</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHEF1B" class="Table_Cell">An error occurred in the configuration or state of the mobile sync component associated with the mobile application.</div><div id="wwID0ENEF1B" class="Table_Cell">To resolve this error, work with the server administrator to ensure that the association between the mobile application version and the mobile sync component is valid and that the mobile sync component is enabled. If appropriate for your business need, have the mobile application provide the user with feedback about the error and instructions for resubmitting the data.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EYEF1B" class="Table_Cell"><span class="codeph">31</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EDFF1B" class="Table_Cell">The mobile application passed a filter with the request, and a filter validation error occurred.</div><div id="wwID0EJFF1B" class="Table_Cell">To resolve this error, ensure that the mobile application passes the expected number of filter keys and that the filter key names match those specified in the mobile sync component’s filter definition.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUFF1B" class="Table_Cell"><span class="codeph">40</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E6FF1B" class="Table_Cell"><span class="ph">Mobile Support</span> processed the synchronization request successfully.</div><div id="wwID0EJGF1B" class="Table_Cell">Clear the data corresponding to the mobile sync component from the mobile device’s local database. Then, process the response set to write the new data received from the server to the local database. Including this logic in the application helps prevent data inconsistencies by providing the application with a fresh set of records.</div><div id="wwID0EOGF1B" class="Note"><span class="Bold">Note:<br /></span>Clear and refresh the mobile device’s local database only when the server returns a status code of <span class="codeph">40</span>.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EOHF1B" class="Table_Cell"><span class="codeph">50</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EZHF1B" class="Table_Cell"><span class="ph">Mobile Support</span> encountered an internal error while processing the synchronization request.</div><div id="wwID0EDIF1B" class="Table_Cell">Work with the server administrator to resolve this error. If appropriate for your business need, have the mobile application provide the user with feedback about the error and instructions for resubmitting the data.</div></td></tr></table></div><div id="wwID0EOIF1B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Include logic to handle user interface messages based on the status messages received from <span class="ph">Mobile Support</span>.</div><div id="wwID0EFJF1B" class="Important_1"><span class="Bold">Important:<br /></span>If a mobile application user changes data on the device and then performs a “download” action (instead of a “sync” action), the user’s local changes will be lost when <span class="ph">Mobile Support</span> returns data from the backend application to the device.</div><div id="wwID0EBKF1B" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Invoke any of the other methods in the <span class="ph">Mobile Support</span> Client library as needed for your business needs. For details on these methods, see <span class="ph"> </span><span class="ph_002c_Citation">webMethods Mobile Support Client Java API Reference</span>.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright © 2007-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>