<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Replaying Salesforce events</title><link rel="Prev" href="to-custom_connector_6.html" title="Previous" /><link rel="Next" href="to-custom_connector_8.html" title="Next" /><link rel="StyleSheet" href="css/_cloudstreams_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_cloudstreams_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/wst-webhelp/to-custom_connector_7.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN74EyX0WJcBF7fSqriHMg0w" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/wst-webhelp/to-custom_connector_7.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>CloudStreams</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../wst-webhelp/to-wst_webhelp_landing_page.html#wwconnect_header">webMethods CloudStreams Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../wst-webhelp/_cloudstreams_webhelp.1.006.html#wwconnect_header">Administering webMethods CloudStreams</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../wst-webhelp/to-custom_connector.html#wwconnect_header">Cloud Connections, Services, and Connector Listeners</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">Replaying Salesforce events</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EDMDQ" class="Heading_3">Replaying Salesforce events</div><div id="wwID0ETMDQ" class="Body"><span class="ph">CloudStreams</span> connector provides a near real-time integration with Salesforce by leveraging their Streaming APIs based on Bayeux protocol and CometD. The underlying communication is based on long polling where the connector listener establishes a persistent connection with the Salesforce provider. This connection remains open while transmitting the events until either side closes the connection. Through this established connection, events are streamed to the listener. If the connection is lost due to a network failure or any other reason, you can retrieve the standard-volume events that are within Salesforce's 24-hour retention window.</div><div id="wwID0E3MDQ" class="Note"><span class="Bold">Note:<br /></span>You can retrieve Salesforce events only if you are using Salesforce v37.0 or later and <span class="ph">CloudStreams</span> v10.3 or later.</div><div id="wwID0EWNDQ" class="Body">Each Salesforce event is assigned an opaque ID which is unique for each event. This ID is contained in the <span class="varname">replayId</span> field of the event object. The <span class="varname">replayId</span> field value which is populated by Salesforce when the event is delivered to subscribers, refers to the position of the event in the event stream. For consecutive events, <span class="varname">replayId</span> values may have a break between them, for example, the event with ID 110 may follow the event with ID 101.</div><div id="wwID0ELODQ" class="Body"><span class="emphasis">Example of an event object that Salesforce sends to its subscribed clients</span></div><div id="wwID0EVODQ" class="Preformatted">{<br />          "clientId":"a1ps4wpe52qytvcvbsko09tapc",<br />          "data":{<br />             "event":{<br />                "createdDate":"2016-03-29T19:05:28.334Z",<br />                "replayId":55<br />                },<br />             "payload":"This is a message."<br />             },<br />         "channel":"/u/TestStreaming"<br />         }<br /></div><div id="wwID0E2ODQ" class="Body">To replay events, Salesforce provides a way to configure the <span class="varname">replayId</span> while subscribing to a particular channel. You can replay the lost Salesforce events for a Cloudstreams connector listener by specifying the <span class="uicontrol"> Replay Options</span> using the CloudStreams Administration console in Integration Server Administrator.</div><div class="ww_skin_page_overflow"><table class="NoRules2" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="padding-left: 2pt; padding-right: 2pt; width: 147.6pt"><div id="wwID0EQQDQ" class="Table_Cell_Head">Replay Option (replayId)</div></td><td class="Table_Cell_Head" style="padding-left: 2pt; padding-right: 2pt; width: 296.64pt"><div id="wwID0EWQDQ" class="Table_Cell_Head">Usage</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EFRDQ" class="Table_Cell">NEW (-1)</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ELRDQ" class="Table_Cell">Receive new events that are broadcast after the client subscribes.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EWRDQ" class="Table_Cell">ALL (-2)</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E3RDQ" class="Table_Cell">Receive all events including past events that are within the retention window including new events.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHSDQ" class="Table_Cell">LAST-RECEIVED</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ENSDQ" class="Table_Cell">Receive all the events after the last received event by CloudStreams within the retention window. This configuration is helpful especially in cases such as sudden missing events due to a network failure or any other unexpected error.</div><div id="wwID0ETSDQ" class="Table_Cell">For example, if the connector listener subscription is active, and a temporary network disruption can cause a loss of events. However, if you have configured the connector listener with this option then the missing events are automatically replayed as soon as the connectivity is restored with a <span class="varname">replay id</span> that was last received by CloudStreams before the network failure.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EETDQ" class="Table_Cell">CUSTOM</div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EKTDQ" class="Table_Cell">Receive all the events specified by a <span class="varname">replayId</span> computed by a custom service. You can store and compute the <span class="varname">replayId</span>s of the past events. This option lets you point to any <span class="varname">replay id</span> in the old event stream. You must write a custom service adhering to <span class="codeph">wm.cloudstreams.listener.metadata.connection.specs:retrieveReplayIDSpec</span> and it must map the <span class="varname">replayId</span> to <span class="parmname">computedReplayID</span> key. This service must be provided in the <span class="uicontrol">Retrieve Replay ID Service</span> field. The configured service is executed that is subscribing to Salesforce Streaming API and the value of the <span class="codeph">computedReplayID</span> is used to specify the <span class="varname">replayId</span> during subscription.</div></td></tr></table></div><div id="wwID0E6UDQ" class="Note"><span class="Bold">Note:<br /></span>Currently, the replay options are supported only for Salesforce Push Topic.</div><div id="wwID0EVVDQ" class="procedure"><span><img src="icon_task_xpe.png" alt="*" border="0" width="20" height="13" /></span>To replay Salesforce events</div><div id="wwID0EBWDQ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span><span class="Command">Go to </span><span class="Command_002c_inlinetitle_002c_inlinetitle">Integration Server Administrator</span><span class="Command_002c_inlinetitle"> &gt; Solutions &gt; </span><span class="Command_002c_inlinetitle_002c_inlinetitle">CloudStreams</span><span class="Command_002c_inlinetitle"> &gt; Providers</span><span class="Command">. </span></div><div id="wwID0EMXDQ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span><span class="Command">Select the Salesforce.com provider to list all the connectors. </span></div><div id="wwID0EEYDQ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span><span class="Command">Click on the connector for which you have already created a listener. </span></div><div id="wwID0E3YDQ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span><span class="Command">Go to the </span><span class="Command_002c_uicontrol">Listener</span><span class="Command"> page and </span><span class="Command_002c_emphasis">disable</span><span class="Command"> the Salesforce connector listener for which you want to configure the replay option. </span></div><div id="wwID0EB1DQ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>5. </span></span><span class="Command">Click </span><span class="Command_002c_uicontrol">Configure</span><span class="Command">. </span></div><div id="wwID0EA2DQ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>6. </span></span><span class="Command"> In the </span><span class="Command_002c_uicontrol">Replay Options</span><span class="Command"> field, choose: </span></div><div id="wwID0EE3DQ" class="Choice_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">ALL</span> - To replay all the events for the last 24 hours.</div><div id="wwID0E13DQ" class="Choice_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">NEW</span> - To replay only the new events from the time the connector listener is enabled.</div><div class="ww_skin_page_overflow"><div id="wwID0EQ4DQ" class="Figure_2"><img class="Default" src="../wst-webhelp/images/listener5.png" width="100%" style="display: block; float: none; left: 0pt; max-height: 193px; max-width: 382px; top: 0pt" alt="" /></div></div><div id="wwID0EE5DQ" class="Choice_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">LAST-RECEIVED</span>- To replay all the events after the event that was last received by CloudStreams, within the retention window.</div><div id="wwID0E15DQ" class="Choice_2"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">CUSTOM</span>- To replay the events after the event specified by a <span class="varname">replayId</span> that is computed by a custom service. The customized service is provided in the <span class="uicontrol">Retrieve ReplayID Service</span> field.</div><div class="ww_skin_page_overflow"><div id="wwID0EZ6DQ" class="Choice_2_Continued"><img class="Default" src="../wst-webhelp/images/custom_replay_id.PNG" width="100%" style="display: inline; float: none; left: 0pt; max-height: 100px; max-width: 589px; top: 0pt" alt="" /></div></div><div id="wwID0ELAEQ" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>7. </span></span><span class="Command">Click </span><span class="Command_002c_uicontrol">Enable</span><span class="Command"> </span></div><div id="wwID0EKBEQ" class="Step_Result_1">While enabling the listener, you can choose to provide a <span class="varname">replayId</span> in the <span class="uicontrol">Specify ReplayID</span> field. This is an <span class="emphasis">optional</span> field. If you provide the <span class="varname">replayId</span> in this field, then all the events past that <span class="varname">replayId</span> will be replayed and the action cannot be undone. This input <span class="varname">replayId</span> overrides all the other configurations. If you choose to ignore this field, then the <span class="varname">replayId</span> derived from the <span class="uicontrol">Replay Option</span> setting will take effect. Additionally, this <span class="varname">replayId</span> can only be tracked as part of auditing or logging as it is not stored within CloudStreams.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright Â© 2013-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>