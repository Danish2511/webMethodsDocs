<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>The Error Sequence Step (REST)</title><link rel="Prev" href="to-virtual_services_62.html" title="Previous" /><link rel="Next" href="to-virtual_services_64.html" title="Next" /><link rel="StyleSheet" href="css/_cloudstreams_webhelp.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_cloudstreams_webhelp_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/wst-webhelp/to-virtual_services_63.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN2tW7TO42wFHd7O0Ynj19qw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/wst-webhelp/to-virtual_services_63.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>CloudStreams</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../wst-webhelp/to-wst_webhelp_landing_page.html#wwconnect_header">webMethods CloudStreams Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../wst-webhelp/_cloudstreams_webhelp.1.006.html#wwconnect_header">Administering webMethods CloudStreams</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../wst-webhelp/to-virtual_services.html#wwconnect_header">Virtual Services</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../wst-webhelp/to-virtual_services_48.html#wwconnect_header">Creating a New Virtual Service (REST)</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">The Error Sequence Step (REST)</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EV2PO" class="Heading_4">The <span class="Quote">Error Sequence</span> Step (REST)</div><div id="wwID0EL3PO" class="Body"><span class="ph">CloudStreams</span> returns a default fault response to the consuming application, which you can customize with context variables. This fault response is used for faults returned by the native service provider as well as faults returned by internal <span class="ph">CloudStreams</span> exceptions, such as policy violation errors, connection timeouts, etc. In addition, you can:</div><div id="wwID0E53PO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Choose whether or not to send the native service provider's service fault content, or just send the response message.</div><div id="wwID0ER4PO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Invoke IS services to pre-process or post-process the error messages.</div><div id="wwID0EF5PO" class="Body">You use this step to configure error messaging for each virtual service individually. If you want to configure global error responses for <span class="emphasis">all</span> virtual services, set the Service Fault Configuration options, which are located in the <span class="ph">Integration Server Administrator</span> (go to <span class="uicontrol">Solutions &gt; CloudStreams &gt; Administration &gt; Service Fault Configuration</span>). For details, see 
    <a href="../wst-webhelp/to-admin_config_10.html#wwID0EJMDK"
   
     title="Setting the Service Fault Configuration Options"
    ><span class="heading-page">Setting the Service Fault Configuration
								Options</span></a>.</div><div id="wwID0ED6PO" class="procedure"><span><img src="icon_task_xpe.png" alt="*" border="0" width="20" height="13" /></span>To configure the <span class="procedure">Error Sequence</span> step (REST)</div><div id="wwID0EV6PO" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span><span class="Command">Open </span><span class="Command_002c_Command">Software AG Designer</span><span class="Command"> and display the </span><span class="Command_002c_Command">CloudStreams</span><span class="Command"> Development perspective by clicking </span><span class="Command_002c_uicontrol">Window &gt; Open Perspective &gt; Other &gt; CloudStreams Development</span><span class="Command">. </span></div><div id="wwID0EABQO" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span><span class="Command">In the </span><span class="Command_002c_Command">CloudStreams</span><span class="Command"> Governance view, expand your </span><span class="Command_002c_Command">CloudStreams</span><span class="Command"> Governance project and click the virtual service name. </span></div><div id="wwID0EFCQO" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span><span class="Command">Expand </span><span class="Command_002c_uicontrol">Error Sequence</span><span class="Command">. </span></div><div id="wwID0EEDQO" class="Step_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span><span class="Command">Click </span><span class="Command_002c_uicontrol">Error Messaging</span><span class="Command"> and complete the fields in the </span><span class="Command_002c_uicontrol">General</span><span class="Command"> page in the Properties view as follows. </span></div><div class="ww_skin_page_overflow"><table class="NoRules2" cellspacing="0" summary=""><tr><td class="Table_Cell_Head" style="padding-left: 2pt; padding-right: 2pt; width: 90pt"><div id="wwID0ESFQO" class="Table_Cell_Head">Option</div></td><td class="Table_Cell_Head" style="padding-left: 2pt; padding-right: 2pt; width: 324pt"><div id="wwID0EYFQO" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EHGQO" class="Table_Cell"><span class="uicontrol">Name</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ERGQO" class="Table_Cell">You can optionally change the step name to any other name. There are no naming restrictions.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E3GQO" class="Table_Cell"><span class="uicontrol">Type</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGHQO" class="Table_Cell">(Read-only field.) <span class="uicontrol">Error Messaging</span>.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EWHQO" class="Table_Cell"><span class="uicontrol">Error Message</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EGIQO" class="Table_Cell">Select one or both of the following options:</div><div id="wwID0ELIQO" class="Table_Cell"><span class="uicontrol">Custom Failure Response Message</span>: When you select this option, <span class="ph">CloudStreams</span> returns the following fault response to the consuming application:</div><div id="wwID0EYIQO" class="Table_Cell"><span class="codeph">CloudStreams encountered an error:$ERROR_MESSAGE while executing operation:$OPERATION service:$SERVICE at time:$TIME on date:$DATE. The client ip was:$CLIENT_IP. The current user:$USER. The consumer application:$CONSUMER_APPLICATION".</span></div><div id="wwID0EBJQO" class="Note"><span class="Bold">Note:<br /></span>When $CLIENT_IP is used, <span class="ph">CloudStreams</span> will replace $CLIENT_IP with the IP address of the client. For privacy concerns or to be in compliance with General Data Protection Regulation (GDPR), delete the <span class="emphasis">"The client ip was:$CLIENT_IP."</span> string.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ETKQO" class="Table_Cell">This fault response is returned in both of the following cases:</div><div id="wwID0E5KQO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>When a fault is returned by the native service provider.</div><div id="wwID0ERLQO" class="List_1_Continued">In this case, the <span class="parmname">$ERROR_MESSAGE</span> variable in the fault response will contain the message produced by the provider's exception that caused the error. This is equivalent to the <span class="codeph">getMessage</span> call on the Java Exception. For REST service calls, the message is returned inside an <span class="codeph">&lt;/Exception&gt;</span> tag. If the response is XML, the message is returned inside <span class="codeph">&lt;Exception&gt;</span><span class="codeph_002c_varname">'custom message'</span><span class="codeph">&lt;/Exception&gt;</span>. If the response is JSON, it will be returned inside <span class="codeph">{"Exception":"Invalid response"}</span>. <span class="ph">CloudStreams</span> discards the native service provider's fault and does not return this content to the web service caller since it could be considered a security issue, especially if the native provider is returning a stack trace with its response.</div><div id="wwID0EYMQO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>When a fault is returned by internal <span class="ph">CloudStreams</span> exceptions (policy violation errors, cloud connection errors and cloud connector service errors).</div><div id="wwID0EPNQO" class="List_1_Continued">In this case, the <span class="parmname">$ERROR_MESSAGE</span> variable will contain errors generated by <span class="ph">CloudStreams</span>.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ETOQO" class="Table_Cell">The default fault response contains predefined fault handler variables (<span class="parmname">$ERROR_MESSAGE</span>, <span class="parmname">$OPERATION</span>, etc.), which are described in 
    <a href="../wst-webhelp/to-virtual_services_28.html#wwID0EZRMM"
   
     title="The Fault Handler Variables"
    ><span class="heading-page">The Fault Handler Variables</span></a>.</div><div id="wwID0EOPQO" class="Table_Cell">You can customize the default fault response using the following substitution variables, where <span class="ph">CloudStreams</span> replaces the variable reference with the real content at run time:</div><div id="wwID0E5PQO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>The predefined context variables listed in 
    <a href="../wst-webhelp/to-virtual_services_37.html#wwID0EV5PM"
   
     title="The Predefined Context Variables"
    ><span class="heading-page">The Predefined Context
												Variables</span></a>.</div><div id="wwID0E3QQO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>Custom context variables that you declare using the <span class="ph">CloudStreams</span> API (see 
    <a href="../wst-webhelp/to-virtual_services_38.html#wwID0E1ABO"
   
     title="The API for Context Variables"
    ><span class="heading-page">The API for Context Variables</span></a>).</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ESSQO" class="Note"><span class="Bold">Note:<br /></span>If you want to reference a custom context variable that you have already defined in a context-based routing rule (as opposed to one you have declared using <span class="ph">CloudStreams</span> API for context variables), then you must add the prefix <span class="userinput">$mx</span> to the variable name in order to reference the variable. For example, if you defined the variable <span class="userinput">TAXID</span>, you would reference it as <span class="userinput">$mx:TAXID</span>.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ELUQO" class="Table_Cell"><span class="uicontrol">Native Provider Fault</span>: When you select this option, <span class="ph">CloudStreams</span> sends the native service provider's service fault content, if one is available. <span class="ph">CloudStreams</span> will send whatever content it received from the native service provider.</div><div id="wwID0E3UQO" class="Table_Cell">If you select this option, the <span class="uicontrol">Custom Failure Response Message</span> is ignored when a fault is returned by the native service provider. (Faults returned by internal <span class="ph">CloudStreams</span> exceptions will still be handled by the <span class="uicontrol">Custom Failure Response Message</span> option.)</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EUVQO" class="Table_Cell"><span class="uicontrol">Processing Method</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0E5VQO" class="Table_Cell">Optionally select either of the following:</div><div id="wwID0EKWQO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Pre-Processing</span>: Select this option if you want to invoke an IS service to manipulate the response message before the Error Sequence step is invoked. The IS service will have access to the response message context (the axis2 <span class="parmname">MessageContext</span> instance) before it is updated with the custom error message. For example, you might want to send emails or perform custom alerts based on the response payload. For more information about IS services, see 
    <a href="../wst-webhelp/to-virtual_services_54.html#wwID0EMIKO"
   
     title="The Invoke IS Service Step (Inbound, REST)"
    ><span class="heading-page">The 
								Invoke IS Service Step (Inbound,
								REST)</span></a>.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EKYQO" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span><span class="uicontrol">Post-Processing</span>: Select this option if you want to invoke an IS service to manipulate the service fault after the Error Sequence step is invoked. The IS service will have access to the entire service fault and the custom error message. You can make further changes to the fault message structure, if needed. For more information about IS services, see 
    <a href="../wst-webhelp/to-virtual_services_54.html#wwID0EMIKO"
   
     title="The Invoke IS Service Step (Inbound, REST)"
    ><span class="heading-page">The 
								Invoke IS Service Step (Inbound,
								REST)</span></a>.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright Â© 2013-2022&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>