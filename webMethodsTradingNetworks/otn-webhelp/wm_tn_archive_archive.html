<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="true" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>wm.tn.archive:archive</title><link rel="Prev" href="to-tnbis_archivefolder_3.html" title="Previous" /><link rel="Next" href="wm_tn_archive_extendedArchive.html" title="Next" /><link rel="StyleSheet" href="css/_tn_guides_integrated_diba2.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/_tn_guides_integrated_diba2_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/otn-webhelp/wm_tn_archive_archive.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pkUnFQOX_002fPQDbr9IMThsyIg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/otn-webhelp/wm_tn_archive_archive.html');"><header id="wwconnect_header"><!-- Produkt Name und Version in Breadcrumbs SQ --><div class="ww_skin_breadcrumbs"><span>Trading Networks</span>&nbsp;10.15 |
		     <span class="ww_skin_breadcrumbs_parent"><a href="../otn-webhelp/_tn_guides_integrated_diba2.1.0574.html#wwconnect_header">Building Services with Trading Networks</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../otn-webhelp/to-tnbis_archivefolder.html#wwconnect_header">Archive Folder</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_parent"><a href="../otn-webhelp/to-tnbis_archivefolder_3.html#wwconnect_header">Summary of Elements in this Folder</a></span><span class="ww_skin_breadcrumbs_divider"> | </span><span class="ww_skin_breadcrumbs_current">wm.tn.archive:archive</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwID0EWE3R" class="Heading_3">wm.tn.archive:archive</div><div id="wwID0EAG3R" class="Body">Archives documents and deletes documents from the <span class="ph">Trading Networks</span> database.</div><div id="wwID0EUG3R" class="Section_Title">Input Parameters</div><div class="ww_skin_page_overflow"><table class="norules1" cellspacing="4" summary=""><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 25%"><div id="wwID0E6H3R" class="Table_Cell"><span class="varname">archiveAfterDays</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 75%"><div id="wwID0ELI3R" class="Table_Cell"><span class="bisdatatype">String</span> (optional) The maximum number of days to store a document in the production tables (since being received) before being archived. This service archives documents that have been in the database longer than the number of days you specify.</div><div id="wwID0EWI3R" class="Table_Cell">Specify a value from 0 through 730365. 0 indicates to not archive documents.</div><div id="wwID0E2I3R" class="Table_Cell">If you do not specify a value for <span class="varname">archiveAfterDays</span>, this service uses the setting of the <span class="codeph">tn.archive.archiveAfterDays</span> property in the <span class="ph">Trading Networks</span> properties file located in the directory, <span class="ph"> </span><span class="ph_002c_emphasis">Integration&nbsp;Server_directory</span><span class="ph"> </span>\instances\<span class="varname">instance_name</span>\packages\WmTN\config\properties.cnf.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EEK3R" class="Table_Cell"><span class="varname">deleteAfterDays</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EQK3R" class="Table_Cell"><span class="bisdatatype">String</span> (optional) The maximum number of days that a document is to remain in the database (since it was received) before being deleted. This service deletes documents that have been in the database longer than the number of days you specify.</div><div id="wwID0E2K3R" class="Table_Cell">Specify a value from 0 through 730365. If you specify 0, <span class="ph">Trading Networks</span> does not delete documents.</div><div id="wwID0EFL3R" class="Table_Cell">If you do not specify a value for <span class="varname">deleteAfterDays</span>, this service uses the setting of the <span class="codeph">tn.archive.deleteAfterDays</span> property in the <span class="ph">Trading Networks</span> properties file. The <span class="ph">Trading Networks</span> properties file is in the directory, <span class="ph"> </span><span class="ph_002c_emphasis">Integration&nbsp;Server_directory</span><span class="ph"> </span>\instances\<span class="varname">instance_name</span>\packages\WmTN\config\properties.cnf.</div></td></tr></table></div><div id="wwID0EZM3R" class="Section_Title">Output Parameters</div><div class="ww_skin_page_overflow"><table class="norules1" cellspacing="4" summary=""><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 25%"><div id="wwID0EEO3R" class="Table_Cell"><span class="varname">archiveCount</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 75%"><div id="wwID0EQO3R" class="Table_Cell"><span class="bisdatatype">String</span> The number of documents that the service archived.</div></td></tr><tr><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0EBP3R" class="Table_Cell"><span class="varname">deleteCount</span></div></td><td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top"><div id="wwID0ENP3R" class="Table_Cell"><span class="bisdatatype">String</span> The number of documents that the service deleted from the database.</div></td></tr></table></div><div id="wwID0EFQ3R" class="Body">When you run services such as <span class="apiname">wm.tn.archive:archive</span> or <span class="apiname">wm.tn.archive:extendedArchive</span>:</div><div id="wwID0EZQ3R" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>For each batch, based on the <span class="ph">Trading Networks</span> property <span class="apiname">tn.archive.batchSize</span>, the document IDs to be archived/deleted are copied to the ARCHIVE_WorkTable.</div><div id="wwID0ETR3R" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>The document IDs are looped over and deleted.</div><div id="wwID0EES3R" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Once the actual records are deleted, the records are deleted from the ARCHIVE_WorkTable.</div><div id="wwID0EVS3R" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>4. </span></span>If, for some reason, the job does not terminate normally, for example, the Oracle rollback segment overflows due to a large batch size, there might be leftover records in ARCHIVE_WorkTable. If this happens, these records have to be deleted before attempting another archive operation.</div><div id="wwID0EHT3R" class="Body">Starting <span class="ph">Trading Networks</span> versions 10.1 or higher, archive stored procedures were introduced to streamline the process. You can manually delete the records by date, but this can be problematic with a large number of records due to the dependency on rollback segment sizing.</div><div id="wwID0ERT3R" class="Body">The <span class="apiname">tn.archive.batchSize</span> determines the number of records to commit per transaction, making the behavior easier to control.</div><div id="wwID0EEU3R" class="Section_Title">Usage Notes</div><div id="wwID0EPU3R" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>You can execute this service from time to time to conserve space in the system database. You can use <span class="ph">Integration Server Administrator</span> to schedule a user task to automatically execute this service periodically. You may not need this service for sites with large databases and that have one or more database administrators because such sites usually have their own archiving constraints.</div><div id="wwID0EGV3R" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If you do not specify <span class="varname">archiveAfterDays</span> and the <span class="codeph">tn.archive.archiveAfterDays</span> is not set in the <span class="ph">Trading Networks</span> properties file, the service deletes documents, but does not archive any documents.</div><div id="wwID0EGW3R" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" /></span></span>If the setting that controls deleting documents (either <span class="varname">deleteAfterDays</span> specified with the service or the <span class="codeph">tn.archive.deleteAfterDays</span>) is less than the setting that controls archiving documents (either <span class="varname">archiveAfterDays</span> specified with the service or the <span class="codeph">tn.archive.archiveAfterDays</span> property), this service does not archive files, only deletes them.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><!-- SQ insert Footer --><br /><hr style="border:1px solid; border-color: #1776BF; " /><!-- FRWE: Why is the font family information hard-coded?? --><div style="font-family: 'Roboto', Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;"><a href="http://www.softwareag.com/licenses">Copyright Â© 2007-2024&nbsp;Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</a></div><!-- SQ insert Date 
	 <div style="text-align: center; font-weight: bold;" wwpage:content="pub-date">January 1, 2015</div> --><!-- old Footer 2016
	  <div class="footer">Copyright &#169; <span wwpage:content="sag:product-copyrfirst"></span>, <span wwpage:content="sag:organization-copyrholder"></span>, <a href="http://sag.com/" wwpage:attribute-href="sag:organization-url" wwpage:content="sag:organization-url">http://sag.com/</a>
   --><!-- SQ Variablen --><!-- Copyright Test --><!--	  <div style="text-decoration: underline">Copyright Import Test:</div>
	  <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
	  <br></br>--><!--
	  <!-\- SQ Variables - Information from xresources -\->
	  <div style="text-decoration: underline">From xresources:</div>
	  <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
	  <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
	  <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
	  <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
	  
	  <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
	  <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
	  <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
	  
	  <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
	  <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
	  <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
	  <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
	  
	  <!-\- SQ Variables - Values from DITA-Map and Keymap-\->
	  <br></br>
	  <div style="text-decoration: underline">From DITA/Book-Map:</div>
	  <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
	  <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
	  <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
	  <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
	  <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
	  <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
	  <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
	  <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
	  <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
	  <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
	  <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
	  <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">From x_runtime/keymap.ditamap:</div>
	  <div>sag:product-shortname == <span wwpage:replace="wwvars:sag:product-shortname"></span></div>
	  <div>sag:product-longname == <span wwpage:replace="wwvars:sag:product-longname"></span></div>
	  <div>versionAdd == <span wwpage:replace="wwvars:versionAdd"></span></div>
	  <div>yearFYLY == <span wwpage:replace="wwvars:yearFYLY"></span></div>
	  <div>fingerprint == <span wwpage:replace="wwvars:fingerprint"></span></div>
	  <div>sag:CopyrightDeclaration == <span wwpage:replace="wwvars:sag:CopyrightDeclaration"></span></div>
	  <div>pdfReleaseDate == <span wwpage:replace="wwvars:pdfReleaseDate"></span></div>
	  <div>documentID == <span wwpage:replace="wwvars:documentID"></span></div>
	  <br></br>
	  <div style="text-decoration: underline">Reserve:</div>
	  <div>organization == <span wwpage:content="organization"></span></div>
	  <div>product-name == <span wwpage:content="product-name"></span></div>
	  <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
	  <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
	  <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
	  <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
	  <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
	  <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>  
	  <div>Published == <span wwpage:content="pub-date"></span></div>
	  --></footer></body></html>